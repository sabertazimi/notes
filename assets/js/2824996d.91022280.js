"use strict";(self.webpackChunknotes=self.webpackChunknotes||[]).push([["31584"],{50898(e,n,t){t.r(n),t.d(n,{metadata:()=>i,default:()=>h,frontMatter:()=>l,contentTitle:()=>c,toc:()=>a,assets:()=>o});var i=JSON.parse('{"id":"ai/python/cli","title":"Command Line","description":"Input","source":"@site/content/ai/python/cli.md","sourceDirName":"ai/python","slug":"/ai/python/cli","permalink":"/notes/ai/python/cli","draft":false,"unlisted":false,"editUrl":"https://github.com/sabertazimi/notes/edit/main/content/ai/python/cli.md","tags":[{"inline":true,"label":"AI","permalink":"/notes/tags/ai"},{"inline":true,"label":"Language","permalink":"/notes/tags/language"},{"inline":true,"label":"Python","permalink":"/notes/tags/python"},{"inline":true,"label":"I/O","permalink":"/notes/tags/i-o"},{"inline":true,"label":"CLI","permalink":"/notes/tags/cli"},{"inline":true,"label":"Process","permalink":"/notes/tags/process"},{"inline":true,"label":"Bash","permalink":"/notes/tags/bash"}],"version":"current","lastUpdatedBy":"sabertazimi","lastUpdatedAt":1769697931000,"sidebarPosition":13,"frontMatter":{"sidebar_position":13,"tags":["AI","Language","Python","I/O","CLI","Process","Bash"]},"sidebar":"tutorialSidebar","previous":{"title":"I/O","permalink":"/notes/ai/python/io"},"next":{"title":"Testing","permalink":"/notes/ai/python/testing"}}'),r=t(62615),s=t(30416);let l={sidebar_position:13,tags:["AI","Language","Python","I/O","CLI","Process","Bash"]},c="Command Line",o={},a=[{value:"Input",id:"input",level:2},{value:"Subprocess",id:"subprocess",level:2},{value:"Environment Variables",id:"environment-variables",level:3},{value:"Non-Interactive Shell",id:"non-interactive-shell",level:3},{value:"Click",id:"click",level:2},{value:"Progress",id:"progress",level:2}];function d(e){let n={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",p:"p",pre:"pre",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",...(0,s.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"command-line",children:"Command Line"})}),"\n",(0,r.jsx)(n.h2,{id:"input",children:"Input"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"input(prompt)"}),": read a line from the user."]}),"\n",(0,r.jsx)(n.h2,{id:"subprocess",children:"Subprocess"}),"\n",(0,r.jsx)(n.h3,{id:"environment-variables",children:"Environment Variables"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"subprocess.run()"})," \u9ED8\u8BA4\u7EE7\u627F\u7236\u8FDB\u7A0B\u6240\u6709\u73AF\u5883\u53D8\u91CF (",(0,r.jsx)(n.code,{children:"VIRTUAL_ENV"}),"\u3001",(0,r.jsx)(n.code,{children:"PATH"})," etc.):"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:'subprocess.run(["bash", "-c", "echo $VIRTUAL_ENV"], capture_output=True, text=True)\n'})}),"\n",(0,r.jsxs)(n.p,{children:["\u901A\u8FC7 ",(0,r.jsx)(n.code,{children:"env"})," \u81EA\u5B9A\u4E49\u73AF\u5883\u53D8\u91CF:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:'# \u9694\u79BB\uFF1A\u6E05\u7A7A\u73AF\u5883\nsubprocess.run(["bash", "-c", command], env={})\n\n# \u81EA\u5B9A\u4E49\u73AF\u5883\nenv = {\n    "PATH": "/usr/bin:/bin",\n    "HOME": os.environ.get("HOME", ""),\n}\n\n# \u52A0\u8F7D ~/.bashrc\uFF08\u8BA9 alias/function \u751F\u6548\uFF09\nenv["BASH_ENV"] = str(Path.home() / ".bashrc")\n\nsubprocess.run(["bash", "-c", command], env=env)\n'})}),"\n",(0,r.jsx)(n.h3,{id:"non-interactive-shell",children:"Non-Interactive Shell"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:'bash -c "command"'})," \u662F non-interactive shell, \u4E0D\u52A0\u8F7D\u7528\u6237\u914D\u7F6E\u6587\u4EF6:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"echo $-  # hBc (\u4E0D\u542B 'i')\n"})}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Shell \u7C7B\u578B"}),(0,r.jsx)(n.th,{children:"\u52A0\u8F7D\u7684\u914D\u7F6E\u6587\u4EF6"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Interactive login"}),(0,r.jsxs)(n.td,{children:[(0,r.jsx)(n.code,{children:"/etc/profile"})," \u2192 ",(0,r.jsx)(n.code,{children:"~/.bash_profile"})," \u2192 ",(0,r.jsx)(n.code,{children:"~/.bashrc"})]})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Interactive non-login"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"~/.bashrc"})})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsxs)(n.td,{children:["Non-interactive (",(0,r.jsx)(n.code,{children:"-c"}),")"]}),(0,r.jsx)(n.td,{children:"\u65E0"})]})]})]}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"\u7279\u6027"}),(0,r.jsx)(n.th,{children:"Non-Interactive"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Alias"}),(0,r.jsxs)(n.td,{children:["\u274C ",(0,r.jsx)(n.code,{children:"~/.bashrc"})," \u672A\u52A0\u8F7D"]})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Function"}),(0,r.jsxs)(n.td,{children:["\u274C ",(0,r.jsx)(n.code,{children:"~/.bashrc"})," \u672A\u52A0\u8F7D"]})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"\u73AF\u5883\u53D8\u91CF"}),(0,r.jsx)(n.td,{children:"\u2705 \u4ECE\u7236\u8FDB\u7A0B\u7EE7\u627F"})]})]})]}),"\n",(0,r.jsx)(n.h2,{id:"click",children:"Click"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:"import click\n\nfrom caesar_encryption import encrypt\n\n@click.command()\n@click.option(\n    '--input_file',\n    type=click.File('r'),\n    help='File in which there is the text you want to encrypt/decrypt.'\n         'If not provided, a prompt will allow you to type the input text.',\n)\n@click.option(\n    '--output_file',\n    type=click.File('w'),\n    help='File in which the encrypted / decrypted text will be written.'\n         'If not provided, the output text will just be printed.',\n)\n@click.option(\n    '--decrypt/--encrypt',\n    '-d/-e',\n    help='Whether you want to encrypt the input text or decrypt it.'\n)\n@click.option(\n    '--key',\n    '-k',\n    default=1,\n    help='The numeric key to use for the caesar encryption / decryption.'\n)\ndef caesar(input_file, output_file, decrypt, key):\n    if input_file:\n        text = input_file.read()\n    else:\n        text = click.prompt('Enter a text', hide_input=not decrypt)\n    if decrypt:\n        key = -key\n    cypherText = encrypt(text, key)\n    if output_file:\n        output_file.write(cypherText)\n    else:\n        click.echo(cypherText)\n\nif __name__ == '__main__':\n    caesar()\n"})}),"\n",(0,r.jsx)(n.h2,{id:"progress",children:"Progress"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:"import click\nimport enchant\n\nfrom tqdm import tqdm\n\nfrom caesar_encryption import encrypt\n\n@click.command()\n@click.option(\n    '--input_file',\n    type=click.File('r'),\n    required=True,\n)\n@click.option(\n    '--output_file',\n    type=click.File('w'),\n    required=True,\n)\ndef caesar_breaker(input_file, output_file):\n    cypherText = input_file.read()\n    english_dictionary = enchant.Dict(\"en_US\")\n    best_number_of_english_words = 0\n    for key in tqdm(range(26)):\n        plaintext = encrypt(cypherText, -key)\n        number_of_english_words = 0\n        for word in plaintext.split(' '):\n            if word and english_dictionary.check(word):\n                number_of_english_words += 1\n        if number_of_english_words > best_number_of_english_words:\n            best_number_of_english_words = number_of_english_words\n            best_plaintext = plaintext\n            best_key = key\n    click.echo(\n        f'The most likely encryption key is {best_key}. It gives the following plaintext:\\n\\n'\n        f'{best_plaintext[:1000]}...'\n    )\n    output_file.write(best_plaintext)\n\nif __name__ == '__main__':\n    caesar_breaker()\n"})})]})}function h(e={}){let{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(d,{...e})}):d(e)}},30416(e,n,t){t.d(n,{R:()=>l,x:()=>c});var i=t(59471);let r={},s=i.createContext(r);function l(e){let n=i.useContext(s);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:l(e.components),i.createElement(s.Provider,{value:n},e.children)}}}]);