"use strict";(self.webpackChunknotes=self.webpackChunknotes||[]).push([["70148"],{80634(n,e,t){t.r(e),t.d(e,{metadata:()=>r,default:()=>d,frontMatter:()=>i,contentTitle:()=>a,toc:()=>o,assets:()=>u});var r=JSON.parse('{"id":"language/rust/closure","title":"Closure","description":"Function Parameter Closure","source":"@site/content/language/rust/closure.md","sourceDirName":"language/rust","slug":"/language/rust/closure","permalink":"/notes/language/rust/closure","draft":false,"unlisted":false,"editUrl":"https://github.com/sabertazimi/notes/edit/main/content/language/rust/closure.md","tags":[{"inline":true,"label":"Language","permalink":"/notes/tags/language"},{"inline":true,"label":"Rust","permalink":"/notes/tags/rust"},{"inline":true,"label":"Closure","permalink":"/notes/tags/closure"}],"version":"current","lastUpdatedBy":"Sabertaz","lastUpdatedAt":1769518084000,"sidebarPosition":9,"frontMatter":{"sidebar_position":9,"tags":["Language","Rust","Closure"]},"sidebar":"tutorialSidebar","previous":{"title":"Lifetime","permalink":"/notes/language/rust/lifetime"},"next":{"title":"Iterator","permalink":"/notes/language/rust/iterator"}}'),s=t(62615),l=t(30416);let i={sidebar_position:9,tags:["Language","Rust","Closure"]},a="Closure",u={},o=[{value:"Function Parameter Closure",id:"function-parameter-closure",level:2},{value:"Function Return Closure",id:"function-return-closure",level:2}];function c(n){let e={code:"code",h1:"h1",h2:"h2",header:"header",li:"li",p:"p",pre:"pre",ul:"ul",...(0,l.R)(),...n.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(e.header,{children:(0,s.jsx)(e.h1,{id:"closure",children:"Closure"})}),"\n",(0,s.jsx)(e.h2,{id:"function-parameter-closure",children:"Function Parameter Closure"}),"\n",(0,s.jsx)(e.p,{children:"\u6539\u53D8\u6355\u83B7\u53D8\u91CF\u7684\u6240\u6709\u6743 (FnOnce):"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-rust",children:'fn fn_once<F>(func: F)\nwhere\n    F: FnOnce(usize) -> bool + Copy,\n{\n    println!("{}", func(3));\n    println!("{}", func(4));\n}\n\nfn main() {\n    let x = vec![1, 2, 3];\n    fn_once(|z|{z == x.len()})\n}\n'})}),"\n",(0,s.jsx)(e.p,{children:"\u53EF\u53D8\u501F\u7528\u6355\u83B7 (FnMut):"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-rust",children:'fn main() {\n    let mut s = String::new();\n\n    let update_string =  |str| s.push_str(str);\n\n    exec(update_string);\n\n    println!("{:?}",s);\n}\n\nfn exec<\'a, F: FnMut(&\'a str)>(mut f: F)  {\n    f("hello")\n}\n'})}),"\n",(0,s.jsx)(e.p,{children:"\u4E0D\u53EF\u53D8\u501F\u7528\u6355\u83B7 (Fn):"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-rust",children:'fn main() {\n    let s = "hello, ".to_string();\n\n    let update_string =  |str| println!("{},{}",s,str);\n\n    exec(update_string);\n\n    println!("{:?}",s);\n}\n\nfn exec<\'a, F: Fn(String) -> ()>(f: F)  {\n    f("world".to_string())\n}\n'})}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsxs)(e.li,{children:["\u6240\u6709\u95ED\u5305\u90FD\u81EA\u52A8\u5B9E\u73B0\u4E86 ",(0,s.jsx)(e.code,{children:"FnOnce"})," \u7279\u5F81, \u56E0\u6B64\u4EFB\u4F55\u4E00\u4E2A\u95ED\u5305\u90FD\u81F3\u5C11\u53EF\u4EE5\u88AB\u8C03\u7528\u4E00\u6B21."]}),"\n",(0,s.jsxs)(e.li,{children:["\u6CA1\u6709\u79FB\u51FA\u6240\u6355\u83B7\u53D8\u91CF\u7684\u6240\u6709\u6743\u7684\u95ED\u5305\u81EA\u52A8\u5B9E\u73B0\u4E86 ",(0,s.jsx)(e.code,{children:"FnMut"})," \u7279\u5F81."]}),"\n",(0,s.jsxs)(e.li,{children:["\u4E0D\u9700\u8981\u5BF9\u6355\u83B7\u53D8\u91CF\u8FDB\u884C\u6539\u53D8\u7684\u95ED\u5305\u81EA\u52A8\u5B9E\u73B0\u4E86 ",(0,s.jsx)(e.code,{children:"Fn"})," \u7279\u5F81."]}),"\n"]}),"\n",(0,s.jsx)(e.h2,{id:"function-return-closure",children:"Function Return Closure"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-rust",children:"fn factory() -> impl Fn(i32) -> i32 {\n    let num = 5;\n    |x| x + num\n}\n"})}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-rust",children:"fn factory(x:i32) -> Box<dyn Fn(i32) -> i32> {\n    let num = 5;\n\n    if x > 1{\n        Box::new(move |x| x + num)\n    } else {\n        Box::new(move |x| x - num)\n    }\n}\n"})})]})}function d(n={}){let{wrapper:e}={...(0,l.R)(),...n.components};return e?(0,s.jsx)(e,{...n,children:(0,s.jsx)(c,{...n})}):c(n)}},30416(n,e,t){t.d(e,{R:()=>i,x:()=>a});var r=t(59471);let s={},l=r.createContext(s);function i(n){let e=r.useContext(l);return r.useMemo(function(){return"function"==typeof n?n(e):{...e,...n}},[e,n])}function a(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(s):n.components||s:i(n.components),r.createElement(l.Provider,{value:e},n.children)}}}]);