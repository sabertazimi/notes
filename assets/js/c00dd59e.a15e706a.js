"use strict";(self.webpackChunknotes=self.webpackChunknotes||[]).push([["34562"],{6634(e,n,i){i.r(n),i.d(n,{metadata:()=>s,default:()=>o,frontMatter:()=>r,contentTitle:()=>c,toc:()=>d,assets:()=>a});var s=JSON.parse('{"id":"programming/linux/shell","title":"Shell Scripts","description":"Warnings","source":"@site/content/programming/linux/shell.md","sourceDirName":"programming/linux","slug":"/programming/linux/shell","permalink":"/notes/programming/linux/shell","draft":false,"unlisted":false,"editUrl":"https://github.com/sabertazimi/notes/edit/main/content/programming/linux/shell.md","tags":[{"inline":true,"label":"Programming","permalink":"/notes/tags/programming"},{"inline":true,"label":"OS","permalink":"/notes/tags/os"},{"inline":true,"label":"Linux","permalink":"/notes/tags/linux"},{"inline":true,"label":"Shell","permalink":"/notes/tags/shell"},{"inline":true,"label":"Bash","permalink":"/notes/tags/bash"},{"inline":true,"label":"Zsh","permalink":"/notes/tags/zsh"}],"version":"current","lastUpdatedBy":"sabertazimi","lastUpdatedAt":1772432525000,"sidebarPosition":2,"frontMatter":{"sidebar_position":2,"tags":["Programming","OS","Linux","Shell","Bash","Zsh"]},"sidebar":"tutorialSidebar","previous":{"title":"Core","permalink":"/notes/programming/linux/core"},"next":{"title":"Terminal","permalink":"/notes/programming/linux/terminal"}}'),l=i(62615),t=i(30416);let r={sidebar_position:2,tags:["Programming","OS","Linux","Shell","Bash","Zsh"]},c="Shell Scripts",a={},d=[{value:"Warnings",id:"warnings",level:2},{value:"\u6587\u4EF6\u91CD\u5B9A\u5411",id:"\u6587\u4EF6\u91CD\u5B9A\u5411",level:2},{value:"Here Document",id:"here-document",level:3},{value:"Variables",id:"variables",level:2},{value:"Built-in",id:"built-in",level:3},{value:"Environment",id:"environment",level:3},{value:"Expansions",id:"expansions",level:2},{value:"Flow Control",id:"flow-control",level:2},{value:"If",id:"if",level:3},{value:"Case",id:"case",level:3},{value:"For",id:"for",level:3},{value:"While and Until",id:"while-and-until",level:3},{value:"Do While",id:"do-while",level:3},{value:"Array",id:"array",level:2},{value:"Function",id:"function",level:2},{value:"I/O",id:"io",level:2},{value:"Signal",id:"signal",level:2},{value:"Debugging",id:"debugging",level:2},{value:"Interaction",id:"interaction",level:2},{value:"Root Validation",id:"root-validation",level:3},{value:"Help Option",id:"help-option",level:3},{value:"Silent Option",id:"silent-option",level:3},{value:"Command Validation",id:"command-validation",level:3},{value:"Get Absolute Path",id:"get-absolute-path",level:3},{value:"Error Handle",id:"error-handle",level:3},{value:"Loading Progress",id:"loading-progress",level:3},{value:"Zsh",id:"zsh",level:2},{value:"Best Practices",id:"best-practices",level:2}];function h(e){let n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,t.R)(),...e.components};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(n.header,{children:(0,l.jsx)(n.h1,{id:"shell-scripts",children:"Shell Scripts"})}),"\n",(0,l.jsx)(n.h2,{id:"warnings",children:"Warnings"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"="})," \u5DE6\u53F3\u65E0\u7A7A\u683C."]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"()"})," ",(0,l.jsx)(n.code,{children:"[]"})," \u5185\u90E8\u6700\u597D\u6709\u7A7A\u683C."]}),"\n",(0,l.jsxs)(n.li,{children:["\u6570\u503C\u8FD0\u7B97\u7528 ",(0,l.jsx)(n.code,{children:"(())"})," \u6216 ",(0,l.jsx)(n.code,{children:"$(())"}),"."]}),"\n"]}),"\n",(0,l.jsx)(n.h2,{id:"\u6587\u4EF6\u91CD\u5B9A\u5411",children:"\u6587\u4EF6\u91CD\u5B9A\u5411"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"> \u6587\u4EF6\u8BBE\u5907\u540D"}),": \u8986\u76D6\u6807\u51C6\u8F93\u51FA\u91CD\u5B9A\u5411."]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:">> \u6587\u4EF6\u8BBE\u5907\u540D"}),": \u8FFD\u52A0\u6807\u51C6\u8F93\u51FA\u91CD\u5B9A\u5411."]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"2>\u6587\u4EF6\u8BBE\u5907\u540D"}),": \u8986\u76D6\u9519\u8BEF\u8F93\u51FA\u91CD\u5B9A\u5411."]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"2>>\u6587\u4EF6\u8BBE\u5907\u540D"}),": \u8FFD\u52A0\u9519\u8BEF\u8F93\u51FA\u91CD\u5B9A\u5411."]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:">/>> \u6587\u4EF6 2>&1 &>/&>>\u6587\u4EF6"}),": \u8986\u76D6/\u8FFD\u52A0\u6B63\u786E\u8F93\u51FA\u4E0E\u9519\u8BEF\u8F93\u51FA\u540C\u65F6\u91CD\u5B9A\u5411."]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"< \u6587\u4EF6\u8BBE\u5907\u540D"}),"/",(0,l.jsx)(n.code,{children:"<< \u6587\u4EF6\u8BBE\u5907\u540D"}),": \u8986\u76D6/\u8FFD\u52A0\u6807\u51C6\u8F93\u5165\u91CD\u5B9A\u5411."]}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"here-document",children:"Here Document"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"command << END\n...\nEND\n\ncommand << EOF\n...\nEOF\n"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:'#!/bin/bash\ngnuplot -persist <<EOF\nset data style linespoints\nshow timestamp\nset title "$1"\nset xlabel "time (seconds)"\nset ylabel "Segments (cwnd, ssthresh)"\nplot "$1" using 1:7 title "snd_cwnd", \\\\\n     "$1" using 1:($8>=2147483647 ? 0 : $8) title "snd_ssthresh"\nEOF\n'})}),"\n",(0,l.jsx)(n.h2,{id:"variables",children:"Variables"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"="})," : \u5DE6\u53F3\u4E24\u7AEF\u4E0D\u53EF\u6709\u7A7A\u683C."]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"' '"}),": \u5B8C\u5168\u6807\u51C6\u5B57\u7B26\u4E32."]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:'" "'}),": \u683C\u5F0F\u5316\u5B57\u7B26\u4E32."]}),"\n",(0,l.jsxs)(n.li,{children:["\u8C03\u7528\u53D8\u91CF\u503C\uFF1A",(0,l.jsx)(n.code,{children:"$\u53D8\u91CF\u540D"}),"."]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"set"}),"/",(0,l.jsx)(n.code,{children:"unset"}),": \u8BBE\u7F6E/\u53D6\u6D88\u53D8\u91CF."]}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"built-in",children:"Built-in"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"$*"}),"/",(0,l.jsx)(n.code,{children:"$@"}),": ",(0,l.jsx)(n.code,{children:"argv[1], ..., argv[n]"})]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"$0/$1/../$n"}),": ",(0,l.jsx)(n.code,{children:"argv[0], ..., argv[n]"})]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"$#"}),": argc"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"$?"}),": exit code of last command"]}),"\n"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:'if [ "$?" -ne "0" ];then\n    echo "sorry, command execution failed!"\nfi\n'})}),"\n",(0,l.jsxs)(n.p,{children:["\u6BCF\u6B21 ",(0,l.jsx)(n.code,{children:"shift"})," \u547D\u4EE4\u6267\u884C\u7684\u65F6\u5019,\n\u53D8\u91CF ",(0,l.jsx)(n.code,{children:"$2"})," \u7684\u503C\u4F1A\u79FB\u52A8\u5230\u53D8\u91CF ",(0,l.jsx)(n.code,{children:"$1"})," \u4E2D,\n\u53D8\u91CF ",(0,l.jsx)(n.code,{children:"$3"})," \u7684\u503C\u4F1A\u79FB\u52A8\u5230\u53D8\u91CF ",(0,l.jsx)(n.code,{children:"$2"})," \u4E2D.\n\u53D8\u91CF ",(0,l.jsx)(n.code,{children:"$#"})," \u7684\u503C\u4E5F\u4F1A\u76F8\u5E94\u7684\u51CF 1."]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:'#!/bin/bash\n# posit-param2: script to display all arguments\ncount=1\nwhile [[ $# -gt 0 ]]; do\n    echo "Argument $count = $1"\n    count=$((count + 1))\n    shift\ndone\n'})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:'usage () {\n    echo "$PROGNAME: usage: $PROGNAME [-f file | -i]"\n    return\n}\n# process command line options\ninteractive=\nfilename=\nwhile [[ -n $1 ]]; do\n    case $1 in\n    -f | --file)            shift\n                            filename=$1\n                            ;;\n    -i | --interactive)     interactive=1\n                            ;;\n    -h | --help)            usage\n                            exit\n                            ;;\n    *)                      usage >&2\n                            exit 1\n                            ;;\n    esac\n    shift\ndone\n'})}),"\n",(0,l.jsx)(n.h3,{id:"environment",children:"Environment"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"/etc/profile.d/*.sh"}),"."]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"~/.bash_profile"}),"."]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"~/.bashrc"}),"."]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"/etc/profile"}),"."]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"/etc/bash.bashrc"}),"."]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"/etc/issue"}),": shell \u767B\u5F55\u4FE1\u606F."]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"PS1"})," \u73AF\u5883\u53D8\u91CF: shell \u5934\u884C\u6253\u5370\u4FE1\u606F."]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"PATH"})," \u73AF\u5883\u53D8\u91CF."]}),"\n"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"export PATH=$PATH:/usr/local/bin\nenv\nprintenv\n"})}),"\n",(0,l.jsx)(n.h2,{id:"expansions",children:"Expansions"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"$(())"})," or ",(0,l.jsx)(n.code,{children:"$[]"}),": arithmetic expansion"]}),"\n"]}),"\n",(0,l.jsxs)(n.p,{children:["\u4E00\u822C\u5730, \u5C06\u6570\u503C\u8FD0\u7B97\u7528 ",(0,l.jsx)(n.code,{children:"(())"})," ",(0,l.jsx)(n.code,{children:"[[]]"})," \u6216 ",(0,l.jsx)(n.code,{children:"$(())"})," \u62EC\u8D77, \u53EF\u4EE5\u786E\u4FDD\u53D8\u91CF\u4E0D\u4F1A\u88AB\u8BC6\u522B\u4E3A string"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:'read x\nread y\n\necho $((x + y))\necho $((a < b ? a : b))\n\nif ((a > b))\nthen\n    echo "a > b"\nfi\n\nif [[ a -gt b ]]\nthen\n    echo "a > b"\nfi\n\nif [ "$a" -gt "$b" ]\nthen\n    echo "a > b"\nfi\n'})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"[[ xxx ]]"}),": condition"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"(( xxx ))"}),": arithmetic condition"]}),"\n"]}),"\n",(0,l.jsxs)(n.table,{children:[(0,l.jsx)(n.thead,{children:(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.th,{style:{textAlign:"left"},children:"operator"}),(0,l.jsx)(n.th,{style:{textAlign:"left"},children:"function"})]})}),(0,l.jsxs)(n.tbody,{children:[(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{style:{textAlign:"left"},children:"! EXPRESSION"}),(0,l.jsx)(n.td,{style:{textAlign:"left"},children:"The EXPRESSION is false"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{style:{textAlign:"left"},children:"-n STRING"}),(0,l.jsx)(n.td,{style:{textAlign:"left"},children:"The length of STRING is greater than zero"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{style:{textAlign:"left"},children:"-z STRING"}),(0,l.jsx)(n.td,{style:{textAlign:"left"},children:"The length of STRING is zero (ie it is empty)"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{style:{textAlign:"left"},children:"STRING1 == STRING2"}),(0,l.jsx)(n.td,{style:{textAlign:"left"},children:"STRING1 is equal to STRING2"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{style:{textAlign:"left"},children:"STRING1 != STRING2"}),(0,l.jsx)(n.td,{style:{textAlign:"left"},children:"STRING1 is not equal to STRING2"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{style:{textAlign:"left"},children:"STRING1 > STRING2"}),(0,l.jsx)(n.td,{style:{textAlign:"left"},children:"STRING1 sorts after STRING2"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{style:{textAlign:"left"},children:"STRING1 < STRING2"}),(0,l.jsx)(n.td,{style:{textAlign:"left"},children:"STRING1 sorts before STRING2"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{style:{textAlign:"left"},children:"INTEGER1 -eq INTEGER2"}),(0,l.jsx)(n.td,{style:{textAlign:"left"},children:"INTEGER1 is numerically equal to INTEGER2"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{style:{textAlign:"left"},children:"INTEGER1 -gt INTEGER2"}),(0,l.jsx)(n.td,{style:{textAlign:"left"},children:"INTEGER1 is numerically greater than INTEGER2"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{style:{textAlign:"left"},children:"INTEGER1 -lt INTEGER2"}),(0,l.jsx)(n.td,{style:{textAlign:"left"},children:"INTEGER1 is numerically less than INTEGER2"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{style:{textAlign:"left"},children:"-d FILE"}),(0,l.jsx)(n.td,{style:{textAlign:"left"},children:"FILE exists and is a directory"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{style:{textAlign:"left"},children:"-e FILE"}),(0,l.jsx)(n.td,{style:{textAlign:"left"},children:"FILE exists"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{style:{textAlign:"left"},children:"-r FILE"}),(0,l.jsx)(n.td,{style:{textAlign:"left"},children:"FILE exists and the read permission is granted"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{style:{textAlign:"left"},children:"-s FILE"}),(0,l.jsx)(n.td,{style:{textAlign:"left"},children:"FILE exists and it's size is greater than zero"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{style:{textAlign:"left"},children:"-w FILE"}),(0,l.jsx)(n.td,{style:{textAlign:"left"},children:"FILE exists and the write permission is granted"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{style:{textAlign:"left"},children:"-x FILE"}),(0,l.jsx)(n.td,{style:{textAlign:"left"},children:"FILE exists and the execute permission is granted"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{style:{textAlign:"left"},children:(0,l.jsx)(n.code,{children:"AND -a &&"})}),(0,l.jsx)(n.td,{style:{textAlign:"left"}})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{style:{textAlign:"left"},children:(0,l.jsx)(n.code,{children:"OR -o ||"})}),(0,l.jsx)(n.td,{style:{textAlign:"left"}})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{style:{textAlign:"left"},children:(0,l.jsx)(n.code,{children:"NOT ! !"})}),(0,l.jsx)(n.td,{style:{textAlign:"left"}})]})]})]}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:": group regexp"}),"\n"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"echo a{A{1,2},B{3,4}}b\naA1b aA2b aB3b aB4b\n"})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"${}"}),": string expansion","\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"${parameter:-word}"}),": \u82E5 parameter \u6CA1\u6709\u8BBE\u7F6E\uFF08\u4F8B\u5982\uFF0C\u4E0D\u5B58\u5728\uFF09\u6216\u8005\u4E3A\u7A7A\uFF0C\u5C55\u5F00\u7ED3\u679C\u662F word \u7684\u503C\u3002\n\u82E5 parameter \u4E0D\u4E3A\u7A7A\uFF0C\u5219\u5C55\u5F00\u7ED3\u679C\u662F parameter \u7684\u503C"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"${parameter:+word}"}),": \u82E5 parameter \u6CA1\u6709\u8BBE\u7F6E\u6216\u4E3A\u7A7A\uFF0C\u5C55\u5F00\u7ED3\u679C\u4E3A\u7A7A\u3002\n\u82E5 parameter \u4E0D\u4E3A\u7A7A\uFF0C \u5C55\u5F00\u7ED3\u679C\u662F word \u7684\u503C\u4F1A\u66FF\u6362\u6389 parameter \u7684\u503C"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"${parameter:=word}"}),": \u82E5 parameter \u6CA1\u6709\u8BBE\u7F6E\u6216\u4E3A\u7A7A\uFF0C\u5C55\u5F00\u7ED3\u679C\u662F word \u7684\u503C\u3002\n\u53E6\u5916\uFF0Cword \u7684\u503C\u4F1A\u8D4B\u503C\u7ED9 parameter\u3002\n\u82E5 parameter \u4E0D\u4E3A\u7A7A\uFF0C\u5C55\u5F00\u7ED3\u679C\u662F parameter \u7684\u503C"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"${parameter:?word}"}),": \u82E5 parameter \u6CA1\u6709\u8BBE\u7F6E\u6216\u4E3A\u7A7A\uFF0C\u8FD9\u79CD\u5C55\u5F00\u5BFC\u81F4\u811A\u672C\u5E26\u6709\u9519\u8BEF\u9000\u51FA\uFF0C\n\u5E76\u4E14 word \u7684\u5185\u5BB9\u4F1A\u53D1\u9001\u5230\u6807\u51C6\u9519\u8BEF\u3002\n\u82E5 parameter \u4E0D\u4E3A\u7A7A\uFF0C \u5C55\u5F00\u7ED3\u679C\u662F parameter \u7684\u503C"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"${!prefix*}"})," ",(0,l.jsx)(n.code,{children:"${!prefix@}"}),": \u8FD9\u79CD\u5C55\u5F00\u4F1A\u8FD4\u56DE\u4EE5 prefix \u5F00\u5934\u7684\u5DF2\u6709\u53D8\u91CF\u540D"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"${#parameter}"}),": \u5C55\u5F00\u6210\u7531 parameter \u6240\u5305\u542B\u7684\u5B57\u7B26\u4E32\u7684\u957F\u5EA6"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"${parameter:offset}"})," ",(0,l.jsx)(n.code,{children:"${parameter:offset:length}"}),": \u63D0\u53D6\u4E00\u90E8\u5206\u5B57\u7B26"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"${parameter,,}"})," \u628A parameter \u7684\u503C\u5168\u90E8\u5C55\u5F00\u6210\u5C0F\u5199\u5B57\u6BCD"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"${parameter,}"})," \u4EC5\u4EC5\u628A parameter \u7684\u7B2C\u4E00\u4E2A\u5B57\u7B26\u5C55\u5F00\u6210\u5C0F\u5199\u5B57\u6BCD"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"${parameter^^}"})," \u628A parameter \u7684\u503C\u5168\u90E8\u8F6C\u6362\u6210\u5927\u5199\u5B57\u6BCD"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"${parameter^}"})," \u4EC5\u4EC5\u628A parameter \u7684\u7B2C\u4E00\u4E2A\u5B57\u7B26\u8F6C\u6362\u6210\u5927\u5199\u5B57\u6BCD"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"${parameter#pattern}"})," ",(0,l.jsx)(n.code,{children:"${parameter##pattern}"}),",\n",(0,l.jsx)(n.code,{children:"${parameter%pattern}"})," ",(0,l.jsx)(n.code,{children:"${parameter%%pattern}"}),": \u4ECE parameter \u6240\u5305\u542B\u7684\u5B57\u7B26\u4E32\u4E2D\u6E05\u9664\u5F00\u5934/\u672B\u5C3E\u4E00\u90E8\u5206\u6587\u672C"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"${parameter/pattern/string}"}),", ",(0,l.jsx)(n.code,{children:"${parameter//pattern/string}"}),",\n",(0,l.jsx)(n.code,{children:"${parameter/#pattern/string}"}),", ",(0,l.jsx)(n.code,{children:"${parameter/%pattern/string}"}),": replace"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"foo=file.txt.zip\necho ${foo#*.}\ntxt.zip\necho ${foo##*.}\nzip\n\nfoo=file.txt.zip\necho ${foo%.*}\nfile.txt\necho ${foo%%.*}\nfile\n"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"foo=JPG.JPG\necho ${foo/JPG/jpg}\njpg.JPG\necho ${foo//JPG/jpg}\njpg.jpg\necho ${foo/#JPG/jpg}\njpg.JPG\necho ${foo/%JPG/jpg}\nJPG.jpg\n"})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"$()"}),": command result."]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:'""'}),": allow expansions string."]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"''"}),": disallow expansions string."]}),"\n"]}),"\n",(0,l.jsx)(n.h2,{id:"flow-control",children:"Flow Control"}),"\n",(0,l.jsx)(n.h3,{id:"if",children:"If"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"if [[ \u6761\u4EF6\u5224\u65AD\u5F0F ]] ; then\n    \u7A0B\u5E8F\nfi\nif [[ \u6761\u4EF6\u5224\u65AD\u5F0F ]]\n    then\n        \u7A0B\u5E8F\n    else\n        \u7A0B\u5E8F\nfi\n\nif [[ \u6761\u4EF6\u5224\u65AD\u5F0F1 ]]\n    then\n        \u7A0B\u5E8F1\nelif [[ \u6761\u4EF6\u5224\u65AD\u5F0F2 ]]\n    then\n        \u7A0B\u5E8F2\nelse\n        \u7A0B\u5E8Fn\nfi\n"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:'#!/usr/bin/bash\n\ni=1;\nfor flag in "$@"\ndo\n  if [[ $flag == "-o" ]]\n  then\n    open=1;\n  fi\ndone\n\nexclude="--exclude-dir=node_modules --exclude-dir=build  --exclude-dir=.yarn --exclude-dir=.cache --exclude-dir=.next --exclude-dir=coverage --exclude-dir=public --exclude-dir=.git --exclude-dir=dist --exclude=package-lock.json --exclude=yarn.lock --exclude=CHANGELOG.md"\n\nif [[ -n $open ]]\nthen\n  grep -r $1 $exclude | awk -F : \'{print $1}\' | xargs code;\nelse\n  grep -r $1 $exclude;\nfi\n'})}),"\n",(0,l.jsx)(n.h3,{id:"case",children:"Case"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"case $\u53D8\u91CF\u540D in\n    \u201C\u503C1\u201D)\n            \u7A0B\u5E8F\n            ;;\n    \u201C\u503C2\u201D)\n            \u7A0B\u5E8F\n            ;;\n    *)\n            \u7A0B\u5E8F\n;;\nesac\n"})}),"\n",(0,l.jsxs)(n.table,{children:[(0,l.jsx)(n.thead,{children:(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.th,{style:{textAlign:"left"},children:"case pattern"}),(0,l.jsx)(n.th,{style:{textAlign:"left"},children:"function"})]})}),(0,l.jsxs)(n.tbody,{children:[(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{style:{textAlign:"left"},children:(0,l.jsx)(n.code,{children:"a)"})}),(0,l.jsx)(n.td,{style:{textAlign:"left"},children:'word equals "a"'})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{style:{textAlign:"left"},children:(0,l.jsx)(n.code,{children:"[[:alpha:]])"})}),(0,l.jsx)(n.td,{style:{textAlign:"left"},children:"word is a single alphabetic character"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{style:{textAlign:"left"},children:(0,l.jsx)(n.code,{children:"???)"})}),(0,l.jsx)(n.td,{style:{textAlign:"left"},children:"word is exactly three characters long"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{style:{textAlign:"left"},children:(0,l.jsx)(n.code,{children:"*.txt)"})}),(0,l.jsx)(n.td,{style:{textAlign:"left"},children:"word ends with the characters \u201C.txt\u201D"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{style:{textAlign:"left"},children:(0,l.jsx)(n.code,{children:"*)"})}),(0,l.jsx)(n.td,{style:{textAlign:"left"},children:"any value of word"})]})]})]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:'#!/bin/bash\n# case-menu: a menu driven system information program\nclear\necho "\nPlease Select:\n1. Display System Information\n2. Display Disk Space\n3. Display Home Space Utilization\n0. Quit\n"\nread -p "Enter selection [0-3] > "\ncase $REPLY in\n    0)  echo "Program terminated."\n        exit\n        ;;\n    1)  echo "Hostname: $HOSTNAME"\n        uptime\n        ;;\n    2)  df -h\n        ;;\n    3)  if [[ $(id -u) -eq 0 ]]; then\n            echo "Home Space Utilization (All Users)"\n            du -sh /home/*\n        else\n            echo "Home Space Utilization ($USER)"\n            du -sh $HOME\n        fi\n        ;;\n    *)  echo "Invalid entry" >&2\n        exit 1\n        ;;\nesac\n'})}),"\n",(0,l.jsx)(n.p,{children:"or case pattern"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:'#!/bin/bash\n# case-menu: a menu driven system information program\nclear\necho "\nPlease Select:\nA. Display System Information\nB. Display Disk Space\nC. Display Home Space Utilization\nQ. Quit\n"\nread -p "Enter selection [A, B, C or Q] > "\ncase $REPLY in\nq|Q) echo "Program terminated."\n     exit\n     ;;\na|A) echo "Hostname: $HOSTNAME"\n     uptime\n     ;;\nb|B) df -h\n     ;;\nc|C) if [[ $(id -u) -eq 0 ]]; then\n         echo "Home Space Utilization (All Users)"\n         du -sh /home/*\n     else\n         echo "Home Space Utilization ($USER)"\n         du -sh $HOME\n     fi\n     ;;\n*)   echo "Invalid entry" >&2\n     exit 1\n     ;;\nesac\n'})}),"\n",(0,l.jsxs)(n.p,{children:["fall through case pattern (",(0,l.jsx)(n.code,{children:";;&"}),")"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:'#!/bin/bash\n# case4-2: test a character\nread -n 1 -p "Type a character > "\necho\ncase $REPLY in\n    [[:upper:]])    echo "\'$REPLY\' is upper case." ;;&\n    [[:lower:]])    echo "\'$REPLY\' is lower case." ;;&\n    [[:alpha:]])    echo "\'$REPLY\' is alphabetic." ;;&\n    [[:digit:]])    echo "\'$REPLY\' is a digit." ;;&\n    [[:graph:]])    echo "\'$REPLY\' is a visible character." ;;&\n    [[:punct:]])    echo "\'$REPLY\' is a punctuation symbol." ;;&\n    [[:space:]])    echo "\'$REPLY\' is a whitespace character." ;;&\n    [[:xdigit:]])   echo "\'$REPLY\' is a hexadecimal digit." ;;&\nesac\n'})}),"\n",(0,l.jsx)(n.h3,{id:"for",children:"For"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"for \u53D8\u91CF in \u503C1 \u503C2 \u503C3 \u2026\u2026 \u503Cn\n    do\n        \u7A0B\u5E8F\n    done\n\n$(seq 1 50)  # 1 2 ... 50\n{1..50}     # 1 2 ... 50\n{0..10..2}  # 0 2 4 6 8 10\n\nfor (( \u521D\u59CB\u503C;\u5FAA\u73AF\u63A7\u5236\u6761\u4EF6;\u53D8\u91CF\u53D8\u5316 )); do\n    \u7A0B\u5E8F\ndone\n"})}),"\n",(0,l.jsx)(n.h3,{id:"while-and-until",children:"While and Until"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"while [[ \u6761\u4EF6\u5224\u65AD\u5F0F ]]\n    do\n        \u7A0B\u5E8F\n    done\n\nuntil [[ \u6761\u4EF6\u5224\u65AD\u5F0F ]]\n    do\n        \u7A0B\u5E8F\n    done\n"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"(( expression1 ))\nwhile (( expression2 )); do\n    commands\n    (( expression3 ))\ndone\n"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:'#!/bin/bash\n# while-menu: a menu driven system information program\nDELAY=3 # Number of seconds to display results\nwhile [[ $REPLY != 0 ]]; do\n    clear\n    cat <<- _EOF_\n        Please Select:\n        1. Display System Information\n        2. Display Disk Space\n        3. Display Home Space Utilization\n        0. Quit\n    _EOF_\n    read -p "Enter selection [0-3] > "\n    if [[ $REPLY =~ ^[0-3]$ ]]; then\n        if [[ $REPLY == 1 ]]; then\n            echo "Hostname: $HOSTNAME"\n            uptime\n            sleep $DELAY\n        fi\n        if [[ $REPLY == 2 ]]; then\n            df -h\n            sleep $DELAY\n        fi\n        if [[ $REPLY == 3 ]]; then\n            if [[ $(id -u) -eq 0 ]]; then\n                echo "Home Space Utilization (All Users)"\n                du -sh /home/*\n            else\n                echo "Home Space Utilization ($USER)"\n                du -sh $HOME\n            fi\n            sleep $DELAY\n        fi\n    else\n        echo "Invalid entry."\n        sleep $DELAY\n    fi\ndone\necho "Program terminated."\n'})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:'#!/bin/bash\n# while-read: read lines from a file\nwhile read dist version release; do\n    printf "Dist: %s\\tVersion: %s\\tReleased: %s\\n" \\\n        $dist \\\n        $version \\\n        $release\ndone < dist.txt\n'})}),"\n",(0,l.jsx)(n.h3,{id:"do-while",children:"Do While"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"while : ; do\n    actions\n    [[ current_time <= $cutoff ]] || break\ndone\n"})}),"\n",(0,l.jsx)(n.h2,{id:"array",children:"Array"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.a,{href:"http://billie66.github.io/TLCL/book/chap36.html",children:"Array Reference"})}),"\n"]}),"\n",(0,l.jsx)(n.h2,{id:"function",children:"Function"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["\u51FD\u6570\u5C40\u90E8\u53D8\u91CF ",(0,l.jsx)(n.code,{children:"local \u53D8\u91CF\u540D"}),"."]}),"\n",(0,l.jsxs)(n.li,{children:["\u51FD\u6570\u53C2\u6570 : ",(0,l.jsx)(n.code,{children:"$"}),"/",(0,l.jsx)(n.code,{children:"+"}),"/",(0,l.jsx)(n.code,{children:"#"}),"/",(0,l.jsx)(n.code,{children:"?"}),"/",(0,l.jsx)(n.code,{children:"@"}),"/",(0,l.jsx)(n.code,{children:"n"}),"."]}),"\n",(0,l.jsxs)(n.li,{children:["\u5F15\u7528\u51FD\u6570\u5E93\u6587\u4EF6: ",(0,l.jsx)(n.code,{children:"source sh \u6587\u4EF6\u540D"}),"/",(0,l.jsx)(n.code,{children:". sh \u6587\u4EF6\u540D"}),", \u53EF\u4FEE\u6539 ",(0,l.jsx)(n.code,{children:"~/.bashrc"})," \u6587\u4EF6."]}),"\n"]}),"\n",(0,l.jsx)(n.h2,{id:"io",children:"I/O"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:'#!/bin/bash\n# read-validate: validate input\ninvalid_input () {\n    echo "Invalid input \'$REPLY\'" >&2\n    exit 1\n}\nread -p "Enter a single item > "\n# input is empty (invalid)\n[[ -z $REPLY ]] && invalid_input\n# input is multiple items (invalid)\n(( $(echo $REPLY | wc -w) > 1 )) && invalid_input\n# is input a valid filename?\nif [[ $REPLY =~ ^[-[:alnum:]\\._]+$ ]]; then\n    echo "\'$REPLY\' is a valid filename."\n    if [[ -e $REPLY ]]; then\n        echo "And file \'$REPLY\' exists."\n    else\n        echo "However, file \'$REPLY\' does not exist."\n    fi\n    # is input a floating point number?\n    if [[ $REPLY =~ ^-?[[:digit:]]*\\.[[:digit:]]+$ ]]; then\n        echo "\'$REPLY\' is a floating point number."\n    else\n        echo "\'$REPLY\' is not a floating point number."\n    fi\n    # is input an integer?\n    if [[ $REPLY =~ ^-?[[:digit:]]+$ ]]; then\n        echo "\'$REPLY\' is an integer."\n    else\n        echo "\'$REPLY\' is not an integer."\n    fi\nelse\n    echo "The string \'$REPLY\' is not a valid filename."\nfi\n'})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:'#!/bin/bash\n# read-menu: a menu driven system information program\nclear\necho "\nPlease Select:\n\n    1. Display System Information\n    2. Display Disk Space\n    3. Display Home Space Utilization\n    0. Quit\n"\nread -p "Enter selection [0-3] > "\n\nif [[ $REPLY =~ ^[0-3]$ ]]; then\n    if [[ $REPLY == 0 ]]; then\n        echo "Program terminated."\n        exit\n    fi\n    if [[ $REPLY == 1 ]]; then\n        echo "Hostname: $HOSTNAME"\n        uptime\n        exit\n    fi\n    if [[ $REPLY == 2 ]]; then\n        df -h\n        exit\n    fi\n    if [[ $REPLY == 3 ]]; then\n        if [[ $(id -u) -eq 0 ]]; then\n            echo "Home Space Utilization (All Users)"\n            du -sh /home/*\n        else\n            echo "Home Space Utilization ($USER)"\n            du -sh $HOME\n        fi\n        exit\n    fi\nelse\n    echo "Invalid entry." >&2\n    exit 1\nfi\n'})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:'# interactive mode\nif [[ -n $interactive ]]; then\n    while true; do\n        read -p "Enter name of output file: " filename\n        if [[ -e $filename ]]; then\n            read -p "\'$filename\' exists. Overwrite? [y/n/q] > "\n            case $REPLY in\n            Y|y)    break\n                    ;;\n            Q|q)    echo "Program terminated."\n                    exit\n                    ;;\n            *)      continue\n                    ;;\n            esac\n        elif [[ -z $filename ]]; then\n            continue\n        else\n            break\n        fi\n    done\nfi\n'})}),"\n",(0,l.jsx)(n.h2,{id:"signal",children:"Signal"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"man 7 signal"}),": \u4F20\u9012\u4FE1\u53F7\u7ED9\u8FDB\u7A0B."]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"CTRL + C"}),": SIGINT."]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"CTRL + Z"}),": SIGSTP."]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"kill/killall"}),": SIGINT."]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"trap SIG*"}),"/",(0,l.jsx)(n.code,{children:"trap EXIT"}),": \u6355\u6349\u4FE1\u53F7(\u540E + \u5FFD\u7565\u4FE1\u53F7/\u9ED8\u8BA4\u5904\u7406\u4FE1\u53F7/\u81EA\u5B9A\u4E49\u5904\u7406\u4FE1\u53F7)."]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"trap \u2013 SIG*"}),"/",(0,l.jsx)(n.code,{children:"trap - EXIT"}),": \u79FB\u9664\u4FE1\u53F7."]}),"\n"]}),"\n",(0,l.jsx)(n.h2,{id:"debugging",children:"Debugging"}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.code,{children:"-x"})," option:"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:'#!/bin/bash -x\n# trouble: script to demonstrate common errors\nnumber=1\nif [ $number = 1 ]; then\n    echo "Number is equal to 1."\nelse\n    echo "Number is not equal to 1."\nfi\n'})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:'#!/bin/bash\n# trouble: script to demonstrate common errors\nnumber=1\necho "number=$number" # DEBUG\nset -x # Turn on tracing\nif [ $number = 1 ]; then\n    echo "Number is equal to 1."\nelse\n    echo "Number is not equal to 1."\nfi\nset +x # Turn off tracing\n'})}),"\n",(0,l.jsx)(n.h2,{id:"interaction",children:"Interaction"}),"\n",(0,l.jsx)(n.h3,{id:"root-validation",children:"Root Validation"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:'if (( $EUID != 0 )); then\n    echo "Please run as root!"\n    exit\nfi\n'})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"# run as root directly\nsudo chown root <filename>\nsudo chmod +s <filename>\n"})}),"\n",(0,l.jsx)(n.h3,{id:"help-option",children:"Help Option"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:'#!/bin/sh\nif [[ ${#@} -ne 0 ]] && [[ "${@#"--help"}" = "" ]]; then\n  printf -- \'...help...\\n\';\n  exit 0;\nfi;\n'})}),"\n",(0,l.jsx)(n.h3,{id:"silent-option",children:"Silent Option"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:'#!/bin/sh\nif [[ ${#@} -ne 0 ]] && [[ "${@#"--silent"}" = "" ]]; then\n  stty -echo;\nfi;\n# ...\n# before point of intended output:\nstty +echo && printf -- \'intended output\\n\';\n# silence it again till end of script\nstty -echo;\n# ...\nstty +echo;\nexit 0;\n'})}),"\n",(0,l.jsx)(n.h3,{id:"command-validation",children:"Command Validation"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"#!/bin/sh\n_=$(command -v docker);\nif [[ \"$?\" != \"0\" ]]; then\n  printf -- 'You don\\'t seem to have Docker installed.\\n';\n  printf -- 'Get it: https://www.docker.com/community-edition\\n';\n  printf -- 'Exiting with code 127...\\n';\n  exit 127;\nfi;\n"})}),"\n",(0,l.jsx)(n.h3,{id:"get-absolute-path",children:"Get Absolute Path"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:'#!/bin/sh\nCUR_DIR="$(dirname $0);"\nprintf -- \'moving application to /opt/app.jar\';\nmv "${CUR_DIR}/application.jar" /opt/app.jar;\n'})}),"\n",(0,l.jsx)(n.h3,{id:"error-handle",children:"Error Handle"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:'#!/bin/sh\nerror_handle() {\n  stty echo;\n}\n\nif [[ ${#@} -ne 0 ]] && [[ "${@#"--silent"}" = "" ]]; then\n  stty -echo;\n  trap error_handle INT;\n  trap error_handle TERM;\n  trap error_handle KILL;\n  trap error_handle EXIT;\nfi;\n# ...\n'})}),"\n",(0,l.jsx)(n.h3,{id:"loading-progress",children:"Loading Progress"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"#!/bin/sh\nprintf -- 'Performing asynchronous action..';\n./trigger-action;\nDONE=0;\nwhile [ $DONE -eq 0 ]; do\n  ./async-checker;\n  if [ \"$?\" = \"0\" ]; then DONE=1; fi;\n  printf -- '.';\n  sleep 1;\ndone;\nprintf -- ' DONE!\\n';\n"})}),"\n",(0,l.jsx)(n.h2,{id:"zsh",children:"Zsh"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:'sudo apt install zsh\nsh -c "$(curl -fsSL https://raw.githubusercontent.com/ohmyzsh/ohmyzsh/master/tools/install.sh)"\n'})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"git clone https://github.com/zsh-users/zsh-autosuggestions ${ZSH_CUSTOM:-~/.oh-my-zsh/custom}/plugins/zsh-autosuggestions\ngit clone https://github.com/zsh-users/zsh-syntax-highlighting.git ${ZSH_CUSTOM:-~/.oh-my-zsh/custom}/plugins/zsh-syntax-highlighting\ngit clone https://github.com/Aloxaf/fzf-tab ${ZSH_CUSTOM:-~/.oh-my-zsh/custom}/plugins/fzf-tab\n\nsed -i '1i # Enable the subsequent settings only in interactive sessions\\ncase $- in\\n  *i*) ;;\\n    *) return;;\\nesac\\n' ~/.zshrc\nsed -i 's/^plugins=(/plugins=(vi-mode last-working-dir zsh-autosuggestions zsh-syntax-highlighting fzf-tab /' ~/.zshrc\necho 'bindkey \"^K\" autosuggest-accept' >> ~/.zshrc\n"})}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.a,{href:"https://github.com/starship/starship",children:"Starship"})," theme:"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"sed -i 's/^ZSH_THEME=.*/ZSH_THEME=\"\"/' ~/.zshrc\necho 'eval \"$(starship init zsh)\"' >> ~/.zshrc\nstarship preset gruvbox-rainbow -o ~/.config/starship.toml\n\nmkdir -p ~/.config/matugen\nmkdir -p ~/.config/matugen/templates\ncat << EOF > ~/.config/matugen/config.toml\n[config]\n\n[templates.starship]\ninput_path = '~/.config/matugen/templates/starship.toml'\noutput_path = '~/.config/starship.toml'\nEOF\ncp -fr ~/.config/starship.toml ~/.config/matugen/templates/starship.toml\nsed -i \\\n  -e 's/^color_fg0.*/color_fg0 = '\"'\"'{{colors.on_primary.default.hex}}'\"'\"'/' \\\n  -e '/^color_fg0.*/a\\color_fg1 = '\"'\"'{{colors.on_surface.default.hex}}'\"'\"'' \\\n  -e 's/^color_bg1.*/color_bg1 = '\"'\"'{{colors.secondary_container.default.hex}}'\"'\"'/' \\\n  -e 's/^color_bg3.*/color_bg3 = '\"'\"'{{colors.secondary.default.hex}}'\"'\"'/' \\\n  -e 's/^color_blue.*/color_blue = '\"'\"'{{colors.inverse_primary.default.hex}}'\"'\"'/' \\\n  -e 's/^color_aqua.*/color_aqua = '\"'\"'{{colors.on_secondary_container.default.hex}}'\"'\"'/' \\\n  -e 's/^color_orange.*/color_orange = '\"'\"'{{colors.primary_fixed_dim.default.hex}}'\"'\"'/' \\\n  -e 's/^color_yellow.*/color_yellow = '\"'\"'{{colors.tertiary.default.hex}}'\"'\"'/' \\\n  -e 's/fg:color_fg0 bg:color_blue/fg:color_fg1 bg:color_blue/g' \\\n  -e 's/fg:color_fg0 bg:color_bg1/fg:color_fg1 bg:color_bg1/g' ~/.config/matugen/templates/starship.toml\n\nsource ~/.zshrc\n"})}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.a,{href:"https://github.com/romkatv/powerlevel10k",children:"Powerlevel10k"})," theme:"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:'git clone --depth=1 https://github.com/romkatv/powerlevel10k.git "${ZSH_CUSTOM:-$HOME/.oh-my-zsh/custom}/themes/powerlevel10k"\nsed -i \'s/^ZSH_THEME=.*/ZSH_THEME="powerlevel10k\\/powerlevel10k"/\' ~/.zshrc\n'})}),"\n",(0,l.jsxs)(n.p,{children:["Install zsh on ",(0,l.jsx)(n.a,{href:"https://gist.github.com/fworks/af4c896c9de47d827d4caa6fd7154b6b",children:"Windows"}),":"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:'# Download zsh and extract into "C:\\Program Files\\Git":\ncurl -O https://mirror.msys2.org/msys/x86_64/zsh-5.9-3-x86_64.pkg.tar.zst\n\n# Open git bash and configure zsh:\nzsh\n\n# Install oh-my-zsh:\ngit clone https://github.com/ohmyzsh/ohmyzsh\nbash ohmyzsh/tools/install.sh\n\n# Edit ~/.bashrc:\n# Launch Zsh\nif [ -t 1 ]; then\nexec zsh\nfi\n'})}),"\n",(0,l.jsx)(n.h2,{id:"best-practices",children:"Best Practices"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.a,{href:"https://google.github.io/styleguide/shellguide.html",children:"Google Shell Style Guide"})}),"\n",(0,l.jsxs)(n.li,{children:["\u6307\u5B9A\u9ED8\u8BA4\u89E3\u91CA\u5668",(0,l.jsx)(n.code,{children:"cat /etc/shells"})]}),"\n",(0,l.jsxs)(n.li,{children:["\u8BBE\u7F6E",(0,l.jsx)(n.code,{children:"bash strict mode"})]}),"\n",(0,l.jsxs)(n.li,{children:["\u6761\u4EF6\u5224\u65AD\u4F7F\u7528",(0,l.jsx)(n.code,{children:"[[ ]]"})]}),"\n",(0,l.jsxs)(n.li,{children:["\u4F7F\u7528\u53D8\u91CF\u65F6\u7528\u53CC\u5F15\u53F7\u628A\u53D8\u91CF\u5305\u8D77\u6765 ",(0,l.jsx)(n.code,{children:'cp -r "$src_dir" "$dest_dir"'})]}),"\n",(0,l.jsxs)(n.li,{children:["\u4F7F\u7528",(0,l.jsx)(n.code,{children:"$()"}),"\u83B7\u53D6\u8868\u8FBE\u5F0F\u7684\u503C"]}),"\n",(0,l.jsxs)(n.li,{children:["\u4F7F\u7528",(0,l.jsx)(n.code,{children:"${arr[@]}"}),"\u8FDB\u884C\u5217\u8868\u5FAA\u73AF"]}),"\n"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"#!/usr/bin/env bash\n\n# \u8BBE\u7F6E\u547D\u4EE4\u56DE\u663E\nset -x\n\n# \u9047\u5230\u672A\u58F0\u660E\u7684\u53D8\u91CF\u5219\u62A5\u9519\u505C\u6B62\nset -u\n# \u9047\u5230\u6267\u884C\u9519\u8BEF\u5219\u505C\u6B62\nset -e\n# \u7BA1\u9053\u547D\u4EE4\u5176\u4E2D\u4E00\u6B65\u5931\u8D25\u5219\u4E2D\u6B62\nset -o pipefail\n"})})]})}function o(e={}){let{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,l.jsx)(n,{...e,children:(0,l.jsx)(h,{...e})}):h(e)}},30416(e,n,i){i.d(n,{R:()=>r,x:()=>c});var s=i(59471);let l={},t=s.createContext(l);function r(e){let n=s.useContext(t);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(l):e.components||l:r(e.components),s.createElement(t.Provider,{value:n},e.children)}}}]);