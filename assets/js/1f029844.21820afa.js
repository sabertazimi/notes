"use strict";(self.webpackChunknotes=self.webpackChunknotes||[]).push([["17232"],{27429(e,n,s){s.r(n),s.d(n,{metadata:()=>i,default:()=>a,frontMatter:()=>l,contentTitle:()=>d,toc:()=>o,assets:()=>c});var i=JSON.parse('{"id":"web/network/http","title":"HTTP","description":"Application layer protocol defines:","source":"@site/content/web/network/http.md","sourceDirName":"web/network","slug":"/web/network/http","permalink":"/notes/web/network/http","draft":false,"unlisted":false,"editUrl":"https://github.com/sabertazimi/notes/edit/main/content/web/network/http.md","tags":[{"inline":true,"label":"Web","permalink":"/notes/tags/web"},{"inline":true,"label":"Network","permalink":"/notes/tags/network"},{"inline":true,"label":"HTTP","permalink":"/notes/tags/http"}],"version":"current","lastUpdatedBy":"Sabertaz","lastUpdatedAt":1769518084000,"sidebarPosition":2,"frontMatter":{"sidebar_position":2,"tags":["Web","Network","HTTP"]},"sidebar":"tutorialSidebar","previous":{"title":"Internet","permalink":"/notes/web/network/internet"},"next":{"title":"HTTP 2","permalink":"/notes/web/network/http-2"}}'),t=s(62615),r=s(30416);let l={sidebar_position:2,tags:["Web","Network","HTTP"]},d="HTTP",c={},o=[{value:"Protocol",id:"protocol",level:2},{value:"Connections",id:"connections",level:2},{value:"Message Format",id:"message-format",level:2},{value:"Process",id:"process",level:2},{value:"Port to Transport Layer",id:"port-to-transport-layer",level:3},{value:"Address",id:"address",level:3},{value:"Status Codes",id:"status-codes",level:2},{value:"Performance",id:"performance",level:2}];function h(e){let n={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",img:"img",li:"li",mermaid:"mermaid",p:"p",pre:"pre",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,r.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.header,{children:(0,t.jsx)(n.h1,{id:"http",children:"HTTP"})}),"\n",(0,t.jsx)(n.p,{children:"Application layer protocol defines:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Types of messages exchanged."}),"\n",(0,t.jsx)(n.li,{children:"Syntax of various message types(fields definition)."}),"\n",(0,t.jsx)(n.li,{children:"Semantics of fields."}),"\n",(0,t.jsx)(n.li,{children:"Rules for when/how to send/respond to messages."}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"protocol",children:"Protocol"}),"\n",(0,t.jsx)(n.p,{children:"Hypertext Transfer Protocol (RFC 2068):"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"HTTP -> Socket Interface -> TCP."}),"\n",(0,t.jsx)(n.li,{children:"Stateless protocol."}),"\n",(0,t.jsxs)(n.li,{children:["HTTP/1.0 \u9ED8\u8BA4\u4E0D\u5F00\u542F\u957F\u8FDE\u63A5: \u5BA2\u6237\u7AEF\u4E0E\u670D\u52A1\u7AEF\u5FC5\u987B\u540C\u65F6\u53D1\u9001 ",(0,t.jsx)(n.code,{children:"Connection: Keep-Alive"}),"."]}),"\n",(0,t.jsxs)(n.li,{children:["HTTP/1.1 \u9ED8\u8BA4\u5F00\u542F\u957F\u8FDE\u63A5:","\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"Keep-Alive: timeout=5, max=100"}),":\n\u8868\u793A TCP \u901A\u9053\u4FDD\u6301 5 \u79D2, \u6700\u591A\u63A5\u6536 100 \u6B21\u8BF7\u6C42."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"Keep-Alive"})," \u65E0\u6CD5\u4FDD\u8BC1\u5BA2\u6237\u7AEF\u548C\u670D\u52A1\u5668\u4E4B\u95F4\u7684\u8FDE\u63A5\u4E00\u5B9A\u6D3B\u8DC3."]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(n.li,{children:"HTTP \u4E3A\u65E0\u72B6\u6001\u534F\u8BAE: \u6BCF\u4E2A\u8BF7\u6C42\u76F8\u4E92\u72EC\u7ACB."}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"connections",children:"Connections"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Non-persistent connections: 1 http request with 1 tcp connection."}),"\n",(0,t.jsx)(n.li,{children:"Persistent connections: multiple http request with 1 tcp connection."}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"message-format",children:"Message Format"}),"\n",(0,t.jsx)(n.p,{children:"HTTP request format:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"request line -> (method field, object url field, protocol version)\nheader lines -> Host/Connections(close -> non-persistent connection)/User-agent/Accept-language\n\\r\\n\nentity body\n"})}),"\n",(0,t.jsx)(n.p,{children:"HTTP response format:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"status line -> (protocol version, status code, corresponding status message)\nheader lines -> Connections/Date/Server/Last-Modified/Content-Length(bytes)/Content-Type\n\\r\\n\nentity body\n"})}),"\n",(0,t.jsx)(n.admonition,{title:"Headers",type:"tip",children:(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.a,{href:"https://github.com/hyfather/httpcolon",children:"HTTP;Colon"}),"\nhelp to learn and master HTTP headers."]})}),"\n",(0,t.jsx)(n.h2,{id:"process",children:"Process"}),"\n",(0,t.jsx)(n.h3,{id:"port-to-transport-layer",children:"Port to Transport Layer"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Bandwidth-sensitive application: UDP."}),"\n",(0,t.jsx)(n.li,{children:"Reliable-sensitive application: TCP."}),"\n"]}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"Application"}),(0,t.jsx)(n.th,{children:"Application Layer"}),(0,t.jsx)(n.th,{children:"Transport Layer"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"Email"}),(0,t.jsx)(n.td,{children:"SMTP"}),(0,t.jsx)(n.td,{children:"TCP"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"Remote terminal access"}),(0,t.jsx)(n.td,{children:"Telnet"}),(0,t.jsx)(n.td,{children:"TCP"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"Web"}),(0,t.jsx)(n.td,{children:"HTTP/HTTPS"}),(0,t.jsx)(n.td,{children:"TCP"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"File transfer"}),(0,t.jsx)(n.td,{children:"FTP"}),(0,t.jsx)(n.td,{children:"TCP"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"Streaming multimedia"}),(0,t.jsx)(n.td,{children:"HTTP/HTTPS/RTP"}),(0,t.jsx)(n.td,{children:"TCP/UDP"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"Internet telephony"}),(0,t.jsx)(n.td,{children:"SIP/RTP"}),(0,t.jsx)(n.td,{children:"UDP"})]})]})]}),"\n",(0,t.jsx)(n.h3,{id:"address",children:"Address"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"IP (32 bits network layer): find specific host/end-system."}),"\n",(0,t.jsx)(n.li,{children:"Port (16 bits transport layer): find specific process."}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"status-codes",children:"Status Codes"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.a,{href:"https://developer.mozilla.org/docs/Web/HTTP/Status",children:"RFC 2616"}),"\ndefines the following\n",(0,t.jsx)(n.a,{href:"https://evertpot.com/http",children:"status codes"}),":"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Informational responses: 100\u2013199."}),"\n",(0,t.jsxs)(n.li,{children:["Successful responses: 200\u2013299.","\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"200 OK."}),"\n",(0,t.jsx)(n.li,{children:"201 Created."}),"\n",(0,t.jsx)(n.li,{children:"202 Accepted."}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["Redirects: 300\u2013399.","\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"301 Moved Permanently."}),"\n",(0,t.jsx)(n.li,{children:"302 Found."}),"\n",(0,t.jsx)(n.li,{children:"304 Not Modified."}),"\n",(0,t.jsx)(n.li,{children:"307 Temporary Redirect."}),"\n",(0,t.jsx)(n.li,{children:"308 Permanent Redirect."}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["Client errors: 400\u2013499.","\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"400 Bad Request."}),"\n",(0,t.jsx)(n.li,{children:"401 Unauthorized."}),"\n",(0,t.jsx)(n.li,{children:"403 Forbidden."}),"\n",(0,t.jsx)(n.li,{children:"404 Not Found."}),"\n",(0,t.jsx)(n.li,{children:"405 Method Not Allowed."}),"\n",(0,t.jsx)(n.li,{children:"406 Not Acceptable."}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["Server errors: 500\u2013599.","\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"500 Internal Server Error."}),"\n",(0,t.jsx)(n.li,{children:"501 Not Implemented."}),"\n",(0,t.jsx)(n.li,{children:"502 Bad Gateway."}),"\n",(0,t.jsx)(n.li,{children:"503 Service Unavailable."}),"\n",(0,t.jsx)(n.li,{children:"504 Gateway Timeout."}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:"Use reasonable HTTP status codes:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"200: general success."}),"\n",(0,t.jsx)(n.li,{children:"201: successful creation."}),"\n",(0,t.jsx)(n.li,{children:"301: moved permanently (SEO friendly)."}),"\n",(0,t.jsx)(n.li,{children:"302: moved temporarily."}),"\n",(0,t.jsx)(n.li,{children:"304: not modified (HTTP cache)."}),"\n",(0,t.jsx)(n.li,{children:"400: bad requests from client."}),"\n",(0,t.jsx)(n.li,{children:"401: unauthorized requests."}),"\n",(0,t.jsx)(n.li,{children:"403: missing permissions."}),"\n",(0,t.jsx)(n.li,{children:"404: missing resources."}),"\n",(0,t.jsx)(n.li,{children:"429: too many requests."}),"\n",(0,t.jsx)(n.li,{children:"5xx: internal errors (these should be avoided at all costs)."}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{alt:"HTTP Redirect",src:s(97295).A+"",title:"HTTP Redirect",width:"943",height:"999"})}),"\n",(0,t.jsxs)(n.admonition,{title:"HTTP 402",type:"tip",children:[(0,t.jsxs)(n.p,{children:["HTTP 402 ",(0,t.jsx)(n.code,{children:"Payment Required"}),"\nembeds payments directly into HTTP.\nBased on ",(0,t.jsx)(n.a,{href:"https://github.com/coinbase/x402",children:"x402"}),",\nagent payments protocol (AP2) designed to ",(0,t.jsx)(n.a,{href:"https://www.msuiche.com/posts/when-machines-pay-machines-the-economics-of-agentic-ai",children:"agentic commerce"}),"."]}),(0,t.jsx)(n.mermaid,{value:'graph TD\n  subgraph Agentic Web\n    AI[AI Agent]\n    DP[Data Provider]\n    EU[End User/System]\n\n    AI -- Micropayment --\x3e DP\n    DP -- "API + 402" --\x3e AI\n    AI -- Results --\x3e EU\n  end'})]}),"\n",(0,t.jsx)(n.h2,{id:"performance",children:"Performance"}),"\n",(0,t.jsx)(n.p,{children:"\u9650\u5236 Web \u6027\u80FD\u7684\u4E3B\u8981\u56E0\u7D20\u662F\u5BA2\u6237\u7AEF\u4E0E\u670D\u52A1\u5668\u4E4B\u95F4\u7684\u7F51\u7EDC\u5F80\u8FD4\u5EF6\u8FDF (RTT):"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["\u6301\u4E45\u5316\u8FDE\u63A5\u4EE5\u652F\u6301\u8FDE\u63A5\u91CD\u7528: ",(0,t.jsx)(n.code,{children:"N"})," \u6B21 HTTP \u8BF7\u6C42\u8282\u7701\u7684\u603B\u5EF6\u8FDF\u65F6\u95F4\u4E3A ",(0,t.jsx)(n.code,{children:"(N-1) * RTT"}),"."]}),"\n",(0,t.jsx)(n.li,{children:"\u5206\u5757\u4F20\u8F93\u7F16\u7801\u4EE5\u652F\u6301\u6D41\u5F0F\u54CD\u5E94."}),"\n",(0,t.jsxs)(n.li,{children:["\u8BF7\u6C42\u7BA1\u9053\u4EE5\u652F\u6301\u5E76\u884C\u8BF7\u6C42\u5904\u7406 (\u5C40\u9650\u6027\u8F83\u5927):","\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"FIFO \u7BA1\u9053, \u961F\u5934\u8BF7\u6C42\u4F1A\u963B\u585E\u540E\u7EED\u8BF7\u6C42."}),"\n",(0,t.jsx)(n.li,{children:"\u5E94\u7528\u5FC5\u987B\u5904\u7406\u4E2D\u65AD\u7684\u8FDE\u63A5\u5E76\u6062\u590D."}),"\n",(0,t.jsx)(n.li,{children:"\u5E94\u7528\u5FC5\u987B\u5904\u7406\u4E2D\u65AD\u8BF7\u6C42\u7684\u5E42\u7B49\u95EE\u9898."}),"\n",(0,t.jsx)(n.li,{children:"\u5E94\u7528\u5FC5\u987B\u4FDD\u62A4\u81EA\u8EAB\u4E0D\u53D7\u51FA\u95EE\u9898\u7684\u4EE3\u7406\u7684\u5F71\u54CD."}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(n.li,{children:"\u6A21\u62DF\u591A\u8DEF\u590D\u7528: \u5E76\u884C\u4F7F\u7528\u591A\u4E2A TCP \u8FDE\u63A5 (\u5927\u591A\u6570\u73B0\u4EE3\u6D4F\u89C8\u5668\u652F\u6301\u6BCF\u4E2A\u4E3B\u673A\u6253\u5F00 6 \u4E2A\u8FDE\u63A5)."}),"\n",(0,t.jsx)(n.li,{children:"\u5229\u7528\u591A\u4E2A TCP \u8FDE\u63A5\u8FDB\u884C\u57DF\u540D\u5206\u533A."}),"\n",(0,t.jsx)(n.li,{children:"Resources bundling and inlining (\u4F46\u4E00\u5B9A\u7A0B\u5EA6\u4E0A\u653E\u5F03\u7F13\u5B58\u7C92\u5EA6)."}),"\n",(0,t.jsx)(n.li,{children:"\u6539\u8FDB\u7684\u66F4\u597D\u7684\u7F13\u5B58\u673A\u5236."}),"\n"]})]})}function a(e={}){let{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(h,{...e})}):h(e)}},97295(e,n,s){s.d(n,{A:()=>i});let i=s.p+"assets/images/http-redirect-cfbd567f81667dda5c07dc038777f4aa.png"},30416(e,n,s){s.d(n,{R:()=>l,x:()=>d});var i=s(59471);let t={},r=i.createContext(t);function l(e){let n=i.useContext(r);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function d(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:l(e.components),i.createElement(r.Provider,{value:n},e.children)}}}]);