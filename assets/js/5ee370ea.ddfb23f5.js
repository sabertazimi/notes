"use strict";(self.webpackChunknotes=self.webpackChunknotes||[]).push([["41731"],{20694(e,n,l){l.r(n),l.d(n,{metadata:()=>s,default:()=>h,frontMatter:()=>r,contentTitle:()=>o,toc:()=>d,assets:()=>c});var s=JSON.parse('{"id":"web/javascript/cssom","title":"CSSOM","description":"CSS Object Model","source":"@site/content/web/javascript/cssom.md","sourceDirName":"web/javascript","slug":"/web/javascript/cssom","permalink":"/notes/web/javascript/cssom","draft":false,"unlisted":false,"editUrl":"https://github.com/sabertazimi/notes/edit/main/content/web/javascript/cssom.md","tags":[{"inline":true,"label":"Web","permalink":"/notes/tags/web"},{"inline":true,"label":"JavaScript","permalink":"/notes/tags/java-script"},{"inline":true,"label":"ECMAScript","permalink":"/notes/tags/ecma-script"},{"inline":true,"label":"DOM","permalink":"/notes/tags/dom"},{"inline":true,"label":"CSSOM","permalink":"/notes/tags/cssom"}],"version":"current","lastUpdatedBy":"Sabertaz","lastUpdatedAt":1769518084000,"sidebarPosition":33,"frontMatter":{"sidebar_position":33,"tags":["Web","JavaScript","ECMAScript","DOM","CSSOM"]},"sidebar":"tutorialSidebar","previous":{"title":"DOM","permalink":"/notes/web/javascript/dom"},"next":{"title":"Event","permalink":"/notes/web/javascript/event"}}'),t=l(62615),i=l(30416);let r={sidebar_position:33,tags:["Web","JavaScript","ECMAScript","DOM","CSSOM"]},o="CSSOM",c={},d=[{value:"Getter and Setter",id:"getter-and-setter",level:2},{value:"Inline Styles",id:"inline-styles",level:2},{value:"Computed Styles",id:"computed-styles",level:2},{value:"Class List",id:"class-list",level:2},{value:"Rules",id:"rules",level:2},{value:"Definition",id:"definition",level:3},{value:"Media",id:"media",level:3},{value:"Keyframe",id:"keyframe",level:3},{value:"Manipulation",id:"manipulation",level:3},{value:"Typed Object Model",id:"typed-object-model",level:2}];function a(e){let n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,i.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.header,{children:(0,t.jsx)(n.h1,{id:"cssom",children:"CSSOM"})}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.a,{href:"https://developer.mozilla.org/docs/Web/API/CSS_Object_Model",children:"CSS Object Model"}),"\nis a set of APIs allowing the manipulation of CSS from JavaScript.\nIt is much like the DOM, but for the CSS rather than the HTML.\nIt allows users to read and modify CSS style dynamically."]}),"\n",(0,t.jsx)(n.h2,{id:"getter-and-setter",children:"Getter and Setter"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"cssText"}),": \u4E00\u6B21\u751F\u6548."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"length"}),"."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"getPropertyValue(name)"}),"."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"getPropertyPriority"}),": return ",(0,t.jsx)(n.code,{children:"''"})," or ",(0,t.jsx)(n.code,{children:"important"}),"."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"item(index)"}),"."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"setProperty(name, value, priority)"}),"."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"removeProperty(name)"}),"."]}),"\n"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-ts",children:"const box = document.querySelector('.box')\n\nbox.style.setProperty('color', 'orange')\nbox.style.setProperty('font-family', 'Georgia, serif')\nop.innerHTML = box.style.getPropertyValue('color')\nop2.innerHTML = `${box.style.item(0)}, ${box.style.item(1)}`\n\nbox.style.setProperty('font-size', '1.5em')\nbox.style.item(0) // \"font-size\"\n\ndocument.body.style.removeProperty('font-size')\ndocument.body.style.item(0) // \"\"\n\nmyDiv.style.cssText = 'width: 25px; height: 100px; background-color: green'\n\nfor (let i = 0, len = myDiv.style.length; i < len; i++)\n  console.log(myDiv.style[i]) // \u6216\u8005\u7528 myDiv.style.item(i)\n"})}),"\n",(0,t.jsx)(n.h2,{id:"inline-styles",children:"Inline Styles"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-ts",children:"interface Element {\n  style: CSSStyleDeclaration\n}\n\nconst style = element.style.XX\nconst font = element.style.fontFamily\nconst mt = element.style.marginTopWidth\n"})}),"\n",(0,t.jsx)(n.h2,{id:"computed-styles",children:"Computed Styles"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Shorthand style for full property."}),"\n",(0,t.jsx)(n.li,{children:"Longhand style for specific property."}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"getPropertyValue"})," can get css variables."]}),"\n",(0,t.jsxs)(n.li,{children:["\u5728\u6240\u6709\u6D4F\u89C8\u5668\u4E2D\u8BA1\u7B97\u6837\u5F0F\u90FD\u662F",(0,t.jsx)(n.strong,{children:"\u53EA\u8BFB"}),"\u7684, \u4E0D\u80FD\u4FEE\u6539 ",(0,t.jsx)(n.code,{children:"getComputedStyle()"})," \u65B9\u6CD5\u8FD4\u56DE\u7684\u5BF9\u8C61."]}),"\n"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-ts",children:"const background = window.getComputedStyle(document.body).background\n\n// dot notation, same as above\nconst backgroundColor = window.getComputedStyle(el).backgroundColor\n\n// square bracket notation\nconst backgroundColor = window.getComputedStyle(el)['background-color']\n\n// using getPropertyValue()\n// can get css variables property too\nwindow.getComputedStyle(el).getPropertyValue('background-color')\n"})}),"\n",(0,t.jsx)(n.h2,{id:"class-list",children:"Class List"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-ts",children:"element.classList.add('class')\nelement.classList.remove('class')\nelement.classList.toggle('class')\nelement.classList.contains('class')\n"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-ts",children:"function addClassPolyfill(element, value) {\n  if (!element.className) {\n    element.className = value\n  } else {\n    newClassName = element.className\n    newClassName += ' '\n    newClassName += value\n    element.className = newClassName\n  }\n}\n"})}),"\n",(0,t.jsx)(n.h2,{id:"rules",children:"Rules"}),"\n",(0,t.jsxs)(n.p,{children:["\u4EE5\u4E0B\u662F ",(0,t.jsx)(n.code,{children:"CSSStyleSheet"})," \u4ECE ",(0,t.jsx)(n.code,{children:"StyleSheet"})," \u7EE7\u627F\u7684\u5C5E\u6027:"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"disabled: Boolean, \u8868\u793A\u6837\u5F0F\u8868\u662F\u5426\u88AB\u7981\u7528\u4E86 (\u8BBE\u7F6E\u4E3A true \u4F1A\u7981\u7528\u6837\u5F0F\u8868)."}),"\n",(0,t.jsxs)(n.li,{children:["href: ",(0,t.jsx)(n.code,{children:"<link>"})," URL/null."]}),"\n",(0,t.jsx)(n.li,{children:"media: \u6837\u5F0F\u8868\u652F\u6301\u7684\u5A92\u4F53\u7C7B\u578B\u96C6\u5408."}),"\n",(0,t.jsxs)(n.li,{children:["ownerNode: \u6307\u5411\u62E5\u6709\u5F53\u524D\u6837\u5F0F\u8868\u7684\u8282\u70B9 ",(0,t.jsx)(n.code,{children:"<link>"}),"/",(0,t.jsx)(n.code,{children:"<style>"}),"/null (",(0,t.jsx)(n.code,{children:"@import"}),")."]}),"\n",(0,t.jsx)(n.li,{children:"title: ownerNode \u7684 title \u5C5E\u6027."}),"\n",(0,t.jsxs)(n.li,{children:["parentStyleSheet: ",(0,t.jsx)(n.code,{children:"@import"})," parent."]}),"\n",(0,t.jsxs)(n.li,{children:["type: \u6837\u5F0F\u8868\u7684\u7C7B\u578B (",(0,t.jsx)(n.code,{children:"'text/css'"}),")."]}),"\n",(0,t.jsx)(n.li,{children:"cssRules: \u5F53\u524D\u6837\u5F0F\u8868\u5305\u542B\u7684\u6837\u5F0F\u89C4\u5219\u7684\u96C6\u5408."}),"\n",(0,t.jsxs)(n.li,{children:["ownerRule: \u5982\u679C\u6837\u5F0F\u8868\u662F\u4F7F\u7528 ",(0,t.jsx)(n.code,{children:"@import"})," \u5BFC\u5165\u7684, \u5219\u6307\u5411\u5BFC\u5165\u89C4\u5219."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"deleteRule(index)"}),": \u5728\u6307\u5B9A\u4F4D\u7F6E\u5220\u9664 cssRules \u4E2D\u7684\u89C4\u5219."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"insertRule(rule, index)"}),": \u5728\u6307\u5B9A\u4F4D\u7F6E\u5411 cssRules \u4E2D\u63D2\u5165\u89C4\u5219."]}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"definition",children:"Definition"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.code,{children:"CSSRule"}),":"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["type of ",(0,t.jsx)(n.code,{children:"CSSRule"}),":\nSTYLE_RULE (1), IMPORT_RULE (3), MEDIA_RULE (4), KEYFRAMES_RULE (7)."]}),"\n",(0,t.jsx)(n.li,{children:"cssText: \u8FD4\u56DE\u6574\u6761\u89C4\u5219\u7684\u6587\u672C."}),"\n",(0,t.jsx)(n.li,{children:"selectorText: \u8FD4\u56DE\u89C4\u5219\u7684\u9009\u62E9\u7B26\u6587\u672C."}),"\n",(0,t.jsx)(n.li,{children:"style: \u8FD4\u56DE CSSStyleDeclaration \u5BF9\u8C61, \u53EF\u4EE5\u8BBE\u7F6E\u548C\u83B7\u53D6\u5F53\u524D\u89C4\u5219\u4E2D\u7684\u6837\u5F0F."}),"\n",(0,t.jsxs)(n.li,{children:["parentRule: \u5982\u679C\u8FD9\u6761\u89C4\u5219\u88AB\u5176\u4ED6\u89C4\u5219 (\u5982 ",(0,t.jsx)(n.code,{children:"@media"}),") \u5305\u542B, \u5219\u6307\u5411\u5305\u542B\u89C4\u5219."]}),"\n",(0,t.jsx)(n.li,{children:"parentStyleSheet: \u5305\u542B\u5F53\u524D\u89C4\u5219\u7684\u6837\u5F0F\u8868."}),"\n"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-ts",children:"const myRules = document.styleSheets[0].cssRules\nconst p = document.querySelector('p')\n\nfor (i of myRules) {\n  if (i.type === 1)\n    p.innerHTML += `<code>${i.selectorText}</code><br>`\n\n  if (i.selectorText === 'a:hover')\n    i.selectorText = 'a:hover, a:active'\n\n  const myStyle = i.style\n\n  // Set the bg color on the body\n  myStyle.setProperty('background-color', 'peachPuff')\n\n  // Get the font size of the body\n  myStyle.getPropertyValue('font-size')\n\n  // Get the 5th item in the body's style rule\n  myStyle.item(5)\n\n  // Log the current length of the body style rule (8)\n  console.log(myStyle.length)\n\n  // Remove the line height\n  myStyle.removeProperty('line-height')\n\n  // log the length again (7)\n  console.log(myStyle.length)\n\n  // Check priority of font-family (empty string)\n  myStyle.getPropertyPriority('font-family')\n}\n"})}),"\n",(0,t.jsx)(n.h3,{id:"media",children:"Media"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"conditionText"})," property of media rule."]}),"\n",(0,t.jsxs)(n.li,{children:["Nested ",(0,t.jsx)(n.code,{children:"cssRules"}),"."]}),"\n"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-ts",children:"const myRules = document.styleSheets[0].cssRules\nconst p = document.querySelector('.output')\n\nfor (i of myRules) {\n  if (i.type === 4) {\n    p.innerHTML += `<code>${i.conditionText}</code><br>`\n\n    for (j of i.cssRules)\n      p.innerHTML += `<code>${j.selectorText}</code><br>`\n  }\n}\n"})}),"\n",(0,t.jsx)(n.h3,{id:"keyframe",children:"Keyframe"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"name"})," property of keyframe rule"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"keyText"})," property of keyframe rule."]}),"\n",(0,t.jsxs)(n.li,{children:["Nested ",(0,t.jsx)(n.code,{children:"cssRules"}),"."]}),"\n"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-ts",children:"const myRules = document.styleSheets[0].cssRules\nconst p = document.querySelector('.output')\n\nfor (i of myRules) {\n  if (i.type === 7) {\n    p.innerHTML += `<code>${i.name}</code><br>`\n\n    for (j of i.cssRules)\n      p.innerHTML += `<code>${j.keyText}</code><br>`\n  }\n}\n"})}),"\n",(0,t.jsx)(n.h3,{id:"manipulation",children:"Manipulation"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-ts",children:"const myStylesheet = document.styleSheets[0]\nconsole.log(myStylesheet.cssRules.length) // 8\n\ndocument.styleSheets[0].insertRule(\n  'article { line-height: 1.5; font-size: 1.5em; }',\n  myStylesheet.cssRules.length\n)\nconsole.log(document.styleSheets[0].cssRules.length) // 9\n"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-ts",children:"const myStylesheet = document.styleSheets[0]\nconsole.log(myStylesheet.cssRules.length) // 8\n\nmyStylesheet.deleteRule(3)\nconsole.log(myStylesheet.cssRules.length) // 7\n"})}),"\n",(0,t.jsx)(n.h2,{id:"typed-object-model",children:"Typed Object Model"}),"\n",(0,t.jsxs)(n.p,{children:["CSS typed object model ",(0,t.jsx)(n.a,{href:"https://developer.mozilla.org/docs/Web/API/CSS_Typed_OM_API",children:"API"}),"\nsimplifies CSS property manipulation by exposing CSS values\nas ",(0,t.jsx)(n.strong,{children:"typed JavaScript objects"})," rather than strings."]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.a,{href:"https://developer.mozilla.org/docs/Web/API/StylePropertyMap",children:(0,t.jsx)(n.code,{children:"StylePropertyMap"})}),":"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-ts",children:"const styleMap = document.body.computedStyleMap()\nconst cssValue = styleMap.get('line-height')\nconst { value, unit } = cssValue\n"})}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.a,{href:"https://developer.mozilla.org/docs/Web/API/CSSStyleValue",children:(0,t.jsx)(n.code,{children:"CSSStyleValue"})}),":"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.a,{href:"https://developer.mozilla.org/docs/Web/API/CSSKeywordValue",children:(0,t.jsx)(n.code,{children:"CSSKeywordValue"})}),"."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.a,{href:"https://developer.mozilla.org/docs/Web/API/CSSImageValue",children:(0,t.jsx)(n.code,{children:"CSSImageValue"})}),"."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.a,{href:"https://developer.mozilla.org/docs/Web/API/CSSMathValue",children:(0,t.jsx)(n.code,{children:"CSSMathValue"})}),"."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.a,{href:"https://developer.mozilla.org/docs/Web/API/CSSNumericValue",children:(0,t.jsx)(n.code,{children:"CSSNumericValue"})}),"."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.a,{href:"https://developer.mozilla.org/docs/Web/API/CSSUnitValue",children:(0,t.jsx)(n.code,{children:"CSSUnitValue"})}),"."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.a,{href:"https://developer.mozilla.org/docs/Web/API/CSSTransformValue",children:(0,t.jsx)(n.code,{children:"CSSTransformValue"})}),"."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.a,{href:"https://developer.mozilla.org/docs/Web/API/CSSUnparsedValue",children:(0,t.jsx)(n.code,{children:"CSSUnparsedValue"})}),"."]}),"\n"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-ts",children:"const styleMap = document.querySelector('#myElement').attributeStyleMap\nstyleMap.set('display', new CSSKeywordValue('initial'))\nconsole.log(myElement.get('display').value) // 'initial'\n"})})]})}function h(e={}){let{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(a,{...e})}):a(e)}},30416(e,n,l){l.d(n,{R:()=>r,x:()=>o});var s=l(59471);let t={},i=s.createContext(t);function r(e){let n=s.useContext(i);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:r(e.components),s.createElement(i.Provider,{value:n},e.children)}}}]);