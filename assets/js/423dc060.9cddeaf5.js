"use strict";(self.webpackChunknotes=self.webpackChunknotes||[]).push([["28264"],{82368(n,t,e){e.r(t),e.d(t,{metadata:()=>r,default:()=>m,frontMatter:()=>a,contentTitle:()=>o,toc:()=>c,assets:()=>l});var r=JSON.parse('{"id":"programming/design/patterns/strategy","title":"Strategy","description":"- \u6539\u53D8\u5BF9\u8C61\u7684\u5185\u6838/\u7B97\u6CD5, \u4E00\u4E2A Strategy \u5BF9\u8C61\u5C01\u88C5\u4E00\u4E2A\u7B97\u6CD5, \u76F8\u4E92\u53EF\u4EE5\u66FF\u6362.","source":"@site/content/programming/design/patterns/strategy.md","sourceDirName":"programming/design/patterns","slug":"/programming/design/patterns/strategy","permalink":"/notes/programming/design/patterns/strategy","draft":false,"unlisted":false,"editUrl":"https://github.com/sabertazimi/notes/edit/main/content/programming/design/patterns/strategy.md","tags":[{"inline":true,"label":"Programming","permalink":"/notes/tags/programming"},{"inline":true,"label":"Design","permalink":"/notes/tags/design"},{"inline":true,"label":"Design Pattern","permalink":"/notes/tags/design-pattern"},{"inline":true,"label":"Behavioral Pattern","permalink":"/notes/tags/behavioral-pattern"}],"version":"current","lastUpdatedBy":"Sabertaz","lastUpdatedAt":1769518084000,"sidebarPosition":20,"frontMatter":{"sidebar_position":20,"tags":["Programming","Design","Design Pattern","Behavioral Pattern"]},"sidebar":"tutorialSidebar","previous":{"title":"State","permalink":"/notes/programming/design/patterns/state"},"next":{"title":"Template Method","permalink":"/notes/programming/design/patterns/template-method"}}'),i=e(62615),s=e(30416);let a={sidebar_position:20,tags:["Programming","Design","Design Pattern","Behavioral Pattern"]},o="Strategy",l={},c=[];function p(n){let t={admonition:"admonition",code:"code",h1:"h1",header:"header",li:"li",p:"p",pre:"pre",ul:"ul",...(0,s.R)(),...n.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(t.header,{children:(0,i.jsx)(t.h1,{id:"strategy",children:"Strategy"})}),"\n",(0,i.jsxs)(t.ul,{children:["\n",(0,i.jsx)(t.li,{children:"\u6539\u53D8\u5BF9\u8C61\u7684\u5185\u6838/\u7B97\u6CD5, \u4E00\u4E2A Strategy \u5BF9\u8C61\u5C01\u88C5\u4E00\u4E2A\u7B97\u6CD5, \u76F8\u4E92\u53EF\u4EE5\u66FF\u6362."}),"\n",(0,i.jsx)(t.li,{children:"\u5229\u7528\u7EC4\u5408 + \u59D4\u6258 + \u591A\u6001, \u907F\u514D\u590D\u6742\u7684\u5206\u652F\u8BED\u53E5."}),"\n",(0,i.jsxs)(t.li,{children:["\u5C06\u5355\u4E2A\u7B56\u7565\u8FDB\u884C\u62BD\u8C61\u5C01\u88C5:","\n",(0,i.jsxs)(t.ul,{children:["\n",(0,i.jsx)(t.li,{children:"\u89E3\u8026."}),"\n",(0,i.jsx)(t.li,{children:"\u590D\u7528."}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(t.li,{children:"JS \u4E2D, \u51FD\u6570\u4F5C\u4E3A\u53C2\u6570\u4E0E\u8FD4\u56DE\u503C\u65F6, \u53EF\u4EE5\u5B9E\u73B0\u9690\u5F0F\u7684\u7B56\u7565\u6A21\u5F0F:\n\u51FD\u6570\u4F5C\u4E3A\u7B2C\u4E00\u516C\u6C11, \u65E0\u9700\u5C06 Strategy \u5C01\u88C5\u6210\u7B56\u7565\u5BF9\u8C61, \u53EF\u4EE5\u76F4\u63A5\u4F20\u9012\u6216\u8FD4\u56DE\u7B56\u7565\u51FD\u6570."}),"\n"]}),"\n",(0,i.jsx)(t.admonition,{title:"Strategy Use Case",type:"tip",children:(0,i.jsxs)(t.ul,{children:["\n",(0,i.jsxs)(t.li,{children:["\u5E03\u5C40\u7BA1\u7406\u5668:","\n",(0,i.jsxs)(t.ul,{children:["\n",(0,i.jsx)(t.li,{children:"\u73AF\u5883\u5BF9\u8C61\uFF1A\u9762\u677F."}),"\n",(0,i.jsx)(t.li,{children:"\u62BD\u8C61\u7B56\u7565\uFF1A\u62BD\u8C61\u5E03\u5C40\u7BA1\u7406\u63A5\u53E3."}),"\n",(0,i.jsx)(t.li,{children:"\u5177\u4F53\u7B56\u7565\uFF1A\u5177\u4F53\u5E03\u5C40\u7BA1\u7406\u7C7B."}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(t.li,{children:"\u8868\u5355\u9A8C\u8BC1 (Validator)."}),"\n",(0,i.jsx)(t.li,{children:"\u52A8\u753B\u7B56\u7565."}),"\n",(0,i.jsx)(t.li,{children:"\u5B58\u5728\u5927\u91CF if-else \u573A\u666F."}),"\n",(0,i.jsx)(t.li,{children:"\u91CD\u6784\u4EE3\u7801."}),"\n",(0,i.jsx)(t.li,{children:"Algorithm selection."}),"\n",(0,i.jsx)(t.li,{children:"Testing and mocking."}),"\n"]})}),"\n",(0,i.jsx)(t.p,{children:"Change strategy:"}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-ts",children:"const OutputFormat = Object.freeze({\n  markdown: 0,\n  html: 1,\n})\n\nclass ListStrategy {\n  start(buffer) {}\n  end(buffer) {}\n  addListItem(buffer, item) {}\n}\n\nclass MarkdownListStrategy extends ListStrategy {\n  addListItem(buffer, item) {\n    buffer.push(` * ${item}`)\n  }\n}\n\nclass HtmlListStrategy extends ListStrategy {\n  start(buffer) {\n    buffer.push('<ul>')\n  }\n\n  end(buffer) {\n    buffer.push('</ul>')\n  }\n\n  addListItem(buffer, item) {\n    buffer.push(`  <li>${item}</li>`)\n  }\n}\n\nclass TextProcessor {\n  constructor(outputFormat) {\n    this.buffer = []\n    this.setOutputFormat(outputFormat)\n  }\n\n  setOutputFormat(format) {\n    switch (format) {\n      case OutputFormat.markdown:\n        this.listStrategy = new MarkdownListStrategy()\n        break\n      case OutputFormat.html:\n        this.listStrategy = new HtmlListStrategy()\n        break\n      default:\n        throw new Error('Unsupported output format!')\n    }\n  }\n\n  appendList(items) {\n    this.listStrategy.start(this.buffer)\n    for (const item of items) this.listStrategy.addListItem(this.buffer, item)\n    this.listStrategy.end(this.buffer)\n  }\n\n  clear() {\n    this.buffer = []\n  }\n\n  toString() {\n    return this.buffer.join('\\n')\n  }\n}\n\nconst tp = new TextProcessor()\ntp.setOutputFormat(OutputFormat.markdown)\ntp.appendList(['one', 'two', 'three'])\nconsole.log(tp.toString())\n\ntp.clear()\ntp.setOutputFormat(OutputFormat.html)\ntp.appendList(['one', 'two', 'three'])\nconsole.log(tp.toString())\n"})}),"\n",(0,i.jsxs)(t.p,{children:["Remove ",(0,i.jsx)(t.code,{children:"if-else"})," statements:"]}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-ts",children:"// \u8FDD\u53CD\u5F00\u653E\u5C01\u95ED\u539F\u5219\nfunction activity(type, price) {\n  if (type === 'pre')\n    return price * 0.95\n  else if (type === 'onSale')\n    return price * 0.9\n  else if (type === 'back')\n    return price * 0.85\n  else if (type === 'limit')\n    return price * 0.8\n}\n\n// \u5229\u7528 Strategy \u8FDB\u884C\u91CD\u6784\nconst activity = new Map([\n  ['pre', price => price * 0.95],\n  ['onSale', price => price * 0.9],\n  ['back', price => price * 0.85],\n  ['limit', price => price * 0.8],\n])\n\nconst getActivityPrice = (type, price) => activity.get(type)(price)\n\n// \u65B0\u589E\u65B0\u624B\u6D3B\u52A8\nactivity.set('newcomer', price => price * 0.7)\n"})}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-ts",children:"module.exports = (function () {\n  const manager = {}\n\n  // command to be encapsulated\n  manager.isNull = function (nu) {\n    return toString.apply(nu) === '[object Null]'\n  }\n  manager.isArray = function (arr) {\n    return toString.apply(arr) === '[object Array]'\n  }\n  manager.isString = function (str) {\n    return toString.apply(str) === '[object String]'\n  }\n\n  // public api\n  function execute(command, ...args) {\n    return manager[command] && manager[command](...args)\n  }\n\n  function run(command) {\n    return manager[command] && manager[command]()\n  }\n\n  return {\n    execute,\n    run,\n  }\n})()\n"})}),"\n",(0,i.jsx)(t.p,{children:"Form validator:"}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-ts",children:"const errorMsg = rules[rule](element, limits)\n"})})]})}function m(n={}){let{wrapper:t}={...(0,s.R)(),...n.components};return t?(0,i.jsx)(t,{...n,children:(0,i.jsx)(p,{...n})}):p(n)}},30416(n,t,e){e.d(t,{R:()=>a,x:()=>o});var r=e(59471);let i={},s=r.createContext(i);function a(n){let t=r.useContext(s);return r.useMemo(function(){return"function"==typeof n?n(t):{...t,...n}},[t,n])}function o(n){let t;return t=n.disableParentContext?"function"==typeof n.components?n.components(i):n.components||i:a(n.components),r.createElement(s.Provider,{value:t},n.children)}}}]);