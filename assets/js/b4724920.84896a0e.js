"use strict";(self.webpackChunknotes=self.webpackChunknotes||[]).push([["33794"],{37979(n,e,r){r.r(e),r.d(e,{metadata:()=>t,default:()=>g,frontMatter:()=>a,contentTitle:()=>o,toc:()=>c,assets:()=>l});var t=JSON.parse('{"id":"programming/design/patterns/proxy","title":"Proxy","description":"\u901A\u8FC7\u4E00\u4E2A\u4EE3\u7406\u5BF9\u8C61:","source":"@site/content/programming/design/patterns/proxy.md","sourceDirName":"programming/design/patterns","slug":"/programming/design/patterns/proxy","permalink":"/notes/programming/design/patterns/proxy","draft":false,"unlisted":false,"editUrl":"https://github.com/sabertazimi/notes/edit/main/content/programming/design/patterns/proxy.md","tags":[{"inline":true,"label":"Programming","permalink":"/notes/tags/programming"},{"inline":true,"label":"Design","permalink":"/notes/tags/design"},{"inline":true,"label":"Design Pattern","permalink":"/notes/tags/design-pattern"},{"inline":true,"label":"Structural Pattern","permalink":"/notes/tags/structural-pattern"}],"version":"current","lastUpdatedBy":"Sabertaz","lastUpdatedAt":1769518084000,"sidebarPosition":12,"frontMatter":{"sidebar_position":12,"tags":["Programming","Design","Design Pattern","Structural Pattern"]},"sidebar":"tutorialSidebar","previous":{"title":"Flyweight","permalink":"/notes/programming/design/patterns/flyweight"},"next":{"title":"Chain of Responsibility","permalink":"/notes/programming/design/patterns/chain-of-responsibility"}}'),s=r(62615),i=r(30416);let a={sidebar_position:12,tags:["Programming","Design","Design Pattern","Structural Pattern"]},o="Proxy",l={},c=[];function d(n){let e={admonition:"admonition",code:"code",h1:"h1",header:"header",li:"li",p:"p",pre:"pre",ul:"ul",...(0,i.R)(),...n.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(e.header,{children:(0,s.jsx)(e.h1,{id:"proxy",children:"Proxy"})}),"\n",(0,s.jsx)(e.p,{children:"\u901A\u8FC7\u4E00\u4E2A\u4EE3\u7406\u5BF9\u8C61:"}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"\u4E34\u65F6\u5B58\u50A8\u539F\u5BF9\u8C61\u65B9\u6CD5\u8C03\u7528\u4EA7\u751F\u7684\u4E00\u7CFB\u5217\u7ED3\u679C (\u65B0\u5EFA\u5BF9\u8C61),\n\u51CF\u5C11\u91CD\u590D\u5BF9\u8C61\u7684\u4EA7\u751F."}),"\n",(0,s.jsx)(e.li,{children:"\u4EE3\u7406\u5BF9\u8C61\u53EF\u4EE5\u4E3A\u4E2D\u95F4\u8FC7\u7A0B\u900F\u660E\u5730\u589E\u52A0\u989D\u5916\u903B\u8F91: \u9884\u52A0\u8F7D/\u7F13\u5B58/\u5408\u5E76/\u9A8C\u8BC1/\u8F6C\u6362\u7B49."}),"\n",(0,s.jsx)(e.li,{children:"\u6602\u8D35\u7684\u5BF9\u8C61\u521B\u5EFA\u6216\u4EFB\u52A1\u6267\u884C\u53EF\u4EE5\u5EF6\u8FDF\u5230\u4EE3\u7406\u5BF9\u8C61\u4E2D\u6267\u884C."}),"\n",(0,s.jsx)(e.li,{children:"\u4EE3\u7406\u7C7B\u578B: \u8FDC\u7A0B/\u4FDD\u62A4/\u865A\u62DF/\u7F13\u5B58\u4EE3\u7406."}),"\n",(0,s.jsx)(e.li,{children:"\u7B26\u5408\u5F00\u653E\u5C01\u95ED\u539F\u5219."}),"\n"]}),"\n",(0,s.jsx)(e.admonition,{title:"Proxy Use Case",type:"tip",children:(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsxs)(e.li,{children:["\u8FDC\u7A0B\u4EE3\u7406:","\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"\u4EE3\u7406\u8F6F\u4EF6."}),"\n",(0,s.jsx)(e.li,{children:"\u9632\u706B\u5899\u4EE3\u7406."}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:["\u4FDD\u62A4\u4EE3\u7406:","\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"\u8DE8\u57DF\u5904\u7406."}),"\n",(0,s.jsx)(e.li,{children:"\u8DEF\u7531\u4FDD\u62A4\u4EE3\u7406."}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:["\u865A\u62DF\u4EE3\u7406:","\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"\u56FE\u7247\u9884\u52A0\u8F7D."}),"\n",(0,s.jsxs)(e.li,{children:["\u667A\u80FD\u5F15\u7528\u4EE3\u7406: C++ smart pointer, Rust ",(0,s.jsx)(e.code,{children:"RefCell"}),", Linux file descriptor."]}),"\n",(0,s.jsx)(e.li,{children:"\u5199\u65F6\u62F7\u8D1D\u4EE3\u7406: \u5185\u5B58\u9875, DLL."}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:["\u7F13\u5B58\u4EE3\u7406:","\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"\u7F13\u5B58\u51FD\u6570."}),"\n",(0,s.jsx)(e.li,{children:"\u7F13\u5B58\u670D\u52A1\u5668: React Query (cache data)."}),"\n"]}),"\n"]}),"\n"]})}),"\n",(0,s.jsxs)(e.p,{children:["\u4EE3\u7406\u6A21\u5F0F\u5F3A\u8C03\u4E00\u79CD\u5173\u7CFB (Proxy \u4E0E\u5B83\u7684\u5B9E\u4F53\u4E4B\u95F4\u7684\u5173\u7CFB), \u8FD9\u79CD\u5173\u7CFB\u53EF\u4EE5\u9759\u6001\u5730\u8868\u8FBE.\n\u88C5\u9970\u8005\u6A21\u5F0F\u7528\u4E8E\u4E00\u5F00\u59CB\u4E0D\u80FD\u786E\u5B9A\u5BF9\u8C61\u7684\u5168\u90E8\u529F\u80FD.\n\u4EE3\u7406\u6A21\u5F0F\u901A\u5E38\u53EA\u6709\u4E00\u5C42",(0,s.jsx)(e.code,{children:"\u4EE3\u7406-\u672C\u4F53"}),"\u7684\u5F15\u7528,\n\u88C5\u9970\u8005\u6A21\u5F0F\u7ECF\u5E38\u4F1A\u5F62\u6210\u4E00\u6761\u957F\u957F\u7684\u88C5\u9970\u94FE."]}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-ts",children:"class Percentage {\n  constructor(percent) {\n    this.percent = percent\n  }\n\n  toString() {\n    return `${this.percent}&`\n  }\n\n  valueOf() {\n    return this.percent / 100\n  }\n}\n\nconst fivePercent = new Percentage(5)\nconsole.log(fivePercent.toString())\nconsole.log(`5% of 50 is ${50 * fivePercent}`)\n"})}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-ts",children:"function GeoCoder() {\n  this.getLatLng = function (address) {\n    if (address === 'Amsterdam')\n      return '52.3700\xb0 N, 4.8900\xb0 E'\n    else if (address === 'London')\n      return '51.5171\xb0 N, 0.1062\xb0 W'\n    else if (address === 'Paris')\n      return '48.8742\xb0 N, 2.3470\xb0 E'\n    else if (address === 'Berlin')\n      return '52.5233\xb0 N, 13.4127\xb0 E'\n    else return ''\n  }\n}\n\nfunction GeoProxy() {\n  const geocoder = new GeoCoder()\n  const geocache = {}\n\n  return {\n    getLatLng(address) {\n      if (!geocache[address])\n        geocache[address] = geocoder.getLatLng(address)\n\n      log.add(`${address}: ${geocache[address]}`)\n      return geocache[address]\n    },\n    getCount() {\n      let count = 0\n\n      for (const code in geocache) count++\n\n      return count\n    },\n  }\n}\n"})}),"\n",(0,s.jsxs)(e.p,{children:["Proxy in ",(0,s.jsx)(e.code,{children:"Vue"}),":"]}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-ts",children:"const original = { name: 'jeff' }\n\nconst reactive = new Proxy(original, {\n  get(target, key) {\n    console.log('Tracking: ', key)\n    return target[key]\n  },\n  set(target, key, value) {\n    console.log('updating UI...')\n    return Reflect.set(target, key, value)\n  },\n})\n\nconsole.log(reactive.name) // 'Tracking: name'\nreactive.name = 'bob' // 'updating UI...'\n"})})]})}function g(n={}){let{wrapper:e}={...(0,i.R)(),...n.components};return e?(0,s.jsx)(e,{...n,children:(0,s.jsx)(d,{...n})}):d(n)}},30416(n,e,r){r.d(e,{R:()=>a,x:()=>o});var t=r(59471);let s={},i=t.createContext(s);function a(n){let e=t.useContext(i);return t.useMemo(function(){return"function"==typeof n?n(e):{...e,...n}},[e,n])}function o(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(s):n.components||s:a(n.components),t.createElement(i.Provider,{value:e},n.children)}}}]);