"use strict";(self.webpackChunknotes=self.webpackChunknotes||[]).push([["46968"],{23139(e,n,t){t.r(n),t.d(n,{metadata:()=>s,default:()=>h,frontMatter:()=>l,contentTitle:()=>o,toc:()=>a,assets:()=>c});var s=JSON.parse('{"id":"web/javascript/utility","title":"Utility","description":"Strict Mode","source":"@site/content/web/javascript/utility.md","sourceDirName":"web/javascript","slug":"/web/javascript/utility","permalink":"/notes/web/javascript/utility","draft":false,"unlisted":false,"editUrl":"https://github.com/sabertazimi/notes/edit/main/content/web/javascript/utility.md","tags":[{"inline":true,"label":"Web","permalink":"/notes/tags/web"},{"inline":true,"label":"JavaScript","permalink":"/notes/tags/java-script"},{"inline":true,"label":"ECMAScript","permalink":"/notes/tags/ecma-script"}],"version":"current","lastUpdatedBy":"Sabertaz","lastUpdatedAt":1769518084000,"sidebarPosition":27,"frontMatter":{"sidebar_position":27,"tags":["Web","JavaScript","ECMAScript"]},"sidebar":"tutorialSidebar","previous":{"title":"Regular Expression","permalink":"/notes/web/javascript/regexp"},"next":{"title":"Functional JavaScript","permalink":"/notes/web/javascript/functional"}}'),r=t(62615),i=t(30416);let l={sidebar_position:27,tags:["Web","JavaScript","ECMAScript"]},o="Utility",c={},a=[{value:"Strict Mode",id:"strict-mode",level:2},{value:"Timer",id:"timer",level:2},{value:"Math",id:"math",level:2},{value:"Atomics",id:"atomics",level:2},{value:"Signals",id:"signals",level:2},{value:"URI and URL",id:"uri-and-url",level:2},{value:"Encoding and Decoding",id:"encoding-and-decoding",level:2},{value:"Web Stream",id:"web-stream",level:2},{value:"Internationalization",id:"internationalization",level:2},{value:"Number",id:"number",level:3},{value:"String",id:"string",level:3},{value:"Time",id:"time",level:3}];function d(e){let n={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",mdxAdmonitionTitle:"mdxAdmonitionTitle",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,i.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"utility",children:"Utility"})}),"\n",(0,r.jsx)(n.h2,{id:"strict-mode",children:"Strict Mode"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.a,{href:"https://developer.mozilla.org/docs/Web/JavaScript/Reference/Strict_mode",children:"Strict Mode"}),":"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"this"})," is ",(0,r.jsx)(n.code,{children:"null"})," in non-method functions."]}),"\n",(0,r.jsxs)(n.li,{children:["Variables must be declared (",(0,r.jsx)(n.code,{children:"Reference Error"}),")."]}),"\n",(0,r.jsxs)(n.li,{children:["Functions must be declared at the top level of a scope (",(0,r.jsx)(n.code,{children:"Syntax Error"}),")."]}),"\n",(0,r.jsxs)(n.li,{children:["Forbidden unqualified identifiers deletion (",(0,r.jsx)(n.code,{children:"Type Error"}),")."]}),"\n",(0,r.jsxs)(n.li,{children:["Forbidden setting and deleting immutable properties (",(0,r.jsx)(n.code,{children:"Type Error"}),")."]}),"\n",(0,r.jsxs)(n.li,{children:["Forbidden access ",(0,r.jsx)(n.code,{children:"arguments.callee"}),"/",(0,r.jsx)(n.code,{children:"arguments.caller"})," (",(0,r.jsx)(n.code,{children:"Type Error"}),")."]}),"\n",(0,r.jsxs)(n.li,{children:["Forbidden variables escaped from ",(0,r.jsx)(n.code,{children:"eval()"})," (",(0,r.jsx)(n.code,{children:"Reference Error"}),")."]}),"\n",(0,r.jsxs)(n.li,{children:["Forbidden set ",(0,r.jsx)(n.code,{children:"eval"}),"/",(0,r.jsx)(n.code,{children:"arguments"})," to variable identifiers (",(0,r.jsx)(n.code,{children:"Syntax Error"}),")."]}),"\n",(0,r.jsxs)(n.li,{children:["Forbidden ",(0,r.jsx)(n.code,{children:"with"})," statement (",(0,r.jsx)(n.code,{children:"Syntax Error"}),")."]}),"\n",(0,r.jsxs)(n.li,{children:["Forbidden octal numbers (",(0,r.jsx)(n.code,{children:"Syntax Error"}),")."]}),"\n",(0,r.jsx)(n.li,{children:"ES6 classes are automatically in strict mode."}),"\n",(0,r.jsx)(n.li,{children:"ES6 modules are automatically in strict mode."}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"timer",children:"Timer"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"setTimeout."}),"\n",(0,r.jsx)(n.li,{children:"setImmediate."}),"\n",(0,r.jsx)(n.li,{children:"setInterval: \u5B8C\u5168\u65E0\u6CD5\u4FDD\u8BC1\u4E24\u4E2A timer \u6267\u884C\u65F6\u95F4\u95F4\u9694 (\u53EF\u80FD\u8FDE\u7EED\u6267\u884C, \u4E5F\u53EF\u80FD\u95F4\u9694\u8FC7\u957F)."}),"\n",(0,r.jsx)(n.li,{children:"requestAnimationFrame."}),"\n",(0,r.jsx)(n.li,{children:"requestIdleCallback."}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:["Combine ",(0,r.jsx)(n.code,{children:"setInterval"}),"/",(0,r.jsx)(n.code,{children:"setTimeout"})," function with closure function,\nimplement ",(0,r.jsx)(n.strong,{children:"time slicing scheduler"}),"."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:"function processArray(items, process, done) {\n  const todo = items.slice()\n\n  setTimeout(function task() {\n    process(todo.shift())\n\n    if (todo.length > 0)\n      setTimeout(task, 25)\n    else\n      done(items)\n  }, 25)\n}\n"})}),"\n",(0,r.jsxs)(n.admonition,{type:"tip",children:[(0,r.jsxs)(n.mdxAdmonitionTitle,{children:[(0,r.jsx)(n.code,{children:"this"})," Binding in Timer Function"]}),(0,r.jsxs)(n.p,{children:["\u6240\u6709\u8D85\u65F6\u6267\u884C\u7684\u4EE3\u7801 (\u51FD\u6570) \u90FD\u4F1A\u5728\u5168\u5C40\u4F5C\u7528\u57DF\u4E2D\u7684\u4E00\u4E2A\u533F\u540D\u51FD\u6570\u4E2D\u8FD0\u884C,\n\u56E0\u6B64\u51FD\u6570\u4E2D\u7684 ",(0,r.jsx)(n.code,{children:"this"})," \u503C\u5728\u975E\u4E25\u683C\u6A21\u5F0F\u4E0B\u59CB\u7EC8\u6307\u5411 ",(0,r.jsx)(n.code,{children:"window"}),", \u5728\u4E25\u683C\u6A21\u5F0F\u4E0B\u662F ",(0,r.jsx)(n.code,{children:"undefined"}),".\n\u82E5\u7ED9 ",(0,r.jsx)(n.code,{children:"setTimeout()"})," \u63D0\u4F9B\u4E86\u4E00\u4E2A\u7BAD\u5934\u51FD\u6570, \u5219 ",(0,r.jsx)(n.code,{children:"this"})," \u4F1A\u4FDD\u7559\u4E3A\u5B9A\u4E49\u5B83\u65F6\u6240\u5728\u7684\u8BCD\u6C47\u4F5C\u7528\u57DF."]})]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"requestAnimationFrame"})," game loop:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:"function runAnimation(frameFunc) {\n  let lastTime = null\n\n  function frame(time) {\n    if (lastTime !== null) {\n      const timeStep = Math.min(time - lastTime, 100) / 1000\n      if (frameFunc(timeStep) === false)\n        return\n    }\n\n    lastTime = time\n    requestAnimationFrame(frame)\n  }\n\n  requestAnimationFrame(frame)\n}\n"})}),"\n",(0,r.jsx)(n.h2,{id:"math",children:"Math"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"Math.max"}),"."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"Math.min()"}),"."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"Math.ceil()"}),": \u5411\u4E0A\u820D\u5165\u4E3A\u6700\u63A5\u8FD1\u7684\u6574\u6570."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"Math.floor()"}),": \u5411\u4E0B\u820D\u5165\u4E3A\u6700\u63A5\u8FD1\u7684\u6574\u6570."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"Math.round()"}),": \u56DB\u820D\u4E94\u5165."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"Math.fround()"}),": \u8FD4\u56DE\u6570\u503C\u6700\u63A5\u8FD1\u7684\u5355\u7CBE\u5EA6 (32 \u4F4D) \u6D6E\u70B9\u503C\u8868\u793A."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"Math.abs(x)"}),": \u8FD4\u56DE x \u7684\u7EDD\u5BF9\u503C."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"Math.exp(x)"}),": \u8FD4\u56DE ",(0,r.jsx)(n.code,{children:"Math.E"})," \u7684 x \u6B21\u5E42."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"Math.expm1(x)"}),": \u7B49\u4E8E ",(0,r.jsx)(n.code,{children:"Math.exp(x) - 1"}),"."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"Math.log(x)"}),": \u8FD4\u56DE x \u7684\u81EA\u7136\u5BF9\u6570."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"Math.log1p(x)"}),": \u7B49\u4E8E ",(0,r.jsx)(n.code,{children:"1 + Math.log(x)"}),"."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"Math.pow(x, power)"}),": \u8FD4\u56DE x \u7684 power \u6B21\u5E42."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"Math.hypot(...nums)"}),": \u8FD4\u56DE nums \u4E2D\u6BCF\u4E2A\u6570\u5E73\u65B9\u548C\u7684\u5E73\u65B9\u6839."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"Math.clz32(x)"}),": \u8FD4\u56DE 32 \u4F4D\u6574\u6570 x \u7684\u524D\u7F6E\u96F6\u7684\u6570\u91CF."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"Math.sign(x)"}),": \u8FD4\u56DE\u8868\u793A x \u7B26\u53F7\u7684 ",(0,r.jsx)(n.code,{children:"1"}),"/",(0,r.jsx)(n.code,{children:"0"}),"/",(0,r.jsx)(n.code,{children:"-0"}),"/",(0,r.jsx)(n.code,{children:"-1"}),"."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"Math.trunc(x)"}),": \u8FD4\u56DE x \u7684\u6574\u6570\u90E8\u5206, \u5220\u9664\u6240\u6709\u5C0F\u6570."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"Math.sqrt(x)"}),": \u8FD4\u56DE x \u7684\u5E73\u65B9\u6839."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"Math.cbrt(x)"}),": \u8FD4\u56DE x \u7684\u7ACB\u65B9\u6839."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"Math.acos(x)"}),": \u8FD4\u56DE x \u7684\u53CD\u4F59\u5F26."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"Math.acosh(x)"}),": \u8FD4\u56DE x \u7684\u53CD\u53CC\u66F2\u4F59\u5F26."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"Math.asin(x)"}),": \u8FD4\u56DE x \u7684\u53CD\u6B63\u5F26."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"Math.asinh(x)"}),": \u8FD4\u56DE x \u7684\u53CD\u53CC\u66F2\u6B63\u5F26."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"Math.atan(x)"}),": \u8FD4\u56DE x \u7684\u53CD\u6B63\u5207."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"Math.atanh(x)"}),": \u8FD4\u56DE x \u7684\u53CD\u53CC\u66F2\u6B63\u5207."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"Math.atan2(y, x)"}),": \u8FD4\u56DE ",(0,r.jsx)(n.code,{children:"y/x"})," \u7684\u53CD\u6B63\u5207."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"Math.cos(x)"}),": \u8FD4\u56DE x \u7684\u4F59\u5F26."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"Math.sin(x)"}),": \u8FD4\u56DE x \u7684\u6B63\u5F26."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"Math.tan(x)"}),": \u8FD4\u56DE x \u7684\u6B63\u5207."]}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:"const epsilon = Math.E\nconst log10 = Math.LN10\nconst log2 = Math.LN2\nconst log2e = Math.LOG2E\nconst log10e = Math.LOG10E\nconst pi = Math.PI\nconst squareRoot = Math.SQRT1_2\nconst squareRoot2 = Math.SQRT2\n\nMath.abs(num)\nMath.exp(num)\nMath.log(num)\nMath.sqrt(num)\nMath.acos(x)\nMath.asin(x)\nMath.atan(x)\nMath.atan2(y, x)\nMath.cos(x)\nMath.sin(x)\nMath.tan(x)\n"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:"console.log(Math.max(3, 54, 32, 16)) // 54\nconsole.log(Math.min(3, 54, 32, 16)) // 3\nconsole.log(Math.ceil(25.9)) // 26\nconsole.log(Math.ceil(25.5)) // 26\nconsole.log(Math.ceil(25.1)) // 26\nconsole.log(Math.round(25.9)) // 26\nconsole.log(Math.round(25.5)) // 26\nconsole.log(Math.round(25.1)) // 25\nconsole.log(Math.fround(0.4)) // 0.4000000059604645\nconsole.log(Math.fround(0.5)) // 0.5\nconsole.log(Math.fround(25.9)) // 25.899999618530273\nconsole.log(Math.floor(25.9)) // 25\nconsole.log(Math.floor(25.5)) // 25\nconsole.log(Math.floor(25.1)) // 25\n"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:"function random(a = 1, b = 0) {\n  const lower = Math.min(a, b)\n  const upper = Math.max(a, b)\n  return lower + Math.random() * (upper - lower)\n}\n\nfunction randomInt(a = 1, b = 0) {\n  const lower = Math.ceil(Math.min(a, b))\n  const upper = Math.floor(Math.max(a, b))\n  return Math.floor(lower + Math.random() * (upper - lower + 1))\n}\n"})}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{}),(0,r.jsx)(n.th,{children:"-2.9"}),(0,r.jsx)(n.th,{children:"-2.5"}),(0,r.jsx)(n.th,{children:"-2.1"}),(0,r.jsx)(n.th,{children:"2.1"}),(0,r.jsx)(n.th,{children:"2.5"}),(0,r.jsx)(n.th,{children:"2.9"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"Math.floor"})}),(0,r.jsx)(n.td,{children:"-3"}),(0,r.jsx)(n.td,{children:"-3"}),(0,r.jsx)(n.td,{children:"-3"}),(0,r.jsx)(n.td,{children:"2"}),(0,r.jsx)(n.td,{children:"2"}),(0,r.jsx)(n.td,{children:"2"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"Math.ceil"})}),(0,r.jsx)(n.td,{children:"-2"}),(0,r.jsx)(n.td,{children:"-2"}),(0,r.jsx)(n.td,{children:"-2"}),(0,r.jsx)(n.td,{children:"3"}),(0,r.jsx)(n.td,{children:"3"}),(0,r.jsx)(n.td,{children:"3"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"Math.round"})}),(0,r.jsx)(n.td,{children:"-3"}),(0,r.jsx)(n.td,{children:"-2"}),(0,r.jsx)(n.td,{children:"-2"}),(0,r.jsx)(n.td,{children:"2"}),(0,r.jsx)(n.td,{children:"3"}),(0,r.jsx)(n.td,{children:"3"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"Math.trunc"})}),(0,r.jsx)(n.td,{children:"-2"}),(0,r.jsx)(n.td,{children:"-2"}),(0,r.jsx)(n.td,{children:"-2"}),(0,r.jsx)(n.td,{children:"2"}),(0,r.jsx)(n.td,{children:"2"}),(0,r.jsx)(n.td,{children:"2"})]})]})]}),"\n",(0,r.jsx)(n.h2,{id:"atomics",children:"Atomics"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.a,{href:"https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Atomics",children:"Atomics API"}),":"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:"const sharedArrayBuffer = new SharedArrayBuffer(4)\nconst dataView = new Uint32Array(sharedArrayBuffer)\n\nconst index = 0\nconst increment = 5\n\nAtomics.add(dataView, index, increment)\nAtomics.sub(dataView, index, increment)\nAtomics.or(dataView, index, 0b1111)\nAtomics.and(dataView, index, 0b1100)\nAtomics.xor(dataView, index, 0b1111)\nAtomics.load(dataView, index)\nAtomics.store(dataView, index, 3)\nAtomics.exchange(dataView, index, 4)\nAtomics.compareExchange(dataView, index, expect, 6)\n"})}),"\n",(0,r.jsx)(n.h2,{id:"signals",children:"Signals"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.a,{href:"https://github.com/tc39/proposal-signals",children:"Signals"}),"\ncreate a universal standard for state management across frameworks.\nIt use the so-called ",(0,r.jsx)(n.code,{children:"pull-push"})," model:"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"push"})," phase:\nWhen Signal becomes ",(0,r.jsx)(n.code,{children:"dirty"})," (its value has changed),\nit recursively passes ",(0,r.jsx)(n.code,{children:"dirty"})," state to all dependent Signals."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"pull"})," phase:\nAll potential recalculations are deferred until value of Signal is explicitly requested."]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"Lazy evaluation brings:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Automated tracking:\nEliminates complexity of manual updates and enhances reactive programming capabilities."}),"\n",(0,r.jsx)(n.li,{children:"Performance optimization:\nCalculated only when necessary avoiding unnecessary computations and updates."}),"\n",(0,r.jsx)(n.li,{children:"Consistency:\nState is updated synchronously in corresponding UI render or any dependency evaluation."}),"\n",(0,r.jsx)(n.li,{children:"Easy integration:\nSignals can be easily integrated into various JavaScript libraries and frameworks."}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:"const counter = new Signal.State(0)\nconst isEven = new Signal.Computed(() => (counter.get() & 1) === 0)\nconst parity = new Signal.Computed(() => isEven.get() ? 'even' : 'odd')\n\neffect(() => element.textContent = parity.get())\n"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:"/**\n * Class auto-accessor decorator\n * @see https://github.com/tc39/proposal-decorators?tab=readme-ov-file#class-auto-accessors\n */\nfunction signal(target) {\n  const { get } = target\n\n  return {\n    init(value) {\n      return new Signal.State(value)\n    },\n    get() {\n      return get.call(this).get()\n    },\n    set(value) {\n      get.call(this).set(value)\n    },\n  }\n}\n\nclass Counter {\n  @signal\n  count = 0 // This will be automatically turned into a Signal state.\n\n  increment() {\n    this.count++ // Behind the scenes, this updates the Signal's value.\n  }\n\n  decrement() {\n    this.count-- // Similarly, this updates the Signal's value.\n  }\n\n  @signal\n  get isEven() {\n    return this.count % 2 === 0\n  }\n\n  @signal\n  get parity() {\n    return this.isEven ? 'even' : 'odd'\n  }\n}\n\n// Usage\nconst myCounter = new Counter()\nconsole.log(myCounter.count) // Outputs: 0\n\nmyCounter.increment()\nconsole.log(myCounter.count) // Outputs: 1\nconsole.log(myCounter.parity) // Outputs: \"odd\"\n\nmyCounter.increment()\nconsole.log(myCounter.count) // Outputs: 2\nconsole.log(myCounter.isEven) // Outputs: true\n"})}),"\n",(0,r.jsx)(n.h2,{id:"uri-and-url",children:"URI and URL"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"encodeURI()"}),": \u4E0D\u4F1A\u7F16\u7801\u5C5E\u4E8E URL \u7EC4\u4EF6\u7684\u7279\u6B8A\u5B57\u7B26, \u6BD4\u5982\u5192\u53F7/\u659C\u6760/\u95EE\u53F7."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"encodeURIComponent()"}),": \u7F16\u7801\u5B83\u53D1\u73B0\u7684\u6240\u6709\u975E\u6807\u51C6\u5B57\u7B26."]}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:'const uri = \'http://www.foo.com/illegal value.js#start\'\n// "http://www.foo.com/illegal%20value.js#start"\nconsole.log(encodeURI(uri))\n// "http%3A%2F%2Fwww.foo.com%2Fillegal%20value.js%23start"\nconsole.log(encodeURIComponent(uri))\n'})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:"const uri = 'http%3A%2F%2Fwww.foo.com%2Fillegal%20value.js%23start'\n// http%3A%2F%2Fwww.foo.com%2Fillegal value.js%23start\nconsole.log(decodeURI(uri))\n// http:// www.foo.com/illegal value.js#start\nconsole.log(decodeURIComponent(uri))\n"})}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.a,{href:"https://developer.mozilla.org/docs/Web/API/URL",children:"URL"}),":"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"hash"}),"."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"host"}),"."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"hostname"}),"."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"href"}),"."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"pathname"}),"."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"port"}),"."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"protocol"}),"."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"search"}),": ",(0,r.jsx)(n.a,{href:"https://developer.mozilla.org/docs/Web/API/USVString",children:"USVString"}),"."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"searchParams"}),": URL search map."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"username"}),"."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"password"}),"."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"origin"}),": read only."]}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:"const href = new URL('other.mjs', 'https://example.com/code/main.mjs').href\n// 'https://example.com/code/other.mjs'\nconst href = new URL('../other.mjs', 'https://example.com/code/main.mjs').href\n// 'https://example.com/other.mjs'\n\nconst blob = new Blob(['export const itsAModule = true'], {\n  type: 'text/javascript',\n})\n\nconst blobUrl = URL.createObjectURL(blob)\n"})}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.a,{href:"https://www.amitmerchant.com/create-and-download-text-files-using-javascript",children:"Download files"}),":"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:"function saveTextAsFile(textToWrite, fileNameToSaveAs, fileType) {\n  const textFileAsBlob = new Blob([textToWrite], { type: fileType })\n  const downloadLink = document.createElement('a')\n  downloadLink.innerHTML = 'Download File'\n  downloadLink.download = fileNameToSaveAs\n\n  if (window.webkitURL != null) {\n    downloadLink.href = window.webkitURL.createObjectURL(textFileAsBlob)\n  } else {\n    downloadLink.href = window.URL.createObjectURL(textFileAsBlob)\n    downloadLink.onclick = destroyClickedElement // document.body.removeChild(downloadLink);\n    downloadLink.style.display = 'none'\n    document.body.appendChild(downloadLink)\n  }\n\n  downloadLink.click()\n}\n"})}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.a,{href:"https://developer.mozilla.org/docs/Web/API/URLSearchParams",children:"URLSearchParams"}),":"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:'// window.location.search\nconst qs = \'?q=javascript&num=10\'\nconst searchParams = new URLSearchParams(qs)\n\nfor (const param of searchParams)\n  console.log(param)\n\n// ["q", "javascript"]\n// ["num", "10"]\n\nalert(searchParams.toString()) // " q=javascript&num=10"\nsearchParams.has(\'num\') // true\nsearchParams.get(\'num\') // 10\nsearchParams.set(\'page\', \'3\')\nalert(searchParams.toString()) // " q=javascript&num=10&page=3"\nsearchParams.delete(\'q\')\nalert(searchParams.toString()) // " num=10&page=3"\n'})}),"\n",(0,r.jsx)(n.h2,{id:"encoding-and-decoding",children:"Encoding and Decoding"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.a,{href:"https://developer.mozilla.org/docs/Web/API/TextEncoder",children:"TextEncoder API"}),":"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:"const textEncoder = new TextEncoder()\nconst decodedText = 'foo'\nconst encodedText = textEncoder.encode(decodedText)\n// f \u7684 UTF-8 \u7F16\u7801\u662F 0x66 (\u5373\u5341\u8FDB\u5236 102)\n// o \u7684 UTF-8 \u7F16\u7801\u662F 0x6F (\u5373\u4E8C\u8FDB\u5236 111)\nconsole.log(encodedText) // Uint8Array(3) [102, 111, 111]\n"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:"const textEncoder = new TextEncoder()\nconst fooArr = new Uint8Array(3)\nconst fooResult = textEncoder.encodeInto('foo', fooArr)\nconsole.log(fooArr) // Uint8Array(3) [102, 111, 111]\nconsole.log(fooResult) // { read: 3, written: 3 }\n"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:"async function* chars() {\n  const decodedText = 'foo'\n  for (const char of decodedText)\n    yield await new Promise(resolve => setTimeout(resolve, 1000, char))\n}\n\nconst decodedTextStream = new ReadableStream({\n  async start(controller) {\n    for await (const chunk of chars())\n      controller.enqueue(chunk)\n\n    controller.close()\n  },\n})\n\nconst encodedTextStream = decodedTextStream.pipeThrough(new TextEncoderStream())\n\nconst readableStreamDefaultReader = encodedTextStream.getReader()\n\nwhile (true) {\n  const { done, value } = await readableStreamDefaultReader.read()\n\n  if (done)\n    break\n  else\n    console.log(value)\n}\n// Uint8Array[102]\n// Uint8Array[111]\n// Uint8Array[111]\n"})}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.a,{href:"https://developer.mozilla.org/docs/Web/API/TextDecoder",children:"TextDecoder API"}),":"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:"const textDecoder = new TextDecoder()\n// f \u7684 UTF-8 \u7F16\u7801\u662F 0x66 (\u5373\u5341\u8FDB\u5236 102)\n// o \u7684 UTF-8 \u7F16\u7801\u662F 0x6F (\u5373\u4E8C\u8FDB\u5236 111)\nconst encodedText = Uint8Array.of(102, 111, 111)\nconst decodedText = textDecoder.decode(encodedText)\nconsole.log(decodedText) // foo\n"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:"const response = await fetch(url)\nconst stream = response.body.pipeThrough(new TextDecoderStream())\nconst decodedStream = stream.getReader()\n\nfor await (const decodedChunk of decodedStream)\n  console.log(decodedChunk)\n"})}),"\n",(0,r.jsx)(n.h2,{id:"web-stream",children:"Web Stream"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Web streams complete ",(0,r.jsx)(n.a,{href:"https://2ality.com/2022/06/web-streams-nodejs.html",children:"guide"}),"."]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"internationalization",children:"Internationalization"}),"\n",(0,r.jsx)(n.h3,{id:"number",children:"Number"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:"const nfFrench = new Intl.NumberFormat('fr')\nnf.format(12345678901234567890n)\n// => 12 345 678 901 234 567 890\n"})}),"\n",(0,r.jsx)(n.h3,{id:"string",children:"String"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:"const lfEnglish = new Intl.ListFormat('en')\n// const lfEnglish = new Intl.ListFormat('en', { type: 'disjunction' }); => 'or'\n\nlfEnglish.format(['Ada', 'Grace', 'Ida'])\n// => 'Ada, Grace and Ida'\n\nconst formatter = new Intl.ListFormat('en', {\n  style: 'long',\n  type: 'conjunction',\n})\nconsole.log(formatter.format(vehicles))\n// expected output: \"Motorcycle, Bus, and Car\"\n\nconst formatter2 = new Intl.ListFormat('de', {\n  style: 'short',\n  type: 'disjunction',\n})\nconsole.log(formatter2.format(vehicles))\n// expected output: \"Motorcycle, Bus oder Car\"\n\nconst formatter3 = new Intl.ListFormat('en', { style: 'narrow', type: 'unit' })\nconsole.log(formatter3.format(vehicles))\n// expected output: \"Motorcycle Bus Car\"\n"})}),"\n",(0,r.jsx)(n.h3,{id:"time",children:"Time"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:"const rtfEnglish = new Intl.RelativeTimeFormat('en', { numeric: 'auto' })\n\nrtf.format(-1, 'day') // 'yesterday'\nrtf.format(0, 'day') // 'today'\nrtf.format(1, 'day') // 'tomorrow'\nrtf.format(-1, 'week') // 'last week'\nrtf.format(0, 'week') // 'this week'\nrtf.format(1, 'week') // 'next week'\n"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:"const dtfEnglish = new Intl.DateTimeFormat('en', {\n  year: 'numeric',\n  month: 'long',\n  day: 'numeric',\n})\n\ndtfEnglish.format(new Date()) // => 'May 7, 2019'\ndtfEnglish.formatRange(start, end) // => 'May 7 - 9, 2019'\n"})})]})}function h(e={}){let{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(d,{...e})}):d(e)}},30416(e,n,t){t.d(n,{R:()=>l,x:()=>o});var s=t(59471);let r={},i=s.createContext(r);function l(e){let n=s.useContext(i);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:l(e.components),s.createElement(i.Provider,{value:n},e.children)}}}]);