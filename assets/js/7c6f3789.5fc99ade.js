"use strict";(self.webpackChunknotes=self.webpackChunknotes||[]).push([["431"],{45946(e,n,i){i.r(n),i.d(n,{metadata:()=>l,default:()=>h,frontMatter:()=>r,contentTitle:()=>a,toc:()=>o,assets:()=>c});var l=JSON.parse('{"id":"ai/python/toolchain","title":"Toolchain","description":"Installation","source":"@site/content/ai/python/toolchain.md","sourceDirName":"ai/python","slug":"/ai/python/toolchain","permalink":"/notes/ai/python/toolchain","draft":false,"unlisted":false,"editUrl":"https://github.com/sabertazimi/notes/edit/main/content/ai/python/toolchain.md","tags":[{"inline":true,"label":"AI","permalink":"/notes/tags/ai"},{"inline":true,"label":"Language","permalink":"/notes/tags/language"},{"inline":true,"label":"Python","permalink":"/notes/tags/python"},{"inline":true,"label":"Toolchain","permalink":"/notes/tags/toolchain"},{"inline":true,"label":"UV","permalink":"/notes/tags/uv"}],"version":"current","lastUpdatedBy":"sabertazimi","lastUpdatedAt":1772299263000,"sidebarPosition":1,"frontMatter":{"sidebar_position":1,"tags":["AI","Language","Python","Toolchain","UV"]},"sidebar":"tutorialSidebar","previous":{"title":"Python","permalink":"/notes/ai/python/"},"next":{"title":"Data Structure","permalink":"/notes/ai/python/data-structure"}}'),t=i(62615),s=i(30416);let r={sidebar_position:1,tags:["AI","Language","Python","Toolchain","UV"]},a="Toolchain",c={},o=[{value:"Installation",id:"installation",level:2},{value:"Mirrors",id:"mirrors",level:2},{value:"Python",id:"python",level:2},{value:"Initialization",id:"initialization",level:2},{value:"Dependencies",id:"dependencies",level:2},{value:"Lockfile",id:"lockfile",level:2},{value:"Virtual Environment",id:"virtual-environment",level:2},{value:"Scripts",id:"scripts",level:2},{value:"Tools",id:"tools",level:2},{value:"Execution",id:"execution",level:3},{value:"Development",id:"development",level:3},{value:"Project",id:"project",level:2},{value:"Workspace",id:"workspace",level:2},{value:"Monorepo",id:"monorepo",level:3},{value:"Package",id:"package",level:3},{value:"Command",id:"command",level:3},{value:"Caching",id:"caching",level:2},{value:"Dockerfile",id:"dockerfile",level:2},{value:"Linter",id:"linter",level:2},{value:"Library",id:"library",level:2},{value:"ASGI",id:"asgi",level:3},{value:"HTTP",id:"http",level:3},{value:"UI",id:"ui",level:3},{value:"AI",id:"ai",level:3},{value:"Debugging",id:"debugging",level:3},{value:"Testing",id:"testing",level:3}];function d(e){let n={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,s.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.header,{children:(0,t.jsx)(n.h1,{id:"toolchain",children:"Toolchain"})}),"\n",(0,t.jsx)(n.h2,{id:"installation",children:"Installation"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"scoop install main/uv\necho 'eval \"$(uv generate-shell-completion zsh)\"' >> ~/.zshrc\necho 'eval \"$(uvx --generate-shell-completion zsh)\"' >> ~/.zshrc\n"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:'uv cache clean\nrm -r "$(uv python dir)"\nrm -r "$(uv tool dir)"\nrm ~/.local/bin/uv ~/.local/bin/uvx\n'})}),"\n",(0,t.jsx)(n.h2,{id:"mirrors",children:"Mirrors"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"echo 'export UV_PYTHON_INSTALL_MIRROR=\"https://gh-proxy.com/github.com/indygreg/python-build-standalone/releases/download/\"' >> ~/.zshrc\necho 'export UV_DEFAULT_INDEX=\"https://mirrors.aliyun.com/pypi/simple/\"' >> ~/.zshrc\n"})}),"\n",(0,t.jsx)(n.h2,{id:"python",children:"Python"}),"\n",(0,t.jsx)(n.p,{children:"Install Python:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"uv python install --default # Global\nuv python install 3.14      # Virtual environment\nuv python list\nuv run --python 3.14 script.py\nuvx python@3.14 -c \"print('hello world')\"\n"})}),"\n",(0,t.jsx)(n.h2,{id:"initialization",children:"Initialization"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"uv init hello-app\nuv init --package hello-package\nuv init --lib hello-lib\nuv init --script hello-script.py --python 3.14\n"})}),"\n",(0,t.jsx)(n.h2,{id:"dependencies",children:"Dependencies"}),"\n",(0,t.jsx)(n.p,{children:"Manage dependencies:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"uv add 'requests==2.31.0' # \u589E\u52A0\u4F9D\u8D56\nuv add -r requirements.txt # Import from requirements files\nuv lock --upgrade-package requests # \u66F4\u65B0\u9879\u76EE\u4F9D\u8D56\nuv remove requests # \u5220\u9664\u9879\u76EE\u4F9D\u8D56\n\nuv sync\nuv tree --outdated\nuv tree --depth 2\nuv run main.py\n"})}),"\n",(0,t.jsxs)(n.admonition,{title:"Distribution and Import",type:"tip",children:[(0,t.jsxs)(n.p,{children:["Python \u4E2D\u5B58\u5728\u4E24\u4E2A\u4E0D\u540C\u7684",(0,t.jsx)(n.a,{href:"https://packaging.python.org/en/latest/discussions/distribution-package-vs-import-package",children:"\u5305\u540D"}),"\uFF1A"]}),(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"\u6982\u5FF5"}),(0,t.jsx)(n.th,{children:"\u82F1\u6587\u672F\u8BED"}),(0,t.jsx)(n.th,{children:"\u793A\u4F8B"}),(0,t.jsx)(n.th,{children:"\u7528\u9014"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"\u5206\u53D1\u5305\u540D"}),(0,t.jsx)(n.td,{children:"Distribution Package"}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"python-dotenv"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"uv add xxx"})})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"\u5BFC\u5165\u5305\u540D"}),(0,t.jsx)(n.td,{children:"Import Package"}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"dotenv"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"from xxx import ..."})})]})]})]}),(0,t.jsxs)(n.p,{children:["\u5B89\u88C5\u5305\u540E, ",(0,t.jsx)(n.code,{children:"site-packages"})," \u76EE\u5F55\u4F1A\u5305\u542B\u4E24\u7C7B\u6587\u4EF6\u5939:"]}),(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"*.dist-info/"})," \u76EE\u5F55\u540D\u5BF9\u5E94 ",(0,t.jsx)(n.strong,{children:"PyPI \u5305\u540D"})]}),"\n",(0,t.jsxs)(n.li,{children:["\u6E90\u7801\u76EE\u5F55\u540D\u5BF9\u5E94",(0,t.jsx)(n.strong,{children:"\u5BFC\u5165\u540D"})]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"top_level.txt"})," \u6587\u4EF6\u8BB0\u5F55\u4E86\u5BFC\u5165\u540D\u6620\u5C04"]}),"\n"]}),(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"# \u67E5\u770B\u5305\u5B89\u88C5\u4F4D\u7F6E\u548C\u7248\u672C\nuv pip show python-dotenv\n\n# \u67E5\u770B\u4F9D\u8D56\u6811\nuv tree\n"})}),(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.a,{href:"https://peps.python.org/pep-0427",children:"PEP 427"}),": Wheel \u683C\u5F0F\u89C4\u8303\uFF08\u5B9A\u4E49 ",(0,t.jsx)(n.code,{children:".dist-info"}),"\uFF09."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.a,{href:"https://peps.python.org/pep-0503",children:"PEP 503"}),": \u5305\u540D\u89C4\u8303\u5316."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:".dist-info"})," ",(0,t.jsx)(n.a,{href:"https://packaging.python.org/en/latest/specifications/recording-installed-packages",children:"\u76EE\u5F55\u7ED3\u6784"}),"."]}),"\n"]})]}),"\n",(0,t.jsx)(n.h2,{id:"lockfile",children:"Lockfile"}),"\n",(0,t.jsx)(n.p,{children:"Create lockfile:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"uv lock\n"})}),"\n",(0,t.jsx)(n.h2,{id:"virtual-environment",children:"Virtual Environment"}),"\n",(0,t.jsx)(n.p,{children:"Manage virtual environments:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"# \u521B\u5EFA\u5E76\u6FC0\u6D3B\u865A\u62DF\u73AF\u5883\nuv venv\nsource .venv/bin/activate\n\n# \u9000\u51FA\u865A\u62DF\u73AF\u5883\ndeactivate\n\n# \u5F3A\u5236\u5B89\u88C5\u57FA\u7840\u5305\uFF08\u5982 pip, setuptools, wheel\uFF09\nuv venv --seed\n"})}),"\n",(0,t.jsx)(n.h2,{id:"scripts",children:"Scripts"}),"\n",(0,t.jsx)(n.p,{children:"Run standalone scripts:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"uv init --script example.py --python 3.14\nuv add --index \"https://mirrors.aliyun.com/pypi/simple\" --script example.py 'requests<3' 'rich'\nuv run example.py\nuv run --python 3.14 example.py\n"})}),"\n",(0,t.jsx)(n.h2,{id:"tools",children:"Tools"}),"\n",(0,t.jsx)(n.h3,{id:"execution",children:"Execution"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"uv tool install black\nuv tool run black ./myfile.py\n\nuvx pycowsay 'hello world!'\nuvx python@3.14.2 -c \"print('hello world')\"\n"})}),"\n",(0,t.jsx)(n.h3,{id:"development",children:"Development"}),"\n",(0,t.jsx)(n.p,{children:"Hot reload:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"uv tool install --editable packages/agent-cli\n"})}),"\n",(0,t.jsx)(n.h2,{id:"project",children:"Project"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-toml",children:'[project]\nname = "project"\nversion = "0.1.0"\nrequires-python = ">=3.12.0"\ndependencies = [ "torch>=2.6.0" ]\n\n[tool.uv.sources]\ntorch = [\n  { index = "pytorch-cpu", marker = "sys_platform != \'linux\'" },\n  { index = "pytorch-cu124", marker = "sys_platform == \'linux\'" },\n]\n\n[[tool.uv.index]]\nname = "pytorch-cpu"\nurl = "https://pypi.tuna.tsinghua.edu.cn/simple"\nexplicit = true\n\n[[tool.uv.index]]\nname = "pytorch-cu124"\nurl = "https://mirror.sjtu.edu.cn/pytorch-wheels/cu124"\nexplicit = true\n'})}),"\n",(0,t.jsx)(n.h2,{id:"workspace",children:"Workspace"}),"\n",(0,t.jsx)(n.h3,{id:"monorepo",children:"Monorepo"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-toml",children:'[project]\nname = "albatross"\nversion = "0.1.0"\nrequires-python = ">=3.12"\ndependencies = [\n  "bird-feeder",\n  "tqdm>=4,<5",\n]\n\n[tool.uv.sources]\nbird-feeder = { workspace = true }\n\n[tool.uv.workspace]\nmembers = [ "packages/*" ]\nexclude = [ "packages/seeds" ]\n'})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"albatross\n\u251C\u2500\u2500 packages\n\u2502   \u251C\u2500\u2500 bird-feeder\n\u2502   \u2502   \u251C\u2500\u2500 pyproject.toml\n\u2502   \u2502   \u2514\u2500\u2500 src\n\u2502   \u2502       \u2514\u2500\u2500 bird_feeder\n\u2502   \u2502           \u251C\u2500\u2500 __init__.py\n\u2502   \u2502           \u2514\u2500\u2500 foo.py\n\u2502   \u2514\u2500\u2500 seeds\n\u2502       \u251C\u2500\u2500 pyproject.toml\n\u2502       \u2514\u2500\u2500 src\n\u2502           \u2514\u2500\u2500 seeds\n\u2502               \u251C\u2500\u2500 __init__.py\n\u2502               \u2514\u2500\u2500 bar.py\n\u251C\u2500\u2500 pyproject.toml\n\u251C\u2500\u2500 README.md\n\u251C\u2500\u2500 uv.lock\n\u2514\u2500\u2500 src\n    \u2514\u2500\u2500 albatross\n        \u2514\u2500\u2500 main.py\n"})}),"\n",(0,t.jsx)(n.h3,{id:"package",children:"Package"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"# Initialize package\nuv init --package packages/bash-agent\n\n# Add workspace package as dependency\nuv add --workspace bash-agent\n\n# Run package\nuv run bash-agent\n"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-toml",children:'[project]\nname = "bash-agent"\nversion = "0.1.0"\ndescription = "Minimal Claude Code."\nreadme = "README.md"\nrequires-python = ">=3.14"\n\n[project.scripts]\nbash-agent = "bash_agent:main"\n\n[build-system]\nrequires = [ "uv_build>=0.9.27,<0.10.0" ]\nbuild-backend = "uv_build"\n'})}),"\n",(0,t.jsx)(n.h3,{id:"command",children:"Command"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"uv add --package bash-agent anthropic python-dotenv\n"})}),"\n",(0,t.jsx)(n.h2,{id:"caching",children:"Caching"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"uv cache dir\nuv cache clean\nuv cache prune\n"})}),"\n",(0,t.jsx)(n.h2,{id:"dockerfile",children:"Dockerfile"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-Dockerfile",children:'FROM python:3.12-slim-bookworm\nCOPY --from=ghcr.io/astral-sh/uv:latest /uv /uvx /bin/\nENV UV_SYSTEM_PYTHON=1\n\n# Copy the project into the image\nADD . /app\n\nWORKDIR /app\n\n# Install dependencies\nRUN uv sync --locked\n\n# Install requirements\nCOPY requirements.txt .\nRUN uv pip install -r requirements.txt\n\nCMD ["uv", "run", "my_app"]\n'})}),"\n",(0,t.jsx)(n.h2,{id:"linter",children:"Linter"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"uv add --dev pyright ruff\n"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-toml",children:'[tool.pyright]\ntypeCheckingMode = "strict"\ninclude = [ "packages" ]\nextraPaths = [ "packages/agent-cli/src" ]\n\n[tool.ruff.lint]\nselect = [\n  "E", # pycodestyle\n  "F", # Pyflakes\n  "UP", # pyupgrade\n  "B", # flake8-bugbear\n  "SIM", # flake8-simplify\n  "I", # isort\n]\nignore = [ "E501" ] # \u5FFD\u7565\u884C\u957F\u5EA6\u9650\u5236\n'})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"uvx ruff check\nuvx ruff format ./script.py\n"})}),"\n",(0,t.jsx)(n.h2,{id:"library",children:"Library"}),"\n",(0,t.jsx)(n.h3,{id:"asgi",children:"ASGI"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.a,{href:"https://github.com/fastapi/fastapi",children:"FastAPI"}),":\nHigh-performance web framework."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.a,{href:"https://github.com/Kludex/uvicorn",children:"Uvicorn"}),":\nASGI web server."]}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"http",children:"HTTP"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.a,{href:"https://github.com/encode/httpx",children:"HTTPX"}),":\nNext generation HTTP client."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.a,{href:"https://github.com/psf/requests",children:"Requests"}),":\nHTTP client for humans."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.a,{href:"https://github.com/deedy5/ddgs",children:"DDGS"}),":\nDuckDuckGo search."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.a,{href:"https://github.com/matthewwithanm/python-markdownify",children:"Markdownify"}),":\nConvert HTML to Markdown."]}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"ui",children:"UI"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.a,{href:"https://github.com/Textualize/rich",children:"Rich"}),":\nRich text and beautiful formatting for terminal."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.a,{href:"https://github.com/Textualize/textual",children:"Textual"}),":\nBuild sophisticated user interfaces."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.a,{href:"https://github.com/tqdm/tqdm",children:"Progress"}),":\nFast, Extensible Progress Bar for CLI."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.a,{href:"https://github.com/ipython/ipython",children:"IPython"}),":\nProductive interactive computing."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.a,{href:"https://github.com/sepandhaghighi/art",children:"Art"}),":\nASCII art."]}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"ai",children:"AI"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.a,{href:"https://github.com/google/langextract",children:"Extract"}),":\nExtracting structured information from unstructured text using LLMs."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.a,{href:"https://github.com/batrachianai/toad",children:"Toad"}),":\nUnified client for terminal agents."]}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"debugging",children:"Debugging"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.a,{href:"https://github.com/cool-RR/PySnooper",children:"Snooper"}),":\nPoor man's debugger."]}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"testing",children:"Testing"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.a,{href:"https://github.com/pytest-dev/pytest",children:"Pytest"}),":\nTesting framework."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.a,{href:"https://github.com/pytest-dev/pytest-cov",children:"Coverage"}),":\nCoverage reporting."]}),"\n"]})]})}function h(e={}){let{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(d,{...e})}):d(e)}},30416(e,n,i){i.d(n,{R:()=>r,x:()=>a});var l=i(59471);let t={},s=l.createContext(t);function r(e){let n=l.useContext(s);return l.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:r(e.components),l.createElement(s.Provider,{value:n},e.children)}}}]);