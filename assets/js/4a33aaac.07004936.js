"use strict";(self.webpackChunknotes=self.webpackChunknotes||[]).push([["27215"],{10188(e,n,t){t.r(n),t.d(n,{metadata:()=>a,default:()=>u,frontMatter:()=>c,contentTitle:()=>r,toc:()=>i,assets:()=>o});var a=JSON.parse('{"id":"web/react/hooks/callback","title":"Callback","description":"- Returns a memoized callback.","source":"@site/content/web/react/hooks/callback.md","sourceDirName":"web/react/hooks","slug":"/web/react/hooks/callback","permalink":"/notes/web/react/hooks/callback","draft":false,"unlisted":false,"editUrl":"https://github.com/sabertazimi/notes/edit/main/content/web/react/hooks/callback.md","tags":[{"inline":true,"label":"Web","permalink":"/notes/tags/web"},{"inline":true,"label":"React","permalink":"/notes/tags/react"},{"inline":true,"label":"Hook","permalink":"/notes/tags/hook"},{"inline":true,"label":"Callback","permalink":"/notes/tags/callback"}],"version":"current","lastUpdatedBy":"Sabertaz","lastUpdatedAt":1769518084000,"sidebarPosition":4,"frontMatter":{"sidebar_position":4,"tags":["Web","React","Hook","Callback"]},"sidebar":"tutorialSidebar","previous":{"title":"Memo","permalink":"/notes/web/react/hooks/memo"},"next":{"title":"Ref","permalink":"/notes/web/react/hooks/ref"}}'),l=t(62615),s=t(30416);let c={sidebar_position:4,tags:["Web","React","Hook","Callback"]},r="Callback",o={},i=[{value:"Dispatcher",id:"dispatcher",level:2},{value:"useCallback",id:"usecallback",level:2}];function d(e){let n={code:"code",h1:"h1",h2:"h2",header:"header",li:"li",pre:"pre",ul:"ul",...(0,s.R)(),...e.components};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(n.header,{children:(0,l.jsx)(n.h1,{id:"callback",children:"Callback"})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"Returns a memoized callback."}),"\n",(0,l.jsxs)(n.li,{children:["\u5BF9\u4E8B\u4EF6\u53E5\u67C4\u8FDB\u884C\u7F13\u5B58, ",(0,l.jsx)(n.code,{children:"useState"})," \u7684\u7B2C\u4E8C\u4E2A\u8FD4\u56DE\u503C\u662F ",(0,l.jsx)(n.code,{children:"dispatch"}),",\n\u4F46\u662F\u6BCF\u6B21\u90FD\u662F\u8FD4\u56DE\u65B0\u7684\u51FD\u6570, \u4F7F\u7528 ",(0,l.jsx)(n.code,{children:"useCallback"}),", \u53EF\u4EE5\u8BA9\u5B83\u4F7F\u7528\u4E0A\u6B21\u7684\u51FD\u6570.\n\u5728\u865A\u62DF DOM \u66F4\u65B0\u8FC7\u7A0B\u4E2D, \u5982\u679C\u4E8B\u4EF6\u53E5\u67C4\u76F8\u540C, \u90A3\u4E48\u5C31\u4E0D\u7528\u6BCF\u6B21\u90FD\u8FDB\u884C\n",(0,l.jsx)(n.code,{children:"removeEventListener"})," \u4E0E ",(0,l.jsx)(n.code,{children:"addEventListener"}),"."]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"useCallback(fn, deps)"})," is equivalent to ",(0,l.jsx)(n.code,{children:"useMemo(() => fn, deps)"}),"."]}),"\n"]}),"\n",(0,l.jsx)(n.h2,{id:"dispatcher",children:"Dispatcher"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-ts",children:"function mountCallback<T>(callback: T, deps: Array<mixed> | void | null): T {\n  const hook = mountWorkInProgressHook()\n  const nextDeps = deps === undefined ? null : deps\n  hook.memoizedState = [callback, nextDeps]\n  return callback\n}\n\nfunction updateCallback<T>(callback: T, deps: Array<mixed> | void | null): T {\n  const hook = updateWorkInProgressHook()\n  const nextDeps = deps === undefined ? null : deps\n  const prevState = hook.memoizedState\n\n  if (prevState !== null) {\n    if (nextDeps !== null) {\n      const prevDeps: Array<mixed> | null = prevState[1]\n\n      if (areHookInputsEqual(nextDeps, prevDeps))\n        return prevState[0]\n    }\n  }\n\n  hook.memoizedState = [callback, nextDeps]\n  return callback\n}\n"})}),"\n",(0,l.jsx)(n.h2,{id:"usecallback",children:"useCallback"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-tsx",children:"export default function Parent() {\n  const [query, setQuery] = useState('react')\n\n  // \u2705 Preserves identity until query changes\n  const fetchData = useCallback(() => {\n    const url = `https://hn.algolia.com/api/v1/search?query=${query}`\n    // ... Fetch data and return it ...\n  }, [query]) // \u2705 Callback deps are OK\n\n  return <Child fetchData={fetchData} />\n}\n"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-tsx",children:"export default function Child({ fetchData }) {\n  const [data, setData] = useState(null)\n\n  useEffect(() => {\n    fetchData().then(setData)\n  }, [fetchData]) // \u2705 Effect deps are OK\n\n  // ...\n}\n"})})]})}function u(e={}){let{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,l.jsx)(n,{...e,children:(0,l.jsx)(d,{...e})}):d(e)}},30416(e,n,t){t.d(n,{R:()=>c,x:()=>r});var a=t(59471);let l={},s=a.createContext(l);function c(e){let n=a.useContext(s);return a.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function r(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(l):e.components||l:c(e.components),a.createElement(s.Provider,{value:n},e.children)}}}]);