"use strict";(self.webpackChunknotes=self.webpackChunknotes||[]).push([["25564"],{43197(n,e,t){t.r(e),t.d(e,{metadata:()=>i,default:()=>h,frontMatter:()=>o,contentTitle:()=>l,toc:()=>a,assets:()=>c});var i=JSON.parse('{"id":"web/javascript/bom","title":"BOM","description":"Window","source":"@site/content/web/javascript/bom.md","sourceDirName":"web/javascript","slug":"/web/javascript/bom","permalink":"/notes/web/javascript/bom","draft":false,"unlisted":false,"editUrl":"https://github.com/sabertazimi/notes/edit/main/content/web/javascript/bom.md","tags":[{"inline":true,"label":"Web","permalink":"/notes/tags/web"},{"inline":true,"label":"JavaScript","permalink":"/notes/tags/java-script"},{"inline":true,"label":"ECMAScript","permalink":"/notes/tags/ecma-script"},{"inline":true,"label":"DOM","permalink":"/notes/tags/dom"},{"inline":true,"label":"BOM","permalink":"/notes/tags/bom"}],"version":"current","lastUpdatedBy":"Sabertaz","lastUpdatedAt":1769518084000,"sidebarPosition":31,"frontMatter":{"sidebar_position":31,"tags":["Web","JavaScript","ECMAScript","DOM","BOM"]},"sidebar":"tutorialSidebar","previous":{"title":"Engine","permalink":"/notes/web/javascript/engine"},"next":{"title":"DOM","permalink":"/notes/web/javascript/dom"}}'),r=t(62615),s=t(30416);let o={sidebar_position:31,tags:["Web","JavaScript","ECMAScript","DOM","BOM"]},l="BOM",c={},a=[{value:"Window",id:"window",level:2},{value:"Location",id:"location",level:2},{value:"Navigator",id:"navigator",level:2},{value:"Online",id:"online",level:3},{value:"Connection",id:"connection",level:3},{value:"Protocol",id:"protocol",level:3},{value:"Battery",id:"battery",level:3},{value:"Storage",id:"storage",level:3},{value:"Geolocation",id:"geolocation",level:3},{value:"User Agent",id:"user-agent",level:3},{value:"Screen",id:"screen",level:2},{value:"History",id:"history",level:2},{value:"Navigation",id:"navigation",level:3},{value:"State",id:"state",level:3}];function d(n){let e={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,s.R)(),...n.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(e.header,{children:(0,r.jsx)(e.h1,{id:"bom",children:"BOM"})}),"\n",(0,r.jsx)(e.h2,{id:"window",children:"Window"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-ts",children:"const selfWindow = window.self\nconst topWindow = window.top\nconst parentWindow = window.parent\nconst grandParentWindow = window.parent.parent\n"})}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-ts",children:"if (confirm('Are you sure?'))\n  alert('I\\'m so glad you\\'re sure!')\nelse\n  alert('I\\'m sorry to hear you\\'re not sure.')\n\nconst result = prompt('What is your name? ', 'James')\nif (result !== null)\n  alert(`Welcome, ${result}`)\n\n// \u663E\u793A\u6253\u5370\u5BF9\u8BDD\u6846\nwindow.print()\n\n// \u663E\u793A\u67E5\u627E\u5BF9\u8BDD\u6846\nwindow.find()\n\n// \u663E\u5F0F\u6253\u5370\u673A\nwindow.print()\n"})}),"\n",(0,r.jsx)(e.p,{children:"\u5F39\u7A97\u6709\u975E\u5E38\u591A\u7684\u5B89\u5168\u9650\u5236:"}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"\u7981\u6B62\u9690\u85CF\u72B6\u6001\u680F\u4E0E\u5730\u5740\u680F."}),"\n",(0,r.jsx)(e.li,{children:"\u5F39\u7A97\u9ED8\u8BA4\u4E0D\u80FD\u79FB\u52A8\u6216\u7F29\u653E."}),"\n",(0,r.jsx)(e.li,{children:"\u53EA\u5141\u8BB8\u7528\u6237\u64CD\u4F5C\u4E0B (\u9F20\u6807/\u952E\u76D8) \u521B\u5EFA\u5F39\u7A97."}),"\n",(0,r.jsx)(e.li,{children:"\u5C4F\u853D\u5F39\u7A97."}),"\n"]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-ts",children:"const newWin = window.open(\n  'https://www.new.com/',\n  'newWindow',\n  'height=400,width=400,top=10,left=10,resizable=yes'\n)\nnewWin.resizeTo(500, 500)\nnewWin.moveTo(100, 100)\nalert(newWin.opener === window) // true\nnewWin.close()\nalert(newWin.closed) // true\n\nlet blocked = false\ntry {\n  const newWin = window.open('https://www.new.com/', '_blank')\n  if (newWin === null)\n    blocked = true\n} catch (ex) {\n  blocked = true\n}\nif (blocked)\n  alert('The popup was blocked!')\n"})}),"\n",(0,r.jsx)(e.h2,{id:"location",children:"Location"}),"\n",(0,r.jsxs)(e.table,{children:[(0,r.jsx)(e.thead,{children:(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.th,{style:{textAlign:"left"},children:"\u5C5E\u6027"}),(0,r.jsx)(e.th,{style:{textAlign:"left"},children:"\u63CF\u8FF0"})]})}),(0,r.jsxs)(e.tbody,{children:[(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{style:{textAlign:"left"},children:"hash"}),(0,r.jsx)(e.td,{style:{textAlign:"left"},children:"\u8BBE\u7F6E\u6216\u8FD4\u56DE\u4ECE\u4E95\u53F7 (#) \u5F00\u59CB\u7684 URL (\u951A)"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{style:{textAlign:"left"},children:"host"}),(0,r.jsx)(e.td,{style:{textAlign:"left"},children:"\u8BBE\u7F6E\u6216\u8FD4\u56DE\u4E3B\u673A\u540D\u548C\u5F53\u524D URL \u7684\u7AEF\u53E3\u53F7"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{style:{textAlign:"left"},children:"hostname"}),(0,r.jsx)(e.td,{style:{textAlign:"left"},children:"\u8BBE\u7F6E\u6216\u8FD4\u56DE\u5F53\u524D URL \u7684\u4E3B\u673A\u540D"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{style:{textAlign:"left"},children:"href"}),(0,r.jsx)(e.td,{style:{textAlign:"left"},children:"\u8BBE\u7F6E\u6216\u8FD4\u56DE\u5B8C\u6574\u7684 URL"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{style:{textAlign:"left"},children:"pathname"}),(0,r.jsx)(e.td,{style:{textAlign:"left"},children:"\u8BBE\u7F6E\u6216\u8FD4\u56DE\u5F53\u524D URL \u7684\u8DEF\u5F84\u90E8\u5206"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{style:{textAlign:"left"},children:"port"}),(0,r.jsx)(e.td,{style:{textAlign:"left"},children:"\u8BBE\u7F6E\u6216\u8FD4\u56DE\u5F53\u524D URL \u7684\u7AEF\u53E3\u53F7"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{style:{textAlign:"left"},children:"protocol"}),(0,r.jsx)(e.td,{style:{textAlign:"left"},children:"\u8BBE\u7F6E\u6216\u8FD4\u56DE\u5F53\u524D URL \u7684\u534F\u8BAE"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{style:{textAlign:"left"},children:"search"}),(0,r.jsx)(e.td,{style:{textAlign:"left"},children:"\u8BBE\u7F6E\u6216\u8FD4\u56DE\u4ECE\u95EE\u53F7 (?) \u5F00\u59CB\u7684 URL (\u67E5\u8BE2\u90E8\u5206)"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{style:{textAlign:"left"},children:"username"}),(0,r.jsx)(e.td,{style:{textAlign:"left"},children:"\u8BBE\u7F6E\u6216\u8FD4\u56DE\u57DF\u540D\u524D\u6307\u5B9A\u7684\u7528\u6237\u540D"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{style:{textAlign:"left"},children:"password"}),(0,r.jsx)(e.td,{style:{textAlign:"left"},children:"\u8BBE\u7F6E\u6216\u8FD4\u56DE\u57DF\u540D\u524D\u6307\u5B9A\u7684\u5BC6\u7801"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{style:{textAlign:"left"},children:"origin"}),(0,r.jsx)(e.td,{style:{textAlign:"left"},children:"\u8FD4\u56DE URL \u7684\u6E90\u5730\u5740"})]})]})]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-ts",children:"function getQueryStringArgs(location) {\n  // \u53D6\u5F97\u6CA1\u6709\u5F00\u5934\u95EE\u53F7\u7684\u67E5\u8BE2\u5B57\u7B26\u4E32\n  const qs = location.search.length > 0 ? location.search.substring(1) : ''\n  // \u4FDD\u5B58\u6570\u636E\u7684\u5BF9\u8C61\n  const args = {}\n\n  // \u628A\u6BCF\u4E2A\u53C2\u6570\u6DFB\u52A0\u5230 args \u5BF9\u8C61\n  for (const item of qs.split('&').map(kv => kv.split('='))) {\n    const name = decodeURIComponent(item[0])\n    const value = decodeURIComponent(item[1])\n\n    if (name.length)\n      args[name] = value\n  }\n\n  return args\n}\n"})}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-ts",children:"window.location.assign('https://www.new.com')\nwindow.location = 'https://www.new.com'\nwindow.location.href = 'https://www.new.com'\nwindow.location.replace('https://www.new.com') // No new history\nwindow.location.reload() // \u91CD\u65B0\u52A0\u8F7D, \u53EF\u80FD\u662F\u4ECE\u7F13\u5B58\u52A0\u8F7D\nwindow.location.reload(true) // \u91CD\u65B0\u52A0\u8F7D, \u4ECE\u670D\u52A1\u5668\u52A0\u8F7D\n"})}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-ts",children:"window.addEventListener(\n  'hashchange',\n  (event) => {\n    // event.oldURL\n    // event.nweURL\n    if (window.location.hash === '#someCoolFeature')\n      someCoolFeature()\n  },\n  false\n)\n"})}),"\n",(0,r.jsx)(e.h2,{id:"navigator",children:"Navigator"}),"\n",(0,r.jsxs)(e.p,{children:[(0,r.jsx)(e.code,{children:"navigator"})," \u5BF9\u8C61\u5305\u542B\u4EE5\u4E0B\u63A5\u53E3\u5B9A\u4E49\u7684\u5C5E\u6027\u548C\u65B9\u6CD5:"]}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"NavigatorID."}),"\n",(0,r.jsx)(e.li,{children:"NavigatorLanguage."}),"\n",(0,r.jsx)(e.li,{children:"NavigatorOnLine."}),"\n",(0,r.jsx)(e.li,{children:"NavigatorContentUtils."}),"\n",(0,r.jsx)(e.li,{children:"NavigatorStorage."}),"\n",(0,r.jsx)(e.li,{children:"NavigatorStorageUtils."}),"\n",(0,r.jsx)(e.li,{children:"NavigatorConcurrentHardware."}),"\n",(0,r.jsx)(e.li,{children:"NavigatorPlugins."}),"\n",(0,r.jsx)(e.li,{children:"NavigatorUserMedia."}),"\n"]}),"\n",(0,r.jsxs)(e.table,{children:[(0,r.jsx)(e.thead,{children:(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.th,{children:"Property/Method"}),(0,r.jsx)(e.th,{})]})}),(0,r.jsxs)(e.tbody,{children:[(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"battery"}),(0,r.jsx)(e.td,{children:"BatteryManager (Battery Status API)"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"clipboard"}),(0,r.jsx)(e.td,{children:"Clipboard API"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"connection"}),(0,r.jsx)(e.td,{children:"NetworkInformation (Network Information API)"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"cookieEnabled"}),(0,r.jsx)(e.td,{children:"Boolean, \u662F\u5426\u542F\u7528\u4E86 cookie"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"credentials"}),(0,r.jsx)(e.td,{children:"CredentialsContainer (Credentials Management API)"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"deviceMemory"}),(0,r.jsx)(e.td,{children:"\u5355\u4F4D\u4E3A GB \u7684\u8BBE\u5907\u5185\u5B58\u5BB9\u91CF"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"doNotTrack"}),(0,r.jsxs)(e.td,{children:["\u7528\u6237\u7684",(0,r.jsx)(e.code,{children:"\u4E0D\u8DDF\u8E2A"})," (",(0,r.jsx)(e.code,{children:"do-not-track"}),") \u8BBE\u7F6E"]})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"geolocation"}),(0,r.jsx)(e.td,{children:"Geolocation (Geolocation API)"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"hardwareConcurrency"}),(0,r.jsx)(e.td,{children:"\u8BBE\u5907\u7684\u5904\u7406\u5668\u6838\u5FC3\u6570\u91CF"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"language"}),(0,r.jsx)(e.td,{children:"\u6D4F\u89C8\u5668\u7684\u4E3B\u8BED\u8A00"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"languages"}),(0,r.jsx)(e.td,{children:"\u6D4F\u89C8\u5668\u504F\u597D\u7684\u8BED\u8A00\u6570\u7EC4"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"locks"}),(0,r.jsx)(e.td,{children:"LockManager (Web Locks API)"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"mediaCapabilities"}),(0,r.jsx)(e.td,{children:"MediaCapabilities (Media Capabilities API)"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"mediaDevices"}),(0,r.jsx)(e.td,{children:"\u53EF\u7528\u7684\u5A92\u4F53\u8BBE\u5907"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"maxTouchPoints"}),(0,r.jsx)(e.td,{children:"\u8BBE\u5907\u89E6\u6478\u5C4F\u652F\u6301\u7684\u6700\u5927\u89E6\u70B9\u6570"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"onLine"}),(0,r.jsx)(e.td,{children:"Boolean, \u8868\u793A\u6D4F\u89C8\u5668\u662F\u5426\u8054\u7F51"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"pdfViewerEnabled"}),(0,r.jsx)(e.td,{children:"Boolean, \u662F\u5426\u542F\u7528\u4E86 PDF \u529F\u80FD"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"permissions"}),(0,r.jsx)(e.td,{children:"Permissions (Permissions API)"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"serviceWorker"}),(0,r.jsx)(e.td,{children:"ServiceWorkerContainer"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"storage"}),(0,r.jsx)(e.td,{children:"StorageManager (Storage API)"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"userAgent"}),(0,r.jsxs)(e.td,{children:["\u6D4F\u89C8\u5668\u7684\u7528\u6237\u4EE3\u7406\u5B57\u7B26\u4E32 (",(0,r.jsx)(e.strong,{children:"\u9ED8\u8BA4\u53EA\u8BFB"}),")"]})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"vendor"}),(0,r.jsx)(e.td,{children:"\u6D4F\u89C8\u5668\u7684\u5382\u5546\u540D\u79F0"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"webdriver"}),(0,r.jsx)(e.td,{children:"\u6D4F\u89C8\u5668\u5F53\u524D\u662F\u5426\u88AB\u81EA\u52A8\u5316\u7A0B\u5E8F\u63A7\u5236"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"xr"}),(0,r.jsx)(e.td,{children:"XRSystem (WebXR Device API)"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"registerProtocolHandler()"}),(0,r.jsx)(e.td,{children:"\u5C06\u4E00\u4E2A\u7F51\u7AD9\u6CE8\u518C\u4E3A\u7279\u5B9A\u534F\u8BAE\u7684\u5904\u7406\u7A0B\u5E8F"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"sendBeacon()"}),(0,r.jsx)(e.td,{children:"\u5F02\u6B65\u4F20\u8F93\u4E00\u4E9B\u5C0F\u6570\u636E"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"share()"}),(0,r.jsx)(e.td,{children:"\u5F53\u524D\u5E73\u53F0\u7684\u539F\u751F\u5171\u4EAB\u673A\u5236"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"vibrate()"}),(0,r.jsx)(e.td,{children:"\u89E6\u53D1\u8BBE\u5907\u632F\u52A8"})]})]})]}),"\n",(0,r.jsx)(e.h3,{id:"online",children:"Online"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-ts",children:"const connectionStateChange = () => console.log(navigator.onLine)\nwindow.addEventListener('online', connectionStateChange)\nwindow.addEventListener('offline', connectionStateChange)\n// \u8BBE\u5907\u8054\u7F51\u65F6:\n// true\n// \u8BBE\u5907\u65AD\u7F51\u65F6:\n// false\n"})}),"\n",(0,r.jsx)(e.h3,{id:"connection",children:"Connection"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-ts",children:"const downlink = navigator.connection.downlink\nconst downlinkMax = navigator.connection.downlinkMax\nconst rtt = navigator.connection.rtt\nconst type = navigator.connection.type // wifi/bluetooth/cellular/ethernet/mixed/unknown/none.\nconst networkType = navigator.connection.effectiveType // 2G - 5G.\nconst saveData = navigator.connection.saveData // Boolean: Reduced data mode.\n\nnavigator.connection.addEventListener('change', changeHandler)\n"})}),"\n",(0,r.jsx)(e.h3,{id:"protocol",children:"Protocol"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-ts",children:"navigator.registerProtocolHandler(\n  'mailto',\n  'http://www.somemailclient.com?cmd=%s',\n  'Some Mail Client'\n)\n"})}),"\n",(0,r.jsx)(e.h3,{id:"battery",children:"Battery"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-ts",children:"navigator.getBattery().then((battery) => {\n  // \u6DFB\u52A0\u5145\u7535\u72B6\u6001\u53D8\u5316\u65F6\u7684\u5904\u7406\u7A0B\u5E8F\n  const chargingChangeHandler = () => console.log(battery.charging)\n  battery.addEventListener('chargingchange', chargingChangeHandler)\n  // \u6DFB\u52A0\u5145\u7535\u65F6\u95F4\u53D8\u5316\u65F6\u7684\u5904\u7406\u7A0B\u5E8F\n  const chargingTimeChangeHandler = () => console.log(battery.chargingTime)\n  battery.addEventListener('chargingtimechange', chargingTimeChangeHandler)\n  // \u6DFB\u52A0\u653E\u7535\u65F6\u95F4\u53D8\u5316\u65F6\u7684\u5904\u7406\u7A0B\u5E8F\n  const dischargingTimeChangeHandler = () =>\n    console.log(battery.dischargingTime)\n  battery.addEventListener(\n    'dischargingtimechange',\n    dischargingTimeChangeHandler\n  )\n  // \u6DFB\u52A0\u7535\u91CF\u767E\u5206\u6BD4\u53D8\u5316\u65F6\u7684\u5904\u7406\u7A0B\u5E8F\n  const levelChangeHandler = () => console.log(battery.level * 100)\n  battery.addEventListener('levelchange', levelChangeHandler)\n})\n"})}),"\n",(0,r.jsx)(e.h3,{id:"storage",children:"Storage"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-ts",children:"navigator.storage.estimate().then((estimate) => {\n  console.log(((estimate.usage / estimate.quota) * 100).toFixed(2))\n})\n"})}),"\n",(0,r.jsx)(e.h3,{id:"geolocation",children:"Geolocation"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-ts",children:"if (window.navigator.geolocation) {\n  // getCurrentPosition\u7B2C\u4E09\u4E2A\u53C2\u6570\u4E3A\u53EF\u9009\u53C2\u6570\n  navigator.geolocation.getCurrentPosition(locationSuccess, locationError, {\n    // \u6307\u793A\u6D4F\u89C8\u5668\u83B7\u53D6\u9AD8\u7CBE\u5EA6\u7684\u4F4D\u7F6E, \u9ED8\u8BA4\u4E3Afalse\n    enableHighAccuracy: true,\n    // \u6307\u5B9A\u83B7\u53D6\u5730\u7406\u4F4D\u7F6E\u7684\u8D85\u65F6\u65F6\u95F4, \u9ED8\u8BA4\u4E0D\u9650\u65F6, \u5355\u4F4D\u4E3A\u6BEB\u79D2\n    timeout: 5000,\n    // \u6700\u957F\u6709\u6548\u671F, \u5728\u91CD\u590D\u83B7\u53D6\u5730\u7406\u4F4D\u7F6E\u65F6, \u6B64\u53C2\u6570\u6307\u5B9A\u591A\u4E45\u518D\u6B21\u83B7\u53D6\u4F4D\u7F6E.\n    maximumAge: 3000,\n  })\n} else {\n  alert('Your browser does not support Geolocation!')\n}\n"})}),"\n",(0,r.jsx)(e.p,{children:"locationError \u4E3A\u83B7\u53D6\u4F4D\u7F6E\u4FE1\u606F\u5931\u8D25\u7684\u56DE\u8C03\u51FD\u6570, \u53EF\u4EE5\u6839\u636E\u9519\u8BEF\u7C7B\u578B\u63D0\u793A\u4FE1\u606F:"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-ts",children:"function locationError(error) {\n  switch (error.code) {\n    case error.TIMEOUT:\n      showError('A timeout occurred! Please try again!')\n      break\n    case error.POSITION_UNAVAILABLE:\n      showError('We can\\'t detect your location. Sorry!')\n      break\n    case error.PERMISSION_DENIED:\n      showError('Please allow geolocation access for this to work.')\n      break\n    case error.UNKNOWN_ERROR:\n      showError('An unknown error occurred!')\n      break\n    default:\n      throw new Error('Unsupported error!')\n  }\n}\n"})}),"\n",(0,r.jsx)(e.p,{children:"locationSuccess \u4E3A\u83B7\u53D6\u4F4D\u7F6E\u4FE1\u606F\u6210\u529F\u7684\u56DE\u8C03\u51FD\u6570,\n\u8FD4\u56DE\u7684\u6570\u636E\u4E2D\u5305\u542B\u7ECF\u7EAC\u5EA6\u7B49\u4FE1\u606F:"}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.code,{children:"position.timestamp"}),"."]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.code,{children:"position.coords"}),":","\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.code,{children:"latitude"}),": \u7EF4\u5EA6."]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.code,{children:"longitude"}),": \u7ECF\u5EA6."]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.code,{children:"accuracy"}),"."]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.code,{children:"altitude"}),": \u6D77\u62D4\u9AD8\u5EA6."]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.code,{children:"altitudeAccuracy"}),"."]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(e.p,{children:"\u7ED3\u5408 Google Map API \u5373\u53EF\u5728\u5730\u56FE\u4E2D\u663E\u793A\u5F53\u524D\u7528\u6237\u7684\u4F4D\u7F6E\u4FE1\u606F:"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-ts",children:"function locationSuccess(position) {\n  const coords = position.coords\n  const latlng = new google.maps.LatLng(\n    // \u7EF4\u5EA6\n    coords.latitude,\n    // \u7CBE\u5EA6\n    coords.longitude\n  )\n  const myOptions = {\n    // \u5730\u56FE\u653E\u5927\u500D\u6570\n    zoom: 12,\n    // \u5730\u56FE\u4E2D\u5FC3\u8BBE\u4E3A\u6307\u5B9A\u5750\u6807\u70B9\n    center: latlng,\n    // \u5730\u56FE\u7C7B\u578B\n    mapTypeId: google.maps.MapTypeId.ROADMAP,\n  }\n\n  // \u521B\u5EFA\u5730\u56FE\u5E76\u8F93\u51FA\u5230\u9875\u9762\n  const myMap = new google.maps.Map(document.getElementById('map'), myOptions)\n\n  // \u521B\u5EFA\u6807\u8BB0\n  const marker = new google.maps.Marker({\n    // \u6807\u6CE8\u6307\u5B9A\u7684\u7ECF\u7EAC\u5EA6\u5750\u6807\u70B9\n    position: latlng,\n    // \u6307\u5B9A\u7528\u4E8E\u6807\u6CE8\u7684\u5730\u56FE\n    map: myMap,\n  })\n\n  // \u521B\u5EFA\u6807\u6CE8\u7A97\u53E3\n  const infoWindow = new google.maps.InfoWindow({\n    content: `\u60A8\u5728\u8FD9\u91CC<br/>\u7EAC\u5EA6: ${coords.latitude}<br/>\u7ECF\u5EA6: ${coords.longitude}`,\n  })\n\n  // \u6253\u5F00\u6807\u6CE8\u7A97\u53E3\n  infoWindow.open(myMap, marker)\n}\n"})}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-ts",children:"navigator.geolocation.watchPosition(\n  locationSuccess,\n  locationError,\n  positionOption\n)\n"})}),"\n",(0,r.jsx)(e.h3,{id:"user-agent",children:"User Agent"}),"\n",(0,r.jsxs)(e.p,{children:[(0,r.jsx)(e.code,{children:"navigator.userAgent"})," \u7279\u522B\u590D\u6742:"]}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"\u5386\u53F2\u517C\u5BB9\u95EE\u9898: Netscape -> IE -> Firefox -> Safari -> Chrome -> Edge."}),"\n",(0,r.jsxs)(e.li,{children:["\u6BCF\u4E00\u4E2A\u65B0\u7684\u6D4F\u89C8\u5668\u5382\u5546\u5FC5\u987B\u4FDD\u8BC1\u65E7\u7F51\u7AD9\u7684\u68C0\u6D4B\u811A\u672C\u80FD\u6B63\u5E38\u8BC6\u522B\u81EA\u5BB6\u6D4F\u89C8\u5668,\n\u4ECE\u800C\u6B63\u5E38\u6253\u5F00\u7F51\u9875, \u5BFC\u81F4 ",(0,r.jsx)(e.code,{children:"navigator.userAgent"})," \u4E0D\u65AD\u53D8\u957F."]}),"\n",(0,r.jsxs)(e.li,{children:["User-Agent detection ",(0,r.jsx)(e.a,{href:"https://github.com/faisalman/ua-parser-js",children:"parser"}),"."]}),"\n"]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-ts",children:"console.log(navigator.userAgent)\n// 'Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko)\n// Chrome/101.0.4922.0 Safari/537.36 Edg/101.0.1198.0'\n"})}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-ts",children:"class BrowserDetector {\n  constructor() {\n    // \u6D4B\u8BD5\u6761\u4EF6\u7F16\u8BD1\n    // IE6~10 \u652F\u6301\n\n    this.isIE_Gte6Lte10 = /* @cc_on!@ */ false\n    // \u6D4B\u8BD5 documentMode\n    // IE7~11 \u652F\u6301\n    this.isIE_Gte7Lte11 = !!document.documentMode\n    // \u6D4B\u8BD5 StyleMedia \u6784\u9020\u51FD\u6570\n    // Edge 20 \u53CA\u4EE5\u4E0A\u7248\u672C\u652F\u6301\n    this.isEdge_Gte20 = !!window.StyleMedia\n    // \u6D4B\u8BD5 Firefox \u4E13\u6709\u6269\u5C55\u5B89\u88C5 API\n    // \u6240\u6709\u7248\u672C\u7684 Firefox \u90FD\u652F\u6301\n    this.isFirefox_Gte1 = typeof InstallTrigger !== 'undefined'\n    // \u6D4B\u8BD5 chrome \u5BF9\u8C61\u53CA\u5176 webstore \u5C5E\u6027\n    // Opera \u7684\u67D0\u4E9B\u7248\u672C\u6709 window.chrome, \u4F46\u6CA1\u6709 window.chrome.webstore\n    // \u6240\u6709\u7248\u672C\u7684 Chrome \u90FD\u652F\u6301\n    this.isChrome_Gte1 = !!window.chrome && !!window.chrome.webstore\n    // Safari \u65E9\u671F\u7248\u672C\u4F1A\u7ED9\u6784\u9020\u51FD\u6570\u7684\u6807\u7B7E\u7B26\u8FFD\u52A0 \"Constructor\"\u5B57\u6837, \u5982:\n    // window.Element.toString(); // [object ElementConstructor]\n    // Safari 3~9.1 \u652F\u6301\n    this.isSafari_Gte3Lte9_1 = /constructor/i.test(window.Element)\n    // \u63A8\u9001\u901A\u77E5 API \u66B4\u9732\u5728 window \u5BF9\u8C61\u4E0A\n    // \u4F7F\u7528 IIFE \u9ED8\u8BA4\u53C2\u6570\u503C\u4EE5\u907F\u514D\u5BF9 undefined \u8C03\u7528 toString()\n    // Safari 7.1 \u53CA\u4EE5\u4E0A\u7248\u672C\u652F\u6301\n    this.isSafari_Gte7_1 = (({ pushNotification = {} } = {}) =>\n      pushNotification.toString() === '[object SafariRemoteNotification]')(\n      window.safari\n    )\n    // \u6D4B\u8BD5 addons \u5C5E\u6027\n    // Opera 20 \u53CA\u4EE5\u4E0A\u7248\u672C\u652F\u6301\n    this.isOpera_Gte20 = !!window.opr && !!window.opr.addons\n  }\n\n  isIE() {\n    return this.isIE_Gte6Lte10 || this.isIE_Gte7Lte11\n  }\n\n  isEdge() {\n    return this.isEdge_Gte20 && !this.isIE()\n  }\n\n  isFirefox() {\n    return this.isFirefox_Gte1\n  }\n\n  isChrome() {\n    return this.isChrome_Gte1\n  }\n\n  isSafari() {\n    return this.isSafari_Gte3Lte9_1 || this.isSafari_Gte7_1\n  }\n\n  isOpera() {\n    return this.isOpera_Gte20\n  }\n}\n"})}),"\n",(0,r.jsxs)(e.admonition,{title:"Feature Detection",type:"caution",children:[(0,r.jsxs)(e.p,{children:[(0,r.jsx)(e.strong,{children:"\u4E0D\u4F9D\u8D56 User-Agent \u63A8\u65AD\u6D4F\u89C8\u5668\u7248\u672C"}),", \u5BB9\u6613\u63A8\u65AD\u9519\u8BEF,\n\u5EFA\u8BAE\u4F7F\u7528 ",(0,r.jsx)(e.a,{href:"https://developer.mozilla.org/docs/Learn_web_development/Extensions/Testing/Feature_detection",children:"feature detection"}),":"]}),(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-ts",children:"// \u68C0\u6D4B\u6D4F\u89C8\u5668\u662F\u5426\u652F\u6301 Netscape \u5F0F\u7684\u63D2\u4EF6\nconst hasNSPlugins = !!(navigator.plugins && navigator.plugins.length)\n// \u68C0\u6D4B\u6D4F\u89C8\u5668\u662F\u5426\u5177\u6709 DOM Level 1 \u80FD\u529B\nconst hasDOM1 = !!(\n  document.getElementById\n  && document.createElement\n  && document.getElementsByTagName\n)\n\n// \u7279\u6027\u68C0\u6D4B\nif (document.getElementById) {\n  element = document.getElementById(id)\n}\n"})})]}),"\n",(0,r.jsxs)(e.p,{children:["Detect ",(0,r.jsx)(e.a,{href:"https://evilmartians.com/chronicles/how-to-detect-safari-and-ios-versions-with-ease",children:"Safari and iOS versions"}),":"]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-ts",children:"// Desktop Safari, all mobile WebKit browsers on iOS and webview iOS\nfunction isWebkit() {\n  return 'GestureEvent' in window\n}\n\n// All mobile webkit browsers and webview iOS\nfunction isMobileWebKit() {\n  return 'ongesturechange' in window\n}\n\n// Desktop Safari\nfunction isDesktopWebKit() {\n  return (\n    typeof window !== 'undefined'\n    && 'safari' in window\n    && 'pushNotification' in window.safari\n  )\n}\n\n// Use `CSS.supports` in Javascript or `@supports` in CSS to check if the feature is available.\nconst supportsManagedMediaSource = 'ManagedMediaSource' in window\n\n// true on iOS 17.0+ (Safari 17.0+)\nconst isAtLeastIOS17 = CSS.supports('contain-intrinsic-size', '100px')\n\n// Combine to isolate 17.0\nfunction isOnlyIOS170() {\n  return isAtLeastIOS17 && !supportsManagedMediaSource\n}\n\nif (isMobileWebKit()) {\n  if (isOnlyIOS170()) {\n    // Running iOS 17.0 exactly\n  } else if (isAtLeastIOS17) {\n    // Safe to use iOS 17+ features\n  } else {\n    // Fallback for older iOS versions\n  }\n}\n"})}),"\n",(0,r.jsx)(e.h2,{id:"screen",children:"Screen"}),"\n",(0,r.jsx)(e.p,{children:"\u6D4F\u89C8\u5668\u7A97\u53E3\u5916\u9762\u7684\u5BA2\u6237\u7AEF\u663E\u793A\u5668\u7684\u4FE1\u606F:"}),"\n",(0,r.jsxs)(e.table,{children:[(0,r.jsx)(e.thead,{children:(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.th,{children:"Property"}),(0,r.jsx)(e.th,{})]})}),(0,r.jsxs)(e.tbody,{children:[(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"availHeight"}),(0,r.jsx)(e.td,{children:"\u5C4F\u5E55\u50CF\u7D20\u9AD8\u5EA6\u51CF\u53BB\u7CFB\u7EDF\u7EC4\u4EF6\u9AD8\u5EA6 (\u53EA\u8BFB)"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"availWidth"}),(0,r.jsx)(e.td,{children:"\u5C4F\u5E55\u50CF\u7D20\u5BBD\u5EA6\u51CF\u53BB\u7CFB\u7EDF\u7EC4\u4EF6\u5BBD\u5EA6 (\u53EA\u8BFB)"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"colorDepth"}),(0,r.jsx)(e.td,{children:"\u8868\u793A\u5C4F\u5E55\u989C\u8272\u7684\u4F4D\u6570: \u591A\u6570\u7CFB\u7EDF\u662F 32 (\u53EA\u8BFB)"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"height"}),(0,r.jsx)(e.td,{children:"\u5C4F\u5E55\u50CF\u7D20\u9AD8\u5EA6"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"width"}),(0,r.jsx)(e.td,{children:"\u5C4F\u5E55\u50CF\u7D20\u5BBD\u5EA6"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"pixelDepth"}),(0,r.jsx)(e.td,{children:"\u5C4F\u5E55\u7684\u4F4D\u6DF1 (\u53EA\u8BFB)"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"orientation"}),(0,r.jsx)(e.td,{children:"Screen Orientation API \u4E2D\u5C4F\u5E55\u7684\u671D\u5411"})]})]})]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-ts",children:"const screen = window.screen\n\nconsole.log(screen.colorDepth) // 24\nconsole.log(screen.pixelDepth) // 24\n\n// \u5782\u76F4\u770B\nconsole.log(screen.orientation.type) // portrait-primary\nconsole.log(screen.orientation.angle) // 0\n// \u5411\u5DE6\u8F6C\nconsole.log(screen.orientation.type) // landscape-primary\nconsole.log(screen.orientation.angle) // 90\n// \u5411\u53F3\u8F6C\nconsole.log(screen.orientation.type) // landscape-secondary\nconsole.log(screen.orientation.angle) // 270\n"})}),"\n",(0,r.jsxs)(e.p,{children:["\u5168\u5C4F ",(0,r.jsx)(e.a,{href:"https://developer.mozilla.org/docs/Web/API/Fullscreen_API",children:"API"}),":"]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-ts",children:"function toggleFullscreen() {\n  const elem = document.querySelector('video')\n\n  if (document.fullscreenElement) {\n    document\n      .exitFullscreen()\n      .then(() => console.log('Document Exited from Full screen mode'))\n      .catch(err => console.error(err))\n  } else {\n    elem\n      .requestFullscreen()\n      .then(() => {})\n      .catch((err) => {\n        alert(\n          `Error occurred while switch into fullscreen mode: ${err.message} (${err.name})`\n        )\n      })\n  }\n}\n\ndocument.onclick = function (event) {\n  if (document.fullscreenElement) {\n    document\n      .exitFullscreen()\n      .then(() => console.log('Document Exited from Full screen mode'))\n      .catch(err => console.error(err))\n  } else {\n    document.documentElement\n      .requestFullscreen({ navigationUI: 'show' })\n      .then(() => {})\n      .catch((err) => {\n        alert(\n          `Error occurred while switch into fullscreen mode: ${err.message} (${err.name})`\n        )\n      })\n  }\n}\n"})}),"\n",(0,r.jsx)(e.h2,{id:"history",children:"History"}),"\n",(0,r.jsx)(e.h3,{id:"navigation",children:"Navigation"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-ts",children:"const history = window.history\n\n// \u540E\u9000\u4E00\u9875\nhistory.go(-1)\n// \u524D\u8FDB\u4E00\u9875\nhistory.go(1)\n// \u524D\u8FDB\u4E24\u9875\nhistory.go(2)\n// \u5BFC\u822A\u5230\u6700\u8FD1\u7684 new.com \u9875\u9762\nhistory.go('new.com')\n// \u5BFC\u822A\u5230\u6700\u8FD1\u7684 example.net \u9875\u9762\nhistory.go('example.net')\n// \u540E\u9000\u4E00\u9875\nhistory.back()\n// \u524D\u8FDB\u4E00\u9875\nhistory.forward()\n\nif (history.length === 1)\n  console.log('\u8FD9\u662F\u7528\u6237\u7A97\u53E3\u4E2D\u7684\u7B2C\u4E00\u4E2A\u9875\u9762')\n\nif (history.scrollRestoration)\n  history.scrollRestoration = 'manual'\n"})}),"\n",(0,r.jsx)(e.h3,{id:"state",children:"State"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-ts",children:"const history = window.history\n\nconst stateObject = { foo: 'bar' }\nhistory.pushState(stateObject, 'My title', 'baz.html')\n\nhistory.replaceState({ newFoo: 'newBar' }, 'New title') // No new history state.\n\nwindow.addEventListener('popstate', (event) => {\n  const state = event.state\n\n  if (state) {\n    // \u7B2C\u4E00\u4E2A\u9875\u9762\u52A0\u8F7D\u65F6\u72B6\u6001\u662F null\n    processState(state)\n  }\n})\n"})})]})}function h(n={}){let{wrapper:e}={...(0,s.R)(),...n.components};return e?(0,r.jsx)(e,{...n,children:(0,r.jsx)(d,{...n})}):d(n)}},30416(n,e,t){t.d(e,{R:()=>o,x:()=>l});var i=t(59471);let r={},s=i.createContext(r);function o(n){let e=i.useContext(s);return i.useMemo(function(){return"function"==typeof n?n(e):{...e,...n}},[e,n])}function l(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(r):n.components||r:o(n.components),i.createElement(s.Provider,{value:e},n.children)}}}]);