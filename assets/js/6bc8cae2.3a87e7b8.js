"use strict";(self.webpackChunknotes=self.webpackChunknotes||[]).push([["15304"],{47112(e,n,r){r.r(n),r.d(n,{metadata:()=>t,default:()=>b,frontMatter:()=>o,contentTitle:()=>a,toc:()=>d,assets:()=>l});var t=JSON.parse('{"id":"programming/design/patterns/observer","title":"Observer","description":"- \u88AB\u89C2\u5BDF\u8005 (Subject) \u7EF4\u62A4\u4E00\u7EC4\u89C2\u5BDF\u8005\u5217\u8868,","source":"@site/content/programming/design/patterns/observer.md","sourceDirName":"programming/design/patterns","slug":"/programming/design/patterns/observer","permalink":"/notes/programming/design/patterns/observer","draft":false,"unlisted":false,"editUrl":"https://github.com/sabertazimi/notes/edit/main/content/programming/design/patterns/observer.md","tags":[{"inline":true,"label":"Programming","permalink":"/notes/tags/programming"},{"inline":true,"label":"Design","permalink":"/notes/tags/design"},{"inline":true,"label":"Design Pattern","permalink":"/notes/tags/design-pattern"},{"inline":true,"label":"Behavioral Pattern","permalink":"/notes/tags/behavioral-pattern"}],"version":"current","lastUpdatedBy":"Sabertaz","lastUpdatedAt":1769518084000,"sidebarPosition":17,"frontMatter":{"sidebar_position":17,"tags":["Programming","Design","Design Pattern","Behavioral Pattern"]},"sidebar":"tutorialSidebar","previous":{"title":"Mediator","permalink":"/notes/programming/design/patterns/mediator"},"next":{"title":"Pub-Sub","permalink":"/notes/programming/design/patterns/pub-sub"}}'),s=r(62615),i=r(30416);let o={sidebar_position:17,tags:["Programming","Design","Design Pattern","Behavioral Pattern"]},a="Observer",l={},d=[];function c(e){let n={admonition:"admonition",code:"code",h1:"h1",header:"header",li:"li",pre:"pre",ul:"ul",...(0,i.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"observer",children:"Observer"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["\u88AB\u89C2\u5BDF\u8005 (",(0,s.jsx)(n.code,{children:"Subject"}),") \u7EF4\u62A4\u4E00\u7EC4\u89C2\u5BDF\u8005\u5217\u8868,\n\u6BCF\u5F53\u88AB\u89C2\u5BDF\u8005\u72B6\u6001\u6539\u53D8\u65F6,\n\u8C03\u7528 ",(0,s.jsx)(n.code,{children:"notify"})," \u51FD\u6570,\n\u6B64\u51FD\u6570\u904D\u5386\u8C03\u7528\u89C2\u5BDF\u8005 (",(0,s.jsx)(n.code,{children:"Observer"}),") \u7684 ",(0,s.jsx)(n.code,{children:"update"})," \u51FD\u6570 (\u81EA\u5B9A\u4E49\u903B\u8F91)."]}),"\n",(0,s.jsxs)(n.li,{children:["Decouple ",(0,s.jsx)(n.code,{children:"Subject"})," and ",(0,s.jsx)(n.code,{children:"Observer"}),":\neach depends on ",(0,s.jsx)(n.code,{children:"Abstraction"})," not ",(0,s.jsx)(n.code,{children:"Implementation"}),"."]}),"\n",(0,s.jsx)(n.li,{children:"\u6446\u8131\u6301\u7EED\u8F6E\u8BE2\u6A21\u5F0F, \u5728\u5408\u9002\u65F6\u673A\u53D1\u5E03\u6D88\u606F."}),"\n"]}),"\n",(0,s.jsx)(n.admonition,{title:"Observer Use Case",type:"tip",children:(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Decouple."}),"\n",(0,s.jsx)(n.li,{children:"\u8DE8\u5C42\u7EA7\u901A\u4FE1."}),"\n",(0,s.jsx)(n.li,{children:"Message channel."}),"\n",(0,s.jsx)(n.li,{children:"\u5F02\u6B65\u7F16\u7A0B."}),"\n",(0,s.jsx)(n.li,{children:"Event handling."}),"\n"]})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:"class ObserverList {\n  constructor() {\n    this.observerList = []\n  }\n\n  add(obj) {\n    return this.observerList.push(obj)\n  }\n\n  count() {\n    return this.observerList.length\n  }\n\n  get(index) {\n    if (index > -1 && index < this.observerList.length)\n      return this.observerList[index]\n  }\n\n  indexOf(obj, startIndex) {\n    let i = startIndex\n\n    while (i < this.observerList.length) {\n      if (this.observerList[i] === obj)\n        return i\n\n      i++\n    }\n\n    return -1\n  }\n\n  removeAt(index) {\n    this.observerList.splice(index, 1)\n  }\n}\n\nclass Subject {\n  constructor() {\n    this.observers = new ObserverList()\n  }\n\n  addObserver(observer) {\n    this.observers.add(observer)\n  }\n\n  removeObserver(observer) {\n    this.observers.removeAt(this.observers.indexOf(observer, 0))\n  }\n\n  notify(context) {\n    const observerCount = this.observers.count()\n\n    for (let i = 0; i < observerCount; i++)\n      this.observers.get(i).update(context)\n  }\n}\n\nclass Observer {\n  update(context) {}\n}\n"})})]})}function b(e={}){let{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(c,{...e})}):c(e)}},30416(e,n,r){r.d(n,{R:()=>o,x:()=>a});var t=r(59471);let s={},i=t.createContext(s);function o(e){let n=t.useContext(i);return t.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:o(e.components),t.createElement(i.Provider,{value:n},e.children)}}}]);