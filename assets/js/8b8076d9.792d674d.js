"use strict";(self.webpackChunknotes=self.webpackChunknotes||[]).push([["95032"],{26359(n,e,t){t.r(e),t.d(e,{metadata:()=>i,default:()=>u,frontMatter:()=>o,contentTitle:()=>l,toc:()=>c,assets:()=>a});var i=JSON.parse('{"id":"programming/linux/wsl","title":"WSL","description":"Installation","source":"@site/content/programming/linux/wsl.md","sourceDirName":"programming/linux","slug":"/programming/linux/wsl","permalink":"/notes/programming/linux/wsl","draft":false,"unlisted":false,"editUrl":"https://github.com/sabertazimi/notes/edit/main/content/programming/linux/wsl.md","tags":[{"inline":true,"label":"Programming","permalink":"/notes/tags/programming"},{"inline":true,"label":"OS","permalink":"/notes/tags/os"},{"inline":true,"label":"Linux","permalink":"/notes/tags/linux"},{"inline":true,"label":"Distribution","permalink":"/notes/tags/distribution"},{"inline":true,"label":"WSL","permalink":"/notes/tags/wsl"}],"version":"current","lastUpdatedBy":"sabertazimi","lastUpdatedAt":1772123501000,"sidebarPosition":42,"frontMatter":{"sidebar_position":42,"tags":["Programming","OS","Linux","Distribution","WSL"]},"sidebar":"tutorialSidebar","previous":{"title":"Ubuntu","permalink":"/notes/programming/linux/ubuntu"},"next":{"title":"Desktop","permalink":"/notes/programming/linux/desktop"}}'),s=t(62615),r=t(30416);let o={sidebar_position:42,tags:["Programming","OS","Linux","Distribution","WSL"]},l="WSL",a={},c=[{value:"Installation",id:"installation",level:2},{value:"Connection",id:"connection",level:2},{value:"Proxy",id:"proxy",level:2},{value:"Wi-Fi",id:"wi-fi",level:2}];function d(n){let e={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",header:"header",p:"p",pre:"pre",...(0,r.R)(),...n.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(e.header,{children:(0,s.jsx)(e.h1,{id:"wsl",children:"WSL"})}),"\n",(0,s.jsx)(e.h2,{id:"installation",children:"Installation"}),"\n",(0,s.jsxs)(e.p,{children:[(0,s.jsx)(e.a,{href:"https://docs.microsoft.com/windows/wsl/install-manual",children:"Upgrade to WSL2"}),":"]}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-bash",children:"dism.exe /online /enable-feature /featurename:Microsoft-Windows-Subsystem-Linux /all /norestart\ndism.exe /online /enable-feature /featurename:VirtualMachinePlatform /all /norestart\n\n# Restart computer.\n\nwget https://wslstorestorage.blob.core.windows.net/wslblob/wsl_update_x64.msi\nwsl --set-default-version 2\nwsl --set-version Ubuntu-22.04 2\nwsl -l -v\n"})}),"\n",(0,s.jsx)(e.h2,{id:"connection",children:"Connection"}),"\n",(0,s.jsxs)(e.p,{children:[(0,s.jsx)(e.a,{href:"https://github.com/microsoft/WSL/issues/4461#issuecomment-1174011640",children:"Gzip for WSL2"}),":"]}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-bash",children:"echo -en '\\x10' | sudo dd of=/usr/bin/gzip count=1 bs=1 conv=notrunc seek=$((0x189))\n"})}),"\n",(0,s.jsxs)(e.p,{children:[(0,s.jsx)(e.a,{href:"https://github.com/microsoft/WSL/issues/4194",children:"Winsock for WSL2"}),":"]}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-bash",children:"netsh winsock reset\n"})}),"\n",(0,s.jsx)(e.h2,{id:"proxy",children:"Proxy"}),"\n",(0,s.jsxs)(e.p,{children:[(0,s.jsx)(e.a,{href:"https://learn.microsoft.com/windows/wsl/networking",children:"Network"}),"\nand ",(0,s.jsx)(e.a,{href:"https://zinglix.xyz/2020/04/18/wsl2-proxy",children:"proxy"}),"\nfor WSL2:"]}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-bash",children:'# HostIP=$(cat /etc/resolv.conf | grep nameserver | awk \'{ print $2 }\')\nHostIP=$(ip route show | grep -i default | awk \'{ print $3}\')\nWslIP=$(hostname -I | awk \'{print $1}\')\nPort=1080\nPROXY_SOCKS="socks5://${HostIP}:${Port}"\n\n# For Git CLI.\ngit config --global http.proxy "${PROXY_SOCKS}"\ngit config --global https.proxy "${PROXY_SOCKS}"\n\n# For GitHub CLI.\nexport HTTP_PROXY="${PROXY_SOCKS}"\nexport HTTPS_PROXY="${PROXY_SOCKS}"\n'})}),"\n",(0,s.jsx)(e.admonition,{title:"Socks Client",type:"caution",children:(0,s.jsxs)(e.p,{children:["\u4E3B\u673A\u4EE3\u7406\u5BA2\u6237\u7AEF\u9700\u8981",(0,s.jsx)(e.a,{href:"https://github.com/microsoft/WSL/issues/4402#issuecomment-570474468",children:"\u5141\u8BB8"}),"\nVLAN (\u6216\u5176\u4ED6\u7F51\u7EDC) \u8BBE\u5907\u8BBF\u95EE\u672C\u5730\u4EE3\u7406\u8FDE\u63A5."]})}),"\n",(0,s.jsx)(e.p,{children:"\u5F53\u672C\u5730\u914D\u7F6E\u7CFB\u7EDF\u4EE3\u7406\u540E\uFF0C\u9700\u8981\u66F4\u6539 WSL2 \u7F51\u7EDC\u914D\u7F6E:"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-ini",children:"# ~/.wslconfig\n[wsl2]\nnetworkingMode=mirrored\ndnsTunneling=true\nfirewall=true\nautoProxy=true\n"})}),"\n",(0,s.jsx)(e.h2,{id:"wi-fi",children:"Wi-Fi"}),"\n",(0,s.jsxs)(e.p,{children:["Win 11 MediaTek Wi-Fi 6 delay start:\nset ",(0,s.jsx)(e.code,{children:"Network Connections"})," and ",(0,s.jsx)(e.code,{children:"WLAN AutoConfig"}),"\nto auto-start in services."]})]})}function u(n={}){let{wrapper:e}={...(0,r.R)(),...n.components};return e?(0,s.jsx)(e,{...n,children:(0,s.jsx)(d,{...n})}):d(n)}},30416(n,e,t){t.d(e,{R:()=>o,x:()=>l});var i=t(59471);let s={},r=i.createContext(s);function o(n){let e=i.useContext(r);return i.useMemo(function(){return"function"==typeof n?n(e):{...e,...n}},[e,n])}function l(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(s):n.components||s:o(n.components),i.createElement(r.Provider,{value:e},n.children)}}}]);