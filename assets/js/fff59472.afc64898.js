"use strict";(self.webpackChunknotes=self.webpackChunknotes||[]).push([["93497"],{90873(e,n,i){i.r(n),i.d(n,{metadata:()=>s,default:()=>h,frontMatter:()=>t,contentTitle:()=>c,toc:()=>o,assets:()=>d});var s=JSON.parse('{"id":"web/performance/css","title":"Effective CSS","description":"Will Change","source":"@site/content/web/performance/css.md","sourceDirName":"web/performance","slug":"/web/performance/css","permalink":"/notes/web/performance/css","draft":false,"unlisted":false,"editUrl":"https://github.com/sabertazimi/notes/edit/main/content/web/performance/css.md","tags":[{"inline":true,"label":"Web","permalink":"/notes/tags/web"},{"inline":true,"label":"Performance","permalink":"/notes/tags/performance"},{"inline":true,"label":"CSS","permalink":"/notes/tags/css"}],"version":"current","lastUpdatedBy":"Sabertaz","lastUpdatedAt":1769518084000,"sidebarPosition":3,"frontMatter":{"sidebar_position":3,"tags":["Web","Performance","CSS"]},"sidebar":"tutorialSidebar","previous":{"title":"Effective JavaScript","permalink":"/notes/web/performance/javascript"},"next":{"title":"Cache","permalink":"/notes/web/performance/cache"}}'),l=i(62615),r=i(30416);let t={sidebar_position:3,tags:["Web","Performance","CSS"]},c="Effective CSS",d={},o=[{value:"Will Change",id:"will-change",level:2},{value:"Contain",id:"contain",level:2},{value:"Content Visibility",id:"content-visibility",level:2},{value:"Selectors",id:"selectors",level:2},{value:"Triggers",id:"triggers",level:2},{value:"Loading",id:"loading",level:2},{value:"Animation",id:"animation",level:2},{value:"Frame",id:"frame",level:3},{value:"DevTools",id:"devtools",level:3},{value:"Imports",id:"imports",level:2},{value:"References",id:"references",level:2}];function a(e){let n={a:"a",blockquote:"blockquote",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,r.R)(),...e.components};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(n.header,{children:(0,l.jsx)(n.h1,{id:"effective-css",children:"Effective CSS"})}),"\n",(0,l.jsx)(n.h2,{id:"will-change",children:"Will Change"}),"\n",(0,l.jsx)(n.p,{children:"\u544A\u77E5\u6D4F\u89C8\u5668\u8BE5\u5143\u7D20\u4F1A\u6709\u54EA\u4E9B\u53D8\u5316\u7684\u65B9\u6CD5,\n\u6D4F\u89C8\u5668\u53EF\u5728\u5143\u7D20\u5C5E\u6027\u771F\u6B63\u53D1\u751F\u53D8\u5316\u4E4B\u524D\u63D0\u524D\u505A\u597D\u5BF9\u5E94\u7684\u4F18\u5316\u51C6\u5907\u5DE5\u4F5C:"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-css",children:".will-change-parent:hover .will-change {\n  will-change: auto;\n  will-change: scroll-position;\n  will-change: contents;\n\n  /* <custom-ident> */\n  will-change: transform;\n  will-change: opacity;\n  will-change: left, top;\n}\n"})}),"\n",(0,l.jsx)(n.h2,{id:"contain",children:"Contain"}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.a,{href:"https://developer.chrome.com/blog/css-containment",children:"CSS containment"}),":"]}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"contain"})," \u5C5E\u6027\u5141\u8BB8\u5F00\u53D1\u8005\u58F0\u660E\u5F53\u524D\u5143\u7D20\u548C\u5B83\u7684\u5185\u5BB9\u5C3D\u53EF\u80FD\u7684\u72EC\u7ACB\u4E8E DOM \u6811\u7684\u5176\u4ED6\u90E8\u5206.\n\u8FD9\u4F7F\u5F97\u6D4F\u89C8\u5668\u5728\u91CD\u65B0\u8BA1\u7B97\u5E03\u5C40/\u6837\u5F0F/\u7ED8\u56FE\u6216\u5B83\u4EEC\u7684\u7EC4\u5408\u7684\u65F6\u5019, \u53EA\u4F1A\u5F71\u54CD\u5230\u6709\u9650\u7684 DOM \u533A\u57DF, \u800C\u4E0D\u662F\u6574\u4E2A\u9875\u9762:\n",(0,l.jsx)(n.code,{children:"none | strict | content | [ size || layout || style || paint ]"}),"."]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"size"})," containment:\n\u58F0\u660E\u8FD9\u4E2A\u5143\u7D20\u7684\u5C3A\u5BF8\u4F1A\u53D8\u5316, \u4E0D\u9700\u8981\u53BB\u68C0\u67E5\u5B83\u4F9D\u8D56\u5173\u7CFB\u4E2D\u7684\u5C3A\u5BF8\u53D8\u5316."]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"layout"})," containment:\n\u58F0\u660E\u6CA1\u6709\u5916\u90E8\u5143\u7D20\u53EF\u4EE5\u5F71\u54CD\u5B83\u5185\u90E8\u7684\u5E03\u5C40, \u53CD\u4E4B\u4EA6\u7136."]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"style"})," containment:\n\u58F0\u660E\u90A3\u4E9B\u540C\u65F6\u4F1A\u5F71\u54CD\u8FD9\u4E2A\u5143\u7D20\u548C\u5176\u5B50\u5B59\u5143\u7D20\u7684\u5C5E\u6027, \u90FD\u5728\u8FD9\u4E2A\u5143\u7D20\u7684\u5305\u542B\u8303\u56F4\u5185."]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"paint"})," containment:\n\u58F0\u660E\u8FD9\u4E2A\u5143\u7D20\u7684\u5B50\u5B59\u8282\u70B9\u4E0D\u4F1A\u5728\u5B83\u8FB9\u7F18\u5916\u663E\u793A.\n\u5982\u679C\u4E00\u4E2A\u5143\u7D20\u5728\u89C6\u7A97\u5916\u6216\u56E0\u5176\u4ED6\u539F\u56E0\u5BFC\u81F4\u4E0D\u53EF\u89C1, \u5219\u540C\u6837\u4FDD\u8BC1\u5B83\u7684\u5B50\u5B59\u8282\u70B9\u4E0D\u4F1A\u88AB\u663E\u793A."]}),"\n"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-css",children:".box {\n  /* \u65E0\u5E03\u5C40\u5305\u542B */\n  contain: none;\n\n  /* \u5E03\u5C40\u5305\u542B size/layout/style/paint */\n  contain: strict;\n\n  /* \u5E03\u5C40\u5305\u542B layout/style/paint */\n  contain: content;\n\n  /* \u5E03\u5C40\u5305\u542B size */\n  contain: size;\n\n  /* \u5E03\u5C40\u5305\u542B layout */\n  contain: layout;\n\n  /* \u5E03\u5C40\u5305\u542B style */\n  contain: style;\n\n  /* \u5E03\u5C40\u5305\u542B paint */\n  contain: paint;\n}\n"})}),"\n",(0,l.jsx)(n.h2,{id:"content-visibility",children:"Content Visibility"}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.a,{href:"https://developer.mozilla.org/docs/Web/CSS/content-visibility",children:(0,l.jsx)(n.code,{children:"content-visibility"})}),":"]}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"visible"}),":\nelement contents are laid out and rendered as normal."]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"hidden"}),":\nhide element while ",(0,l.jsx)(n.strong,{children:"preserving its rendering state"}),",\nif there are any changes that need to happen,\nthey only happen when the element is shown again\n(i.e. ",(0,l.jsx)(n.code,{children:"content-visibility: hidden"})," property is removed).\n",(0,l.jsx)(n.code,{children:"display: none"})," destroys element rendering state,\n",(0,l.jsx)(n.code,{children:"visibility: hidden"})," doesn't truly remove element."]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"auto"}),":\nelement turns on ",(0,l.jsx)(n.code,{children:"layout"}),", ",(0,l.jsx)(n.code,{children:"style"})," and ",(0,l.jsx)(n.code,{children:"paint"})," containment,\n\u53EF\u7528\u4E8E\u5B9E\u73B0 ",(0,l.jsx)(n.strong,{children:"lazy loading"}),", ",(0,l.jsx)(n.strong,{children:"virtualized list"}),"."]}),"\n"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-css",children:".content {\n  /* <length> values */\n  contain-intrinsic-size: 1000px;\n  contain-intrinsic-size: 10rem;\n\n  /* Keyword values */\n  content-visibility: visible;\n  content-visibility: hidden;\n  content-visibility: auto;\n}\n\n.p {\n  contain-intrinsic-size: 320px; /* \u9884\u8BBE\u9AD8\u5EA6, \u9632\u6B62\u6EDA\u52A8\u6761\u9891\u7E41\u6296\u52A8 */\n  content-visibility: auto;\n}\n"})}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.a,{href:"https://infrequently.org/2020/12/resize-resilient-deferred-rendering",children:"Prevent jittery scrollbar"}),":"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-ts",children:"const observer = new ResizeObserver((entries) => {\n  for (const entry of entries) {\n    if (entry.target.getBoundingClientRect().height > 0) {\n      observer.unobserve(entry.target)\n      entry.target.classList.remove('content-visibility-auto')\n    }\n  }\n})\n\nfor (const element of document.querySelectorAll('.content-visibility-auto'))\n  observer.observe(element)\n"})}),"\n",(0,l.jsx)(n.h2,{id:"selectors",children:"Selectors"}),"\n",(0,l.jsx)(n.p,{children:"\u51CF\u5C11\u9009\u62E9\u5668\u7684\u590D\u6742\u6027, \u4E0E\u6784\u9020\u6837\u5F0F\u672C\u8EAB\u7684\u5176\u4ED6\u5DE5\u4F5C\u76F8\u6BD4,\n\u9009\u62E9\u5668\u590D\u6742\u6027\u53EF\u4EE5\u5360\u7528\u8BA1\u7B97\u5143\u7D20\u6837\u5F0F\u6240\u9700\u65F6\u95F4\u7684 50%\u4EE5\u4E0A:"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["\u907F\u514D\u4F7F\u7528\u7EDF\u914D\u9009\u62E9\u5668:\n",(0,l.jsx)(n.code,{children:"*"}),"."]}),"\n",(0,l.jsxs)(n.li,{children:["\u907F\u514D\u4F7F\u7528\u540E\u4EE3\u9009\u62E9\u5668 (\u5F00\u9500\u8F83\u9AD8):\n",(0,l.jsx)(n.code,{children:".anchor .link"})," -> ",(0,l.jsx)(n.code,{children:".anchor-link"}),"."]}),"\n",(0,l.jsxs)(n.li,{children:["\u907F\u514D\u4F7F\u7528\u6807\u7B7E\u5B50\u4EE3\u9009\u62E9\u5668:\n",(0,l.jsx)(n.code,{children:".list > li"})," -> ",(0,l.jsx)(n.code,{children:".list > .item"})," (better) -> ",(0,l.jsx)(n.code,{children:".list-item"})," (best)."]}),"\n"]}),"\n",(0,l.jsx)(n.h2,{id:"triggers",children:"Triggers"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["CSS triggers ",(0,l.jsx)(n.a,{href:"https://github.com/GoogleChromeLabs/css-triggers",children:"list"}),"."]}),"\n",(0,l.jsxs)(n.li,{children:["JavaScript triggers ",(0,l.jsx)(n.a,{href:"https://gist.github.com/paulirish/5d52fb081b3570c81e3a",children:"list"}),"."]}),"\n"]}),"\n",(0,l.jsxs)(n.p,{children:["Avoid to frequently change CSS property\nand call JavaScript API triggering layout stage (",(0,l.jsx)(n.code,{children:"reflow"}),"):"]}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"Layout"})," stage triggers:","\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"display"}),"."]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"position"}),"."]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"float"}),"."]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"top"}),"/",(0,l.jsx)(n.code,{children:"bottom"}),"/",(0,l.jsx)(n.code,{children:"left"}),"/",(0,l.jsx)(n.code,{children:"right"}),"."]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"width"}),"."]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"height"}),"."]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"min-height"}),"."]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"margin"}),"."]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"padding"}),"."]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"border"}),"/",(0,l.jsx)(n.code,{children:"border-width"}),"."]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"overflow"}),"/",(0,l.jsx)(n.code,{children:"overflow-y"}),"."]}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.code,{children:"font-family"})}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"font-size"}),"."]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"font-weight"}),"."]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"white-space"}),"."]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"line-height"}),"."]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"vertical-align"}),"."]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"text-align"}),"."]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"clear"}),"."]}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"Paint"})," stage triggers:","\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"background"}),"/",(0,l.jsx)(n.code,{children:"background-image"}),"/",(0,l.jsx)(n.code,{children:"background-repeat"}),"/",(0,l.jsx)(n.code,{children:"background-position"}),"/",(0,l.jsx)(n.code,{children:"background-size"})]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"border-radius"}),"/",(0,l.jsx)(n.code,{children:"border-style"}),"."]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"box-shadow"}),"."]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"outline"}),"/",(0,l.jsx)(n.code,{children:"outline-width"}),"/",(0,l.jsx)(n.code,{children:"outline-style"}),"/",(0,l.jsx)(n.code,{children:"outline-color"}),"."]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"color"}),"."]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"text-decoration"}),"."]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"visibility"}),"."]}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"Composite"})," stage triggers:","\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"cursor"}),"."]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"opacity"}),"."]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"transform"}),"."]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"z-index"}),"."]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(n.h2,{id:"loading",children:"Loading"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["Avoid ",(0,l.jsx)(n.code,{children:"@import"}),":","\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"In HTML."}),"\n",(0,l.jsx)(n.li,{children:"In CSS especially;"}),"\n",(0,l.jsxs)(n.li,{children:["Beware of oddities with the ",(0,l.jsx)(n.code,{children:"PreLoad Scanner"}),"."]}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["Be wary of synchronous CSS and JavaScript order:","\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"JavaScript defined after CSS won't run until CSSOM is completed."}),"\n",(0,l.jsx)(n.li,{children:"If JavaScript doesn't depend on CSS: load it before CSS."}),"\n",(0,l.jsx)(n.li,{children:"If JavaScript does depend on CSS: load it after CSS."}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["Load CSS as the DOM needs it:","\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["Unblocks ",(0,l.jsx)(n.code,{children:"Start Render"})," and allows progressive rendering."]}),"\n",(0,l.jsxs)(n.li,{children:["Avoid ",(0,l.jsx)(n.strong,{children:"flash of un-styled content"}),"."]}),"\n",(0,l.jsxs)(n.li,{children:["Avoid ",(0,l.jsx)(n.strong,{children:"re-rendering and repaint"})," for initial page:\nput ",(0,l.jsx)(n.code,{children:"Critical CSS"})," in HTML footer will lead to\nentire DOM re-rendering and repaint."]}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["Lazyload any CSS not needed for ",(0,l.jsx)(n.code,{children:"Start Render"}),":","\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["Only load ",(0,l.jsx)(n.code,{children:"Critical CSS"})," in ",(0,l.jsx)(n.code,{children:"<head>"}),"."]}),"\n",(0,l.jsxs)(n.li,{children:["Splitting CSS into ",(0,l.jsx)(n.code,{children:"Media Queries"}),"."]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-html",children:'\x3c!-- Doesn\'t block rendering --\x3e\n<link rel="preload" href="/path/to/split.css" as="style" />\n\n\x3c!-- Loading media query --\x3e\n<link rel="stylesheet" href="/path/to/split.css" media="print" onload="this.media = \'all\'" />\n'})}),"\n",(0,l.jsx)(n.h2,{id:"animation",children:"Animation"}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.a,{href:"http://web.dev/articles/animations-guide",children:"High performance animations"}),":"]}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["CSS \u9AD8\u6027\u80FD\u52A8\u753B\u4E09\u8981\u7D20:","\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"absolute"})," position: \u8131\u79BB\u6587\u6863\u6D41, \u4E0D\u4F1A\u5BFC\u81F4\u5176\u4ED6\u5143\u7D20\u91CD\u6392\u6216\u91CD\u7ED8."]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"opacity"}),": high performance trigger."]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"transform"}),": high performance trigger."]}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["Animation performance ",(0,l.jsx)(n.a,{href:"http://motion.dev/blog/web-animation-performance-tier-list",children:"tier list"}),":","\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["All animation: ",(0,l.jsx)(n.code,{children:"keyframe"})," animation or ",(0,l.jsx)(n.code,{children:"transitions"})," is best."]}),"\n",(0,l.jsxs)(n.li,{children:["JS-based animation: ",(0,l.jsx)(n.code,{children:"requestAnimationFrame"})," is better than ",(0,l.jsx)(n.code,{children:"setTimeout"}),"/",(0,l.jsx)(n.code,{children:"setInterval"}),"."]}),"\n",(0,l.jsxs)(n.li,{children:["Position animation: ",(0,l.jsx)(n.code,{children:"transform: translate(npx, npx)"})," is better than ",(0,l.jsx)(n.code,{children:"top"}),"/",(0,l.jsx)(n.code,{children:"right"}),"/",(0,l.jsx)(n.code,{children:"bottom"}),"/",(0,l.jsx)(n.code,{children:"left"}),"."]}),"\n",(0,l.jsxs)(n.li,{children:["Scale animation: ",(0,l.jsx)(n.code,{children:"transform: scale(n)"})," better than ",(0,l.jsx)(n.code,{children:"width"}),"/",(0,l.jsx)(n.code,{children:"height"}),"."]}),"\n",(0,l.jsxs)(n.li,{children:["Rotation animation: ",(0,l.jsx)(n.code,{children:"transform: rotate(deg)"})," is better."]}),"\n",(0,l.jsxs)(n.li,{children:["Opacity/visibility animation: ",(0,l.jsx)(n.code,{children:"opacity: 0...1"})," is better."]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"frame",children:"Frame"}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.code,{children:"window.requestAnimationFrame"}),":"]}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["Reflow: ",(0,l.jsx)(n.code,{children:"JavaScript -> Style -> Layout -> Paint -> Composite"}),"."]}),"\n",(0,l.jsxs)(n.li,{children:["Repaint: ",(0,l.jsx)(n.code,{children:"Paint -> Composite"}),"."]}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:"\u544A\u8BC9\u6D4F\u89C8\u5668\u5E0C\u671B\u6267\u884C\u52A8\u753B\u5E76\u8BF7\u6C42\u6D4F\u89C8\u5668\u5728\u4E0B\u4E00\u6B21\u91CD\u7ED8\u4E4B\u524D\u8C03\u7528\u6307\u5B9A\u7684\u51FD\u6570\u6765\u66F4\u65B0\u52A8\u753B.\n\u8BE5\u65B9\u6CD5\u4F7F\u7528\u4E00\u4E2A\u56DE\u8C03\u51FD\u6570\u4F5C\u4E3A\u53C2\u6570, \u8FD9\u4E2A\u56DE\u8C03\u51FD\u6570\u4F1A\u5728\u6D4F\u89C8\u5668\u91CD\u7ED8\u4E4B\u524D\u8C03\u7528."}),"\n",(0,l.jsxs)(n.blockquote,{children:["\n",(0,l.jsx)(n.p,{children:"\u82E5\u60F3\u8981\u5728\u4E0B\u6B21\u91CD\u7ED8\u65F6\u4EA7\u751F\u53E6\u4E00\u4E2A\u52A8\u753B\u753B\u9762, callback \u5FC5\u987B\u8C03\u7528 requestAnimationFrame."}),"\n"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-ts",children:"let start = null\nconst element = document.getElementById('SomeElementYouWantToAnimate')\nelement.style.position = 'absolute'\n\nfunction step(timestamp) {\n  if (!start)\n    start = timestamp\n\n  const progress = timestamp - start\n  element.style.left = `${Math.min(progress / 10, 200)}px`\n\n  if (progress < 2000)\n    window.requestAnimationFrame(step)\n}\n\nwindow.requestAnimationFrame(step)\n"})}),"\n",(0,l.jsx)(n.h3,{id:"devtools",children:"DevTools"}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.a,{href:"https://calibreapp.com/blog/investigate-animation-performance-with-devtools",children:"DevTools"}),"\nfor animation performance:"]}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["Slower CPU simulation in ",(0,l.jsx)(n.code,{children:"performance"})," panel."]}),"\n",(0,l.jsxs)(n.li,{children:["Enable paint instrumentation in ",(0,l.jsx)(n.code,{children:"performance"})," panel."]}),"\n",(0,l.jsxs)(n.li,{children:["FPS meter in ",(0,l.jsx)(n.code,{children:"rendering"})," panel."]}),"\n",(0,l.jsxs)(n.li,{children:["Paint flashing in ",(0,l.jsx)(n.code,{children:"rendering"})," panel."]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"layers"})," panel."]}),"\n"]}),"\n",(0,l.jsx)(n.h2,{id:"imports",children:"Imports"}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.code,{children:"link"})," is parallel, ",(0,l.jsx)(n.code,{children:"@import"})," isn't parallel."]}),"\n",(0,l.jsx)(n.h2,{id:"references",children:"References"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["CSS optimization ",(0,l.jsx)(n.a,{href:"https://kinsta.com/blog/optimize-css",children:"guide"}),"."]}),"\n"]})]})}function h(e={}){let{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,l.jsx)(n,{...e,children:(0,l.jsx)(a,{...e})}):a(e)}},30416(e,n,i){i.d(n,{R:()=>t,x:()=>c});var s=i(59471);let l={},r=s.createContext(l);function t(e){let n=s.useContext(r);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(l):e.components||l:t(e.components),s.createElement(r.Provider,{value:n},e.children)}}}]);