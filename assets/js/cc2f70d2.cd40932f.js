"use strict";(self.webpackChunknotes=self.webpackChunknotes||[]).push([["96011"],{77803(e,n,r){r.r(n),r.d(n,{metadata:()=>t,default:()=>u,frontMatter:()=>s,contentTitle:()=>o,toc:()=>d,assets:()=>c});var t=JSON.parse('{"id":"web/javascript/variable","title":"Variable","description":"Hoisting","source":"@site/content/web/javascript/variable.md","sourceDirName":"web/javascript","slug":"/web/javascript/variable","permalink":"/notes/web/javascript/variable","draft":false,"unlisted":false,"editUrl":"https://github.com/sabertazimi/notes/edit/main/content/web/javascript/variable.md","tags":[{"inline":true,"label":"Web","permalink":"/notes/tags/web"},{"inline":true,"label":"JavaScript","permalink":"/notes/tags/java-script"},{"inline":true,"label":"ECMAScript","permalink":"/notes/tags/ecma-script"}],"version":"current","lastUpdatedBy":"renovate[bot]","lastUpdatedAt":1772011424000,"sidebarPosition":9,"frontMatter":{"sidebar_position":9,"tags":["Web","JavaScript","ECMAScript"]},"sidebar":"tutorialSidebar","previous":{"title":"Temporal","permalink":"/notes/web/javascript/temporal"},"next":{"title":"Operators","permalink":"/notes/web/javascript/operator"}}'),i=r(62615),l=r(30416);let s={sidebar_position:9,tags:["Web","JavaScript","ECMAScript"]},o="Variable",c={},d=[{value:"Hoisting",id:"hoisting",level:2},{value:"Let",id:"let",level:2},{value:"Const",id:"const",level:2},{value:"Type Detection",id:"type-detection",level:2},{value:"Null",id:"null",level:3},{value:"Property",id:"property",level:3},{value:"Object",id:"object",level:3},{value:"Type Conversion",id:"type-conversion",level:2},{value:"Context",id:"context",level:3},{value:"Algorithm",id:"algorithm",level:3}];function a(e){let n={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,l.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.header,{children:(0,i.jsx)(n.h1,{id:"variable",children:"Variable"})}),"\n",(0,i.jsx)(n.h2,{id:"hoisting",children:"Hoisting"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["\u4E00\u65B9\u9762\u89C4\u5B9A, ",(0,i.jsx)(n.code,{children:"var"}),"/",(0,i.jsx)(n.code,{children:"function"})," \u58F0\u660E\u7684\u5168\u5C40\u53D8\u91CF,\n\u4F9D\u65E7\u662F\u5168\u5C40\u5BF9\u8C61\u7684\u5C5E\u6027, \u610F\u5473\u7740\u4F1A",(0,i.jsx)(n.code,{children:"Hoisting"}),"."]}),"\n",(0,i.jsxs)(n.li,{children:["\u53E6\u4E00\u65B9\u9762\u89C4\u5B9A, ",(0,i.jsx)(n.code,{children:"let"}),"/",(0,i.jsx)(n.code,{children:"const"}),"/",(0,i.jsx)(n.code,{children:"class"})," \u58F0\u660E\u7684\u5168\u5C40\u53D8\u91CF,\n\u4E0D\u5C5E\u4E8E\u5168\u5C40\u5BF9\u8C61\u7684\u5C5E\u6027, \u610F\u5473\u7740\u4E0D\u4F1A",(0,i.jsx)(n.code,{children:"Hoisting"}),"."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"var"})," \u53EA\u6709\u51FD\u6570\u4F5C\u7528\u57DF, ",(0,i.jsx)(n.code,{children:"let"}),"/",(0,i.jsx)(n.code,{children:"const"})," \u62E5\u6709\u5757\u7EA7\u4F5C\u7528\u57DF."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"var"})," \u8868\u8FBE\u5F0F\u548C ",(0,i.jsx)(n.code,{children:"function"})," \u58F0\u660E\u90FD\u5C06\u4F1A\u88AB\u63D0\u5347\u5230\u5F53\u524D\u4F5C\u7528\u57DF (",(0,i.jsx)(n.strong,{children:"\u5168\u5C40\u4F5C\u7528\u57DF/\u51FD\u6570\u4F5C\u7528\u57DF"}),") \u9876\u90E8,\n\u5176\u4F59\u8868\u8FBE\u5F0F\u987A\u5E8F\u4E0D\u53D8."]}),"\n"]}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{}),(0,i.jsx)(n.th,{children:"Hoisting"}),(0,i.jsx)(n.th,{children:"Scope"}),(0,i.jsx)(n.th,{children:"Creates Global Properties"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"var"})}),(0,i.jsx)(n.td,{children:"Declaration"}),(0,i.jsx)(n.td,{children:"Function"}),(0,i.jsx)(n.td,{children:"Yes"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"let"})}),(0,i.jsx)(n.td,{children:"Temporal dead zone"}),(0,i.jsx)(n.td,{children:"Block"}),(0,i.jsx)(n.td,{children:"No"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"const"})}),(0,i.jsx)(n.td,{children:"Temporal dead zone"}),(0,i.jsx)(n.td,{children:"Block"}),(0,i.jsx)(n.td,{children:"No"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"class"})}),(0,i.jsx)(n.td,{children:"Temporal dead zone"}),(0,i.jsx)(n.td,{children:"Block"}),(0,i.jsx)(n.td,{children:"No"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"function"})}),(0,i.jsx)(n.td,{children:"Complete"}),(0,i.jsx)(n.td,{children:"Block"}),(0,i.jsx)(n.td,{children:"Yes"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"import"})}),(0,i.jsx)(n.td,{children:"Complete"}),(0,i.jsx)(n.td,{children:"Module-global"}),(0,i.jsx)(n.td,{children:"No"})]})]})]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-ts",children:"// \u6211\u4EEC\u77E5\u9053\u8FD9\u4E2A\u884C\u4E0D\u901A (\u5047\u8BBE\u6CA1\u6709\u672A\u5B9A\u4E49\u7684\u5168\u5C40\u53D8\u91CF)\nfunction example() {\n  console.log(notDefined) // => throws a ReferenceError\n}\n\n// \u5728\u5F15\u7528\u53D8\u91CF\u540E\u521B\u5EFA\u53D8\u91CF\u58F0\u660E\u5C06\u4F1A\u56E0\u53D8\u91CF\u63D0\u5347\u800C\u8D77\u4F5C\u7528.\n// \u6CE8\u610F: \u771F\u6B63\u7684\u503C `true` \u4E0D\u4F1A\u88AB\u63D0\u5347.\nfunction example() {\n  console.log(declaredButNotAssigned) // => undefined\n  // eslint-disable-next-line no-var, vars-on-top -- for demonstration of variable hoisting\n  var declaredButNotAssigned = true\n}\n\n// \u89E3\u91CA\u5668\u5C06\u53D8\u91CF\u63D0\u5347\u5230\u51FD\u6570\u7684\u9876\u90E8\n// \u8FD9\u610F\u5473\u7740\u6211\u4EEC\u53EF\u4EE5\u5C06\u4E0A\u8FB9\u7684\u4F8B\u5B50\u91CD\u5199\u4E3A:\nfunction example() {\n  let declaredButNotAssigned\n  console.log(declaredButNotAssigned) // => undefined\n  declaredButNotAssigned = true\n}\n\n// \u4F7F\u7528 const \u548C let\nfunction example() {\n  console.log(declaredButNotAssigned) // => throws a ReferenceError\n  console.log(typeof declaredButNotAssigned) // => throws a ReferenceError\n  const declaredButNotAssigned = true\n}\n"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-ts",children:"function example() {\n  console.log(named) // => undefined\n\n  named() // => TypeError named is not a function\n\n  superPower() // => ReferenceError superPower is not defined\n\n  // eslint-disable-next-line no-var, vars-on-top -- for demonstration of variable hoisting\n  var named = function superPower() {\n    console.log('Flying')\n  }\n}\n"})}),"\n",(0,i.jsx)(n.h2,{id:"let",children:"Let"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"\u5757\u7EA7\u4F5C\u7528\u57DF\u5185\u5B9A\u4E49\u7684\u53D8\u91CF/\u51FD\u6570, \u5728\u5757\u7EA7\u4F5C\u7528\u57DF\u5916 ReferenceError."}),"\n",(0,i.jsx)(n.li,{children:"\u4E0D\u5B58\u5728\u53D8\u91CF\u63D0\u5347, \u5BFC\u81F4\u6682\u65F6\u6027\u6B7B\u533A (Temporal Dead Zone)."}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"let"})," variable in ",(0,i.jsx)(n.code,{children:"for-loop"})," closure,\nevery closure for each loop\nbinds the block-scoped variable."]}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-ts",children:"const a = 1\n\nb = 3 // temporal dead zone: throw reference error\n\nlet b = 2\n"})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"let"})," \u53D8\u91CF\u62E5\u6709\u5757\u7EA7\u4F5C\u7528\u57DF (\u6BCF\u4E2A ",(0,i.jsx)(n.code,{children:"setTimeout"})," \u5F15\u7528\u7684\u90FD\u662F\u4E0D\u540C\u7684\u53D8\u91CF\u5B9E\u4F8B):"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-ts",children:"// for (var i = 0; i < 5; ++i) {\n//   setTimeout(() => console.log(i), 0);\n// }\n// Output 5, 5, 5, 5, 5.\n// \u6240\u6709\u7684 i \u90FD\u662F\u540C\u4E00\u4E2A\u53D8\u91CF, \u8F93\u51FA\u540C\u4E00\u4E2A\u6700\u7EC8\u503C.\n\nfor (let i = 0; i < 5; ++i)\n  setTimeout(() => console.log(i), 0)\n\n// Output: 0, 1, 2, 3, 4.\n// JavaScript \u5F15\u64CE\u4F1A\u4E3A\u6BCF\u4E2A\u8FED\u4EE3\u5FAA\u73AF\u58F0\u660E\u4E00\u4E2A\u65B0\u7684\u8FED\u4EE3\u53D8\u91CF.\n// \u6BCF\u4E2A setTimeout \u5F15\u7528\u7684\u90FD\u662F\u4E0D\u540C\u7684\u53D8\u91CF\u5B9E\u4F8B.\n"})}),"\n",(0,i.jsx)(n.h2,{id:"const",children:"Const"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"const \u4E00\u65E6\u58F0\u660E\u53D8\u91CF, \u5C31\u5FC5\u987B\u7ACB\u5373\u521D\u59CB\u5316, \u4E0D\u80FD\u7559\u5230\u4EE5\u540E\u8D4B\u503C."}),"\n",(0,i.jsxs)(n.li,{children:["\u5F15\u7528\u4E00\u4E2A",(0,i.jsx)(n.code,{children:"Reference"}),"\u53D8\u91CF\u65F6, \u53EA\u8868\u793A\u6B64\u53D8\u91CF\u5730\u5740\u4E0D\u53EF\u53D8, \u4F46\u6240\u5F15\u7528\u53D8\u91CF\u7684\u503C/\u5C5E\u6027\u53EF\u53D8\n(",(0,i.jsx)(n.code,{children:"xxx *const"}),", \u5373",(0,i.jsx)(n.code,{children:"const"}),"\u6307\u9488, \u6307\u5411\u4E00\u4E2A\u53D8\u91CF)."]}),"\n",(0,i.jsx)(n.li,{children:"\u5757\u7EA7\u4F5C\u7528\u57DF."}),"\n",(0,i.jsx)(n.li,{children:"\u4E0D\u5B58\u5728\u53D8\u91CF\u63D0\u5347, \u5BFC\u81F4\u6682\u65F6\u6027\u6B7B\u533A (Temporal Dead Zone)."}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-ts",children:"const f = () => g()\nconst g = () => 123\n\n// We call f() after g() was declared:\nassert.equal(f(), 123)\n"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-ts",children:"funcDecl()\n\nconst MY_STR = 'abc'\nfunction funcDecl() {\n  assert.throws(() => MY_STR, ReferenceError)\n}\n"})}),"\n",(0,i.jsx)(n.h2,{id:"type-detection",children:"Type Detection"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-ts",children:"function typeOf(o) {\n  const _toString = Object.prototype.toString\n  const _type = {\n    'undefined': 'undefined',\n    'number': 'number',\n    'boolean': 'boolean',\n    'string': 'string',\n    '[object Function]': 'function',\n    '[object GeneratorFunction]': 'function',\n    '[object Array]': 'array',\n    '[object Date]': 'date',\n    '[object RegExp]': 'regexp',\n    '[object Error]': 'error',\n    '[object JSON]': 'json',\n  }\n\n  return _type[typeof o] || _type[_toString.call(o)] || (o ? 'object' : 'null')\n}\n"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-ts",children:"function type(item) {\n  const reTypeOf = /^\\[object\\s(.*?)\\]$/\n\n  return Object.prototype.toString\n    .call(item)\n    .replace(reTypeOf, '$1')\n    .toLowerCase()\n}\n"})}),"\n",(0,i.jsx)(n.h3,{id:"null",children:"Null"}),"\n",(0,i.jsxs)(n.p,{children:["\u4E0D\u5E94\u4F7F\u7528 typeof \u68C0\u6D4B null, \u5E94\u4F7F\u7528 ",(0,i.jsx)(n.code,{children:"==="}),"/",(0,i.jsx)(n.code,{children:"!=="}),"."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-ts",children:"/*\n * ECMAScript \u6807\u51C6\u7684\u91CD\u5927 bug\n */\nconst objectType = typeof null // => object\n"})}),"\n",(0,i.jsx)(n.h3,{id:"property",children:"Property"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["\u7531\u4E8E\u5C5E\u6027\u503C\u53EF\u80FD\u4E3A\u96F6\u503C\u503C\u8868\u8FBE\u5F0F, \u4E0D\u5E94\u4F7F\u7528\u96F6\u503C\u8868\u8FBE\u5F0F(",(0,i.jsx)(n.code,{children:"0"}),"/",(0,i.jsx)(n.code,{children:"NaN"}),"/",(0,i.jsx)(n.code,{children:"''"}),"/",(0,i.jsx)(n.code,{children:"null"}),"/",(0,i.jsx)(n.code,{children:"undefined"}),") \u68C0\u6D4B\u5C5E\u6027\u503C."]}),"\n",(0,i.jsxs)(n.li,{children:["\u5E94\u4F7F\u7528 ",(0,i.jsx)(n.code,{children:"for in"})," \u8FDB\u884C\u5C5E\u6027\u68C0\u6D4B."]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"object",children:"Object"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"object instanceof Constructor"}),":\n\u5728\u539F\u578B\u94FE\u4E0A\u67E5\u627E",(0,i.jsx)(n.strong,{children:"\u6784\u9020\u5668\u7684\u539F\u578B\u5BF9\u8C61"})," (",(0,i.jsx)(n.code,{children:"Constructor.prototype"}),")."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"prop in object"}),": \u67E5\u627E\u539F\u578B\u94FE\u5C5E\u6027\u540D."]}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-ts",children:"/**\n * L \u8868\u793A\u5DE6\u8868\u8FBE\u5F0F, R \u8868\u793A\u53F3\u8868\u8FBE\u5F0F: L \u4E3A\u53D8\u91CF, R \u4E3A\u7C7B\u578B.\n */\nfunction instanceOf(L, R) {\n  const prototype = R.prototype\n  let chain = L[[proto]]\n\n  while (true) {\n    if (chain === null)\n      return false\n\n    if (prototype === chain)\n      return true\n\n    chain = chain[[proto]]\n  }\n}\n"})}),"\n",(0,i.jsx)(n.h2,{id:"type-conversion",children:"Type Conversion"}),"\n",(0,i.jsx)(n.h3,{id:"context",children:"Context"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["\u5B57\u7B26\u4E32 -> \u6574\u6570: ",(0,i.jsx)(n.code,{children:"+string"}),"/",(0,i.jsx)(n.code,{children:"Number(string)"}),"/",(0,i.jsx)(n.code,{children:"parseInt(string, arg1)"}),"."]}),"\n",(0,i.jsxs)(n.li,{children:["any -> ",(0,i.jsx)(n.code,{children:"bool"}),": ",(0,i.jsx)(n.code,{children:"!!any"}),"."]}),"\n",(0,i.jsxs)(n.li,{children:["const -> ",(0,i.jsx)(n.code,{children:"object"}),": ",(0,i.jsx)(n.code,{children:"(const)"}),"."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"parseInt(str, base)"}),":","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"\u9047\u5230\u975E\u6570\u5B57\u5B57\u7B26\u7ACB\u5373\u505C\u6B62\u8FD0\u884C, \u8FD4\u56DE\u5F53\u524D\u8F6C\u5316\u503C."}),"\n",(0,i.jsx)(n.li,{children:"\u5C06 0 \u5F00\u5934\u5B57\u7B26\u4E32\u89E3\u6790\u4E3A\u516B\u8FDB\u5236\u6570, 0x \u5F00\u5934\u5B57\u7B26\u4E32\u89E3\u6790\u4E3A\u5341\u516D\u8FDB\u5236\u6570."}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"boolean"}),"\u5728",(0,i.jsx)(n.code,{children:"\u6570\u503C\u8FD0\u7B97"}),"\u73AF\u5883\u4E2D true => 1, false => 0."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"\u6570\u7EC4"}),"\u5728",(0,i.jsx)(n.code,{children:"\u6570\u503C\u8FD0\u7B97"}),"\u73AF\u5883\u4E2D\u8F6C\u5316\u4E3A 0 (\u7A7A\u6570\u7EC4)/num (\u5355\u4E00\u5143\u7D20\u6570\u7EC4)/NaN (\u591A\u5143\u7D20\u6570\u7EC4/NaN \u6570\u7EC4)."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"\u5BF9\u8C61"}),"\u5728",(0,i.jsx)(n.code,{children:"\u903B\u8F91\u8FD0\u7B97"}),"\u73AF\u5883\u4E2D\u8F6C\u5316\u4E3A true , \u5305\u62EC false \u7684\u5C01\u88C5\u5BF9\u8C61."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"\u5BF9\u8C61"}),"\u5728",(0,i.jsx)(n.code,{children:"\u6570\u503C\u8FD0\u7B97"}),"\u73AF\u5883\u4E2D\u5148\u5229\u7528 valueOf(object), \u518D\u5229\u7528 toString() \u8F6C\u5316\u4E3A\u6570\u5B57, \u82E5\u8F6C\u5316\u5931\u8D25, \u5219\u8FD4\u56DE NaN."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"\u5BF9\u8C61"}),"\u4E0E",(0,i.jsx)(n.code,{children:"\u6570\u503C"}),"\u52A0\u53F7\u8FD0\u7B97: \u5148\u6570\u503C\u52A0, (",(0,i.jsx)(n.strong,{children:"\u5931\u8D25\u540E"}),")\u518D\u5B57\u7B26\u4E32\u52A0."]}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-ts",children:"// good\nconst totalScore = String(this.reviewScore)\n\n// good\nconst val = Number(inputValue)\n\n// good\nconst val = Number.parseInt(inputValue, 10)\n\n// good\nconst hasAge = Boolean(age)\n\n// best\nconst hasAge = !!age\n"})}),"\n",(0,i.jsx)(n.h3,{id:"algorithm",children:"Algorithm"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-ts",children:"function ToString(argument) {\n  if (argument === undefined) {\n    return 'undefined'\n  } else if (argument === null) {\n    return 'null'\n  } else if (argument === true) {\n    return 'true'\n  } else if (argument === false) {\n    return 'false'\n  } else if (TypeOf(argument) === 'number') {\n    return Number.toString(argument)\n  } else if (TypeOf(argument) === 'string') {\n    return argument\n  } else if (TypeOf(argument) === 'symbol') {\n    return Symbol.toString(argument)\n  } else if (TypeOf(argument) === 'bigint') {\n    return BigInt.toString(argument)\n  } else {\n    // argument is an object\n    const primValue = ToPrimitive(argument, 'string')\n    return ToString(primValue)\n  }\n}\n"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-ts",children:"function ToPropertyKey(argument) {\n  const key = ToPrimitive(argument, 'string') // (A)\n\n  if (TypeOf(key) === 'symbol')\n    return key\n\n  return ToString(key)\n}\n"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-ts",children:"function ToNumeric(value) {\n  const primValue = ToPrimitive(value, 'number')\n\n  if (TypeOf(primValue) === 'bigint')\n    return primValue\n\n  return ToNumber(primValue)\n}\n"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-ts",children:"function ToNumber(argument) {\n  if (argument === undefined) {\n    return Number.NaN\n  } else if (argument === null) {\n    return +0\n  } else if (argument === true) {\n    return 1\n  } else if (argument === false) {\n    return +0\n  } else if (TypeOf(argument) === 'number') {\n    return argument\n  } else if (TypeOf(argument) === 'string') {\n    return parseTheString(argument) // not shown here\n  } else if (TypeOf(argument) === 'symbol') {\n    throw new TypeError('Failed!')\n  } else if (TypeOf(argument) === 'bigint') {\n    throw new TypeError('Failed!')\n  } else {\n    // argument is an object\n    const primValue = ToPrimitive(argument, 'number')\n    return ToNumber(primValue)\n  }\n}\n"})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"ToPrimitive"}),":"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"[Symbol.toPrimitive]()"}),"."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"toString()"}),"."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"valueOf()"}),"."]}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-ts",children:"/**\n * @param input input string\n * @param hint Which type is preferred for the result string, number etc.\n */\nfunction ToPrimitive(\n  input: any,\n  hint: 'string' | 'number' | 'default' = 'default'\n) {\n  if (TypeOf(input) === 'object') {\n    const exoticToPrim = input[Symbol.toPrimitive] // (A)\n\n    if (exoticToPrim !== undefined) {\n      const result = exoticToPrim.call(input, hint)\n\n      if (TypeOf(result) !== 'object')\n        return result\n\n      throw new TypeError('[Symbol.toPrimitive]() failed!')\n    }\n\n    if (hint === 'default')\n      hint = 'number'\n\n    return OrdinaryToPrimitive(input, hint)\n  } else {\n    // input is already primitive\n    return input\n  }\n}\n\nfunction OrdinaryToPrimitive(O: object, hint: 'string' | 'number') {\n  const methodNames\n    = hint === 'string' ? ['toString', 'valueOf'] : ['valueOf', 'toString']\n\n  for (const name of methodNames) {\n    const method = O[name]\n\n    if (IsCallable(method)) {\n      const result = method.call(O)\n\n      if (TypeOf(result) !== 'object')\n        return result\n    }\n  }\n\n  throw new TypeError('Conversion failed!')\n}\n"})})]})}function u(e={}){let{wrapper:n}={...(0,l.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(a,{...e})}):a(e)}},30416(e,n,r){r.d(n,{R:()=>s,x:()=>o});var t=r(59471);let i={},l=t.createContext(i);function s(e){let n=t.useContext(l);return t.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:s(e.components),t.createElement(l.Provider,{value:n},e.children)}}}]);