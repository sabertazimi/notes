"use strict";(self.webpackChunknotes=self.webpackChunknotes||[]).push([["44397"],{39420(e,n,t){t.r(n),t.d(n,{metadata:()=>i,default:()=>h,frontMatter:()=>s,contentTitle:()=>d,toc:()=>o,assets:()=>c});var i=JSON.parse('{"id":"web/performance/monitoring","title":"Monitoring","description":"\u524D\u7AEF\u6027\u80FD\u76D1\u63A7\u5206\u4E3A\u4E24\u79CD\u65B9\u5F0F,","source":"@site/content/web/performance/monitoring.md","sourceDirName":"web/performance","slug":"/web/performance/monitoring","permalink":"/notes/web/performance/monitoring","draft":false,"unlisted":false,"editUrl":"https://github.com/sabertazimi/notes/edit/main/content/web/performance/monitoring.md","tags":[{"inline":true,"label":"Web","permalink":"/notes/tags/web"},{"inline":true,"label":"Performance","permalink":"/notes/tags/performance"},{"inline":true,"label":"Monitoring","permalink":"/notes/tags/monitoring"}],"version":"current","lastUpdatedBy":"Sabertaz","lastUpdatedAt":1769518084000,"sidebarPosition":7,"frontMatter":{"sidebar_position":7,"tags":["Web","Performance","Monitoring"]},"sidebar":"tutorialSidebar","previous":{"title":"Loading","permalink":"/notes/web/performance/loading"},"next":{"title":"Web Vitals","permalink":"/notes/web/performance/vitals"}}'),l=t(62615),r=t(30416);let s={sidebar_position:7,tags:["Web","Performance","Monitoring"]},d="Monitoring",c={},o=[{value:"Synthetic",id:"synthetic",level:2},{value:"Real User",id:"real-user",level:2},{value:"Methods",id:"methods",level:2},{value:"APIs",id:"apis",level:2},{value:"Statistics",id:"statistics",level:2},{value:"Reporting",id:"reporting",level:2},{value:"Image Beacon",id:"image-beacon",level:3},{value:"References",id:"references",level:2}];function a(e){let n={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,r.R)(),...e.components};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(n.header,{children:(0,l.jsx)(n.h1,{id:"monitoring",children:"Monitoring"})}),"\n",(0,l.jsx)(n.p,{children:"\u524D\u7AEF\u6027\u80FD\u76D1\u63A7\u5206\u4E3A\u4E24\u79CD\u65B9\u5F0F,\n\u4E00\u79CD\u53EB\u505A\u5408\u6210\u76D1\u63A7 (Synthetic Monitoring, SYN),\n\u53E6\u4E00\u79CD\u662F\u771F\u5B9E\u7528\u6237\u76D1\u63A7 (Real User Monitoring, RUM)."}),"\n",(0,l.jsx)(n.h2,{id:"synthetic",children:"Synthetic"}),"\n",(0,l.jsx)(n.p,{children:"\u5728\u4E00\u4E2A\u6A21\u62DF\u573A\u666F\u91CC, \u53BB\u63D0\u4EA4\u4E00\u4E2A\u9700\u8981\u505A\u6027\u80FD\u5BA1\u8BA1\u7684\u9875\u9762,\n\u901A\u8FC7\u4E00\u7CFB\u5217\u7684\u5DE5\u5177/\u89C4\u5219\u53BB\u8FD0\u884C\u4F60\u7684\u9875\u9762, \u63D0\u53D6\u4E00\u4E9B\u6027\u80FD\u6307\u6807, \u5F97\u51FA\u4E00\u4E2A\u5BA1\u8BA1\u62A5\u544A."}),"\n",(0,l.jsx)(n.p,{children:"\u5E38\u89C1\u7684\u5DE5\u5177\u6709 Google \u7684 Lighthouse, WebPageTest, PageSpeed \u7B49"}),"\n",(0,l.jsxs)(n.table,{children:[(0,l.jsx)(n.thead,{children:(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.th,{style:{textAlign:"left"},children:"\u4F18\u70B9"}),(0,l.jsx)(n.th,{style:{textAlign:"center"},children:"\u7F3A\u70B9"})]})}),(0,l.jsxs)(n.tbody,{children:[(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{style:{textAlign:"left"},children:"\u5B9E\u73B0\u7B80\u5355"}),(0,l.jsx)(n.td,{style:{textAlign:"center"},children:"\u65E0\u6CD5\u8FD8\u539F\u5168\u90E8\u771F\u5B9E\u573A\u666F"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{style:{textAlign:"left"},children:"\u80FD\u91C7\u96C6\u5230\u4E30\u5BCC\u7684\u6570\u636E, \u5982\u786C\u4EF6\u6307\u6807\u6216\u7011\u5E03\u56FE"}),(0,l.jsx)(n.td,{style:{textAlign:"center"},children:"\u767B\u5F55\u7B49\u573A\u666F\u9700\u8981\u989D\u5916\u89E3\u51B3"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{style:{textAlign:"left"},children:"\u4E0D\u5F71\u54CD\u771F\u5B9E\u7528\u6237\u7684\u8BBF\u95EE\u6027\u80FD"}),(0,l.jsx)(n.td,{style:{textAlign:"center"},children:"\u5355\u6B21\u6570\u636E\u4E0D\u591F\u7A33\u5B9A"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{style:{textAlign:"left"},children:"\u53EF\u4EE5\u63D0\u4F9B\u9875\u9762\u52A0\u8F7D\u5E7B\u706F\u7247\u7B49\u53EF\u89C6\u5316\u5206\u6790\u9014\u5F84"}),(0,l.jsx)(n.td,{style:{textAlign:"center"},children:"\u6570\u636E\u91CF\u8F83\u5C0F, \u65E0\u6CD5\u53D1\u6325\u66F4\u5927\u4EF7\u503C"})]})]})]}),"\n",(0,l.jsx)(n.h2,{id:"real-user",children:"Real User"}),"\n",(0,l.jsx)(n.p,{children:"\u7528\u6237\u5728\u9875\u9762\u8BBF\u95EE\u4E4B\u540E\u5C31\u4F1A\u4EA7\u751F\u5404\u79CD\u5404\u6837\u7684\u6027\u80FD\u6307\u6807,\n\u4E4B\u540E\u4F1A\u5C06\u8FD9\u4E9B\u6027\u80FD\u6307\u6807\u4E0A\u4F20\u7684\u6211\u4EEC\u7684\u65E5\u5FD7\u670D\u52A1\u5668\u4E0A,\n\u8FDB\u884C\u6570\u636E\u7684\u63D0\u8D77\u6E05\u6D17\u52A0\u5DE5,\n\u6700\u540E\u5728\u76D1\u63A7\u5E73\u53F0\u4E0A\u8FDB\u884C\u5C55\u793A\u548C\u5206\u6790\u7684\u4E00\u4E2A\u8FC7\u7A0B."}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"\u771F\u5B9E\u7528\u6237\u76D1\u63A7\u7684\u4F18\u7F3A\u70B9"}),"\n"]}),"\n",(0,l.jsxs)(n.table,{children:[(0,l.jsx)(n.thead,{children:(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.th,{style:{textAlign:"left"},children:"\u4F18\u70B9"}),(0,l.jsx)(n.th,{style:{textAlign:"left"},children:"\u7F3A\u70B9"})]})}),(0,l.jsxs)(n.tbody,{children:[(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{style:{textAlign:"left"},children:"\u65E0\u9700\u914D\u7F6E\u6A21\u62DF\u6761\u4EF6, \u5B8C\u5168\u8FD8\u539F\u771F\u5B9E\u573A\u666F"}),(0,l.jsx)(n.td,{style:{textAlign:"left"},children:"\u5F71\u54CD\u771F\u5B9E\u7528\u6237\u7684\u8BBF\u95EE\u6027\u80FD\u53CA\u6D41\u91CF\u6D88\u8017"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{style:{textAlign:"left"},children:"\u4E0D\u5B58\u5728\u767B\u5F55\u7B49\u9700\u8981\u989D\u5916\u89E3\u51B3\u7684\u573A\u666F"}),(0,l.jsx)(n.td,{style:{textAlign:"left"},children:"\u65E0\u6CD5\u91C7\u96C6\u786C\u4EF6\u76F8\u5173\u6307\u6807"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{style:{textAlign:"left"},children:"\u6570\u636E\u6837\u672C\u8DB3\u591F\u5E9E\u5927, \u53EF\u4EE5\u51CF\u5C11\u7EDF\u8BA1\u8BEF\u5DEE"}),(0,l.jsx)(n.td,{style:{textAlign:"left"},children:"\u65E0\u6CD5\u91C7\u96C6\u5B8C\u6574\u7684\u8D44\u6E90\u52A0\u8F7D\u7011\u5E03\u56FE"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{style:{textAlign:"left"},children:"\u65B0\u5E74\u6570\u636E\u53EF\u4E0E\u5176\u5B83\u6570\u636E\u5173\u8054, \u4EA7\u751F\u66F4\u5927\u4EF7\u503C"}),(0,l.jsx)(n.td,{style:{textAlign:"left"},children:"\u65E0\u6CD5\u53EF\u89C6\u5316\u5C55\u793A\u52A0\u8F7D\u8FC7\u7A0B"})]})]})]}),"\n",(0,l.jsx)(n.admonition,{title:"SYN vs RUM",type:"tip",children:(0,l.jsxs)(n.table,{children:[(0,l.jsx)(n.thead,{children:(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.th,{style:{textAlign:"left"},children:"\u5BF9\u6BD4\u9879"}),(0,l.jsx)(n.th,{style:{textAlign:"left"},children:"\u5408\u6210\u76D1\u63A7"}),(0,l.jsx)(n.th,{style:{textAlign:"left"},children:"\u771F\u5B9E\u7528\u6237\u76D1\u63A7"})]})}),(0,l.jsxs)(n.tbody,{children:[(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{style:{textAlign:"left"},children:"\u5B9E\u73B0\u96BE\u5EA6\u53CA\u6210\u672C"}),(0,l.jsx)(n.td,{style:{textAlign:"left"},children:"\u8F83\u4F4E"}),(0,l.jsx)(n.td,{style:{textAlign:"left"},children:"\u8F83\u9AD8"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{style:{textAlign:"left"},children:"\u91C7\u96C6\u6570\u636E\u4E30\u5BCC\u5EA6"}),(0,l.jsx)(n.td,{style:{textAlign:"left"},children:"\u4E30\u5BCC"}),(0,l.jsx)(n.td,{style:{textAlign:"left"},children:"\u57FA\u7840"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{style:{textAlign:"left"},children:"\u6570\u636E\u6837\u672C\u91CF"}),(0,l.jsx)(n.td,{style:{textAlign:"left"},children:"\u8F83\u5C0F"}),(0,l.jsx)(n.td,{style:{textAlign:"left"},children:"\u5927(\u89C6\u4E1A\u52A1\u4F53\u91CF)"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{style:{textAlign:"left"},children:"\u9002\u5408\u573A\u666F"}),(0,l.jsx)(n.td,{style:{textAlign:"left"},children:"\u5B9A\u6027\u5206\u6790, \u5C0F\u6570\u636E\u91CF\u5206\u6790"}),(0,l.jsx)(n.td,{style:{textAlign:"left"},children:"\u5B9A\u91CF\u5206\u6790, \u4E1A\u52A1\u6570\u636E\u6DF1\u5EA6\u6316\u6398"})]})]})]})}),"\n",(0,l.jsx)(n.h2,{id:"methods",children:"Methods"}),"\n",(0,l.jsx)(n.p,{children:"\u5728\u771F\u5B9E\u7528\u6237\u6027\u80FD\u6570\u636E\u91C7\u96C6\u65F6, \u8981\u5173\u6CE8\u56DB\u4E2A\u65B9\u9762\u7684\u4E1C\u897F:"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"\u4F7F\u7528\u6807\u51C6\u7684 API."}),"\n",(0,l.jsx)(n.li,{children:"\u5B9A\u4E49\u5408\u9002\u7684\u6307\u6807."}),"\n",(0,l.jsx)(n.li,{children:"\u91C7\u96C6\u6B63\u786E\u7684\u6570\u636E."}),"\n",(0,l.jsx)(n.li,{children:"\u4E0A\u62A5\u5173\u8054\u7684\u7EF4\u5EA6."}),"\n"]}),"\n",(0,l.jsx)(n.h2,{id:"apis",children:"APIs"}),"\n",(0,l.jsx)(n.p,{children:"\u91C7\u96C6\u6027\u80FD\u6570\u636E\u65F6\u5148\u62B9\u5E73 Navigation Timing spec \u5DEE\u5F02\n\u4F18\u5148\u4F7F\u7528 PerformanceTimeline API\n(\u5728\u590D\u6742\u573A\u666F, \u4EA6\u53EF\u8003\u8651\u4F18\u5148\u4F7F\u7528 PerformanceObserver):"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"\u91CD\u5B9A\u5411\u8017\u65F6 = redirectEnd - redirectStart."}),"\n",(0,l.jsx)(n.li,{children:"DNS \u67E5\u8BE2\u8017\u65F6 = domainLookupEnd - domainLookupStart."}),"\n",(0,l.jsx)(n.li,{children:"TCP \u94FE\u63A5\u8017\u65F6 = connectEnd - connectStart."}),"\n",(0,l.jsx)(n.li,{children:"HTTP \u8BF7\u6C42\u8017\u65F6 = responseEnd - responseStart."}),"\n",(0,l.jsx)(n.li,{children:"\u89E3\u6790 DOM \u6811\u8017\u65F6 = domComplete - domInteractive."}),"\n",(0,l.jsx)(n.li,{children:"\u767D\u5C4F\u65F6\u95F4 = responseStart - navigationStart."}),"\n",(0,l.jsx)(n.li,{children:"DOMReady \u65F6\u95F4 = domContentLoadedEventEnd - navigationStart."}),"\n",(0,l.jsx)(n.li,{children:"onload \u65F6\u95F4 = loadEventEnd - navigationStart."}),"\n"]}),"\n",(0,l.jsx)(n.h2,{id:"statistics",children:"Statistics"}),"\n",(0,l.jsx)(n.p,{children:"First Meaningful Paint: \u9996\u6B21\u6709\u6548\u6E32\u67D3\u65F6\u957F,\n\u5B83\u7684\u4E00\u4E2A\u6838\u5FC3\u7684\u60F3\u6CD5\u662F\u6E32\u67D3\u5E76\u4E0D\u4E00\u5B9A\u4EE3\u8868\u7740\u7528\u6237\u770B\u5230\u4E86\u4E3B\u8981\u5185\u5BB9,\nLoad \u4E5F\u4E0D\u4E00\u5B9A\u4EE3\u8868\u7528\u6237\u770B\u5230\u4E3B\u8981\u5185\u5BB9.\n\u5047\u8BBE\u5F53\u4E00\u4E2A\u7F51\u9875\u7684 DOM \u7ED3\u6784\u53D1\u751F\u5267\u70C8\u7684\u53D8\u5316\u7684\u65F6\u5019,\n\u5C31\u662F\u8FD9\u4E2A\u7F51\u9875\u4E3B\u8981\u5185\u5BB9\u51FA\u73B0\u7684\u65F6\u5019,\n\u90A3\u4E48\u5728\u8FD9\u6837\u7684\u4E00\u4E2A\u65F6\u95F4\u70B9\u4E0A,\n\u5C31\u662F\u7528\u6237\u770B\u5230\u4E3B\u8981\u5185\u5BB9\u7684\u4E00\u4E2A\u65F6\u95F4\u70B9."}),"\n",(0,l.jsx)(n.p,{children:"\u5B83\u7684\u4F18\u70B9\u662F\u76F8\u5BF9\u6821\u51C6\u7684\u4F30\u7B97\u51FA\u5185\u5BB9\u6E32\u67D3\u65F6\u95F4, \u8D34\u8FD1\u7528\u6237\u611F\u77E5.\n\u4F46\u7F3A\u70B9\u662F\u65E0\u539F\u751F API \u652F\u6301, \u7B97\u6CD5\u63A8\u5BFC\u65F6 DOM \u8282\u70B9\u542B\u6743\u91CD."}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"First Paint (FP): 0 ~ 1 ~ 2.5s."}),"\n",(0,l.jsx)(n.li,{children:"First Meaningful Paint (FMP)"}),"\n",(0,l.jsx)(n.li,{children:"First Contentful Paint (FCP): 0 ~ 2 ~ 4s."}),"\n",(0,l.jsx)(n.li,{children:"Largest Contentful Paint (LCP): 0 ~ 2.5 ~ 4s."}),"\n",(0,l.jsx)(n.li,{children:"Interaction to Next Paint (INP): 0 ~ 0.2 ~ 0.5s."}),"\n",(0,l.jsx)(n.li,{children:"Cumulative Layout Shift (CLS): 0 ~ 0.1 ~ 0.25."}),"\n",(0,l.jsx)(n.li,{children:"Time to Interactive (TTI): 0 ~ 3.8 ~ 7.3s."}),"\n"]}),"\n",(0,l.jsx)(n.h2,{id:"reporting",children:"Reporting"}),"\n",(0,l.jsx)(n.p,{children:"\u4E0D\u540C\u7684\u9875\u9762\u64CD\u4F5C/\u9875\u9762\u6253\u5F00\u65B9\u5F0F/\u6D4F\u89C8\u5668\u73AF\u5883\u90FD\u4F1A\u5BF9\u6211\u4EEC\u9875\u9762\u52A0\u8F7D\u7684\u6027\u80FD\u4F1A\u6709\u5F71\u54CD,\n\u9700\u8981\u4E0A\u62A5\u8FD9\u4E9B\u7EF4\u5EA6\u7684\u6570\u636E, \u4EE5\u4FBF\u6DF1\u5165\u6027\u80FD\u5206\u6790:"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"\u5F53\u524D\u9875\u9762\u662F\u5426\u53EF\u89C1."}),"\n",(0,l.jsx)(n.li,{children:"\u9875\u9762\u52A0\u8F7D\u65B9\u5F0F: \u76F4\u63A5\u6253\u5F00/\u5237\u65B0\u6253\u5F00/\u524D\u8FDB\u540E\u9000\u6253\u5F00."}),"\n",(0,l.jsx)(n.li,{children:"\u662F\u5426\u542F\u7528 HTTP2."}),"\n",(0,l.jsx)(n.li,{children:"\u662F\u5426\u542F\u7528 Service Worker."}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:"\u89E3\u51B3\u4E0A\u62A5\u5BF9\u6027\u80FD\u7684\u5F71\u54CD\u95EE\u9898\u6709\u4EE5\u4E0B\u65B9\u6848:"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["\u5EF6\u8FDF\u5408\u5E76\u4E0A\u62A5: \u5EF6\u8FDF\u5230 ",(0,l.jsx)(n.code,{children:"onload"})," \u4E8B\u4EF6\u540E, \u5E76\u5408\u5E76\u591A\u4E2A\u4E0A\u62A5\u8BF7\u6C42."]}),"\n",(0,l.jsxs)(n.li,{children:["\u4F7F\u7528 ",(0,l.jsx)(n.a,{href:"https://developer.mozilla.org/docs/Web/API/Beacon_API",children:"Beacon API"}),":","\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"Sent reliably (even if page unload)."}),"\n",(0,l.jsx)(n.li,{children:"Sent asynchronously."}),"\n",(0,l.jsx)(n.li,{children:"Not impact loading of next page."}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\u4F7F\u7528 ",(0,l.jsx)(n.code,{children:"post"})," \u4E0A\u62A5."]}),"\n",(0,l.jsxs)(n.li,{children:["Prefer ",(0,l.jsx)(n.code,{children:"visibilitychange"}),"/",(0,l.jsx)(n.code,{children:"pagehide"})," event.\n",(0,l.jsx)(n.code,{children:"unload"}),"/",(0,l.jsx)(n.code,{children:"beforeunload"})," event not precise for mobile users:\ne.g. switch to another app not trigger ",(0,l.jsx)(n.code,{children:"unload"})," event."]}),"\n"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-ts",children:"document.addEventListener('DOMContentLoaded', () => {\n  console.log('DOM \u6302\u8F7D\u65F6\u95F4: ', Date.now() - timerStart)\n\n  // \u6027\u80FD\u65E5\u5FD7\u4E0A\u62A5...\n})\n\nwindow.addEventListener('load', () => {\n  console.log('\u6240\u6709\u8D44\u6E90\u52A0\u8F7D\u5B8C\u6210\u65F6\u95F4: ', Date.now() - timerStart)\n\n  // \u6027\u80FD\u65E5\u5FD7\u4E0A\u62A5...\n})\n\ndocument.addEventListener('visibilitychange', () => {\n  if (document.visibilityState === 'hidden') {\n    const obj = { user: 1 }\n    const blob = new Blob([JSON.stringify(obj, null, 2)], {\n      type: 'application/json',\n    })\n    navigator.sendBeacon('/log', blob)\n  }\n})\n"})}),"\n",(0,l.jsx)(n.h3,{id:"image-beacon",children:"Image Beacon"}),"\n",(0,l.jsxs)(n.p,{children:["\u4F7F\u7528 ",(0,l.jsx)(n.code,{children:"GIF"})," \u56FE\u7247\u8FDB\u884C\u524D\u7AEF\u76D1\u63A7\u4E0A\u62A5:"]}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["\u8DE8\u57DF\u53CB\u597D: ",(0,l.jsx)(n.code,{children:"img"})," \u5929\u7136\u652F\u6301\u8DE8\u57DF."]}),"\n",(0,l.jsxs)(n.li,{children:["\u8282\u7701\u7F51\u7EDC\u8D44\u6E90:","\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"\u56FE\u7247\u8BF7\u6C42\u4E0D\u5360\u7528 AJAX \u8BF7\u6C42\u9650\u989D."}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"GIF"})," \u7B80\u5355\u5B89\u5168, \u4F53\u79EF\u5C0F, \u5BF9\u7F51\u9875\u5185\u5BB9\u51E0\u4E4E\u65E0\u5F71\u54CD,\n\u76F8\u8F83 ",(0,l.jsx)(n.code,{children:"BMP"}),"/",(0,l.jsx)(n.code,{children:"PNG"}),", \u53EF\u4EE5\u8282\u7EA6 ",(0,l.jsx)(n.code,{children:"41%"}),"/",(0,l.jsx)(n.code,{children:"35%"})," \u7F51\u7EDC\u8D44\u6E90."]}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\u4E0D\u4F1A\u963B\u585E\u9875\u9762\u52A0\u8F7D, \u4E0D\u5F71\u54CD\u7528\u6237\u4F53\u9A8C:\n\u53EA\u9700 ",(0,l.jsx)(n.code,{children:"new Image()"})," \u5BF9\u8C61,\n\u901A\u8FC7 ",(0,l.jsx)(n.code,{children:"onerror"})," \u548C ",(0,l.jsx)(n.code,{children:"onload"})," \u4E8B\u4EF6\u6765\u68C0\u6D4B\u53D1\u9001\u72B6\u6001,\n\u4E00\u822C\u60C5\u51B5\u4E0B\u65E0\u9700 ",(0,l.jsx)(n.code,{children:"append"})," \u5230 ",(0,l.jsx)(n.code,{children:"DOM"})," \u4E2D."]}),"\n"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-ts",children:"const thisPage = window.location.href\nconst referringPage = document.referrer ? document.referrer : 'none'\nconst beacon = new Image()\nbeacon.src = `http://www.example.com/logger/beacon.gif?page=${encodeURI(thisPage)}&ref=${encodeURI(referringPage)}`\n"})}),"\n",(0,l.jsx)(n.h2,{id:"references",children:"References"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["Performance monitoring data collection and report ",(0,l.jsx)(n.a,{href:"https://zhuanlan.zhihu.com/p/420330110",children:"case"}),"."]}),"\n",(0,l.jsxs)(n.li,{children:["Performance monitoring real world ",(0,l.jsx)(n.a,{href:"https://juejin.cn/post/7078512301665419295",children:"case"}),"."]}),"\n",(0,l.jsxs)(n.li,{children:["Dangerous performance cheating ",(0,l.jsx)(n.a,{href:"https://performance.shopify.com/blogs/blog/don-t-get-scammed-by-fake-performance-experts-and-apps",children:"hacks"}),"."]}),"\n"]})]})}function h(e={}){let{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,l.jsx)(n,{...e,children:(0,l.jsx)(a,{...e})}):a(e)}},30416(e,n,t){t.d(n,{R:()=>s,x:()=>d});var i=t(59471);let l={},r=i.createContext(l);function s(e){let n=i.useContext(r);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function d(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(l):e.components||l:s(e.components),i.createElement(r.Provider,{value:n},e.children)}}}]);