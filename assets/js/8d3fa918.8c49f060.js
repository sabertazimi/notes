"use strict";(self.webpackChunknotes=self.webpackChunknotes||[]).push([["56598"],{70954(e,n,r){r.r(n),r.d(n,{metadata:()=>t,default:()=>h,frontMatter:()=>s,contentTitle:()=>o,toc:()=>c,assets:()=>d});var t=JSON.parse('{"id":"web/electron/electron","title":"Electron","description":"Getting Started","source":"@site/content/web/electron/electron.md","sourceDirName":"web/electron","slug":"/web/electron/","permalink":"/notes/web/electron/","draft":false,"unlisted":false,"editUrl":"https://github.com/sabertazimi/notes/edit/main/content/web/electron/electron.md","tags":[{"inline":true,"label":"Web","permalink":"/notes/tags/web"},{"inline":true,"label":"Electron","permalink":"/notes/tags/electron"}],"version":"current","lastUpdatedBy":"Sabertaz","lastUpdatedAt":1769518084000,"frontMatter":{"tags":["Web","Electron"]},"sidebar":"tutorialSidebar","previous":{"title":"Bundlers","permalink":"/notes/web/devops/bundler"},"next":{"title":"GraphQL","permalink":"/notes/web/graphql/"}}'),l=r(62615),i=r(30416);let s={tags:["Web","Electron"]},o="Electron",d={},c=[{value:"Getting Started",id:"getting-started",level:2},{value:"Basic Concepts",id:"basic-concepts",level:2},{value:"Process",id:"process",level:3},{value:"Shared Data",id:"shared-data",level:3},{value:"Process Communication",id:"process-communication",level:2},{value:"Main to Render",id:"main-to-render",level:3},{value:"Render to Main",id:"render-to-main",level:3},{value:"Render to Render",id:"render-to-render",level:3},{value:"Native UI",id:"native-ui",level:2},{value:"Menu",id:"menu",level:3},{value:"Application Menu",id:"application-menu",level:4},{value:"Contextual Menu",id:"contextual-menu",level:4},{value:"Dialog",id:"dialog",level:3},{value:"Security",id:"security",level:2}];function a(e){let n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",li:"li",p:"p",pre:"pre",ul:"ul",...(0,i.R)(),...e.components};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(n.header,{children:(0,l.jsx)(n.h1,{id:"electron",children:"Electron"})}),"\n",(0,l.jsx)(n.h2,{id:"getting-started",children:"Getting Started"}),"\n",(0,l.jsxs)(n.p,{children:["Scaffold an Electron project with ",(0,l.jsx)(n.a,{href:"https://github.com/electron/forge",children:"Electron Forge"}),":"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"pnpm create electron-app@latest\n"})}),"\n",(0,l.jsx)(n.h2,{id:"basic-concepts",children:"Basic Concepts"}),"\n",(0,l.jsx)(n.h3,{id:"process",children:"Process"}),"\n",(0,l.jsx)(n.p,{children:"\u4E3B\u8FDB\u7A0B\u901A\u8FC7\u5B9E\u4F8B\u5316 BrowserWindow\uFF0C\u6BCF\u4E2A BrowserWindow \u5B9E\u4F8B\u90FD\u5728\u5B83\u81EA\u5DF1\u7684\u6E32\u67D3\u8FDB\u7A0B\u5185\u8FD4\u56DE\u4E00\u4E2A web \u9875\u9762\u3002\n\u5F53 BrowserWindow \u5B9E\u4F8B\u9500\u6BC1\u65F6\uFF0C\u76F8\u5E94\u7684\u6E32\u67D3\u8FDB\u7A0B\u4E5F\u4F1A\u7EC8\u6B62\u3002"}),"\n",(0,l.jsx)(n.p,{children:"\u4E3B\u8FDB\u7A0B\u8D1F\u8D23\u638C\u7BA1\u6240\u6709\u7684 web \u9875\u9762\u548C\u5B83\u4EEC\u76F8\u5E94\u7684\u6E32\u67D3\u8FDB\u7A0B\u3002\n\u6BCF\u4E2A\u6E32\u67D3\u8FDB\u7A0B\u90FD\u662F\u76F8\u4E92\u72EC\u7ACB\u7684\uFF0C\u5B83\u4EEC\u53EA\u5173\u5FC3\u81EA\u5DF1\u6240\u8FD0\u884C\u7684 web \u9875\u9762\u3002"}),"\n",(0,l.jsx)(n.p,{children:"\u5728\u9875\u9762\uFF08\u6E32\u67D3\u8FDB\u7A0B\uFF09\u4E2D\u4E0D\u5141\u8BB8\u8C03\u7528\u539F\u751F GUI \u76F8\u5173\u7684 API\uFF0C\u90A3\u662F\u56E0\u4E3A\u5728\u7F51\u9875\uFF08\u6E32\u67D3\u8FDB\u7A0B\uFF09\u4E2D\u4E2D\u638C\u7BA1\u539F\u751F GUI \u5F88\u5371\u9669\uFF0C\u6613\u9020\u6210\u5185\u5B58\u6CC4\u9732\u3002\n\u5982\u679C\u60F3\u5728\u7F51\u9875\u4E2D\u8FDB\u884C GUI \u7684\u64CD\u4F5C\uFF0C\u6E32\u67D3\u8FDB\u7A0B\u5FC5\u987B\u5411\u4E3B\u8FDB\u7A0B\u4F20\u8FBE\u8BF7\u6C42\uFF0C\u7136\u540E\u5728\u4E3B\u8FDB\u7A0B\u4E2D\u5B8C\u6210\u64CD\u4F5C\u3002"}),"\n",(0,l.jsx)(n.p,{children:"\u5728 Electron \u4E2D\uFF0C\u6709\u51E0\u79CD\u8FDE\u63A5\u4E3B\u8FDB\u7A0B\u548C\u6E32\u67D3\u8FDB\u7A0B\u7684\u65B9\u6CD5\uFF0C\n\u4F8B\u5982\u7528\u4E8E\u4F20\u9001\u6D88\u606F\u7684 ipcRenderer \u548C ipcMain \u6A21\u5757\uFF0C\u4EE5\u53CA\u7528\u4E8E RPC \u7684 remote \u6A21\u5757."}),"\n",(0,l.jsx)(n.h3,{id:"shared-data",children:"Shared Data"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.a,{href:"https://developer.mozilla.org/docs/Web/API/Storage",children:"Web Storage API"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.a,{href:"https://developer.mozilla.org/docs/Web/API/IndexedDB_API",children:"IndexedDB"})}),"\n",(0,l.jsx)(n.li,{children:"Electron IPC"}),"\n"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-ts",children:"// main process\nglobalThis.sharedObject = {\n  someProperty: 'default value',\n}\n\n// render process 1\nrequire('remote').getGlobal('sharedObject').someProperty = 'new value'\n\n// render process 2\nconsole.log(require('remote').getGlobal('sharedObject').someProperty)\n"})}),"\n",(0,l.jsx)(n.h2,{id:"process-communication",children:"Process Communication"}),"\n",(0,l.jsx)(n.h3,{id:"main-to-render",children:"Main to Render"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"webContents.executeJavaScript"}),"\n",(0,l.jsx)(n.li,{children:"ipcRenderer"}),"\n",(0,l.jsx)(n.li,{children:"ipcMain"}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"render-to-main",children:"Render to Main"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"remote module"}),"\n"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-ts",children:"const { BrowserWindow } = require('electron').remote\n\nconst win = new BrowserWindow({ width: 800, height: 600 })\nwin.loadURL('https://github.com')\n"})}),"\n",(0,l.jsx)(n.h3,{id:"render-to-render",children:"Render to Render"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"Web Storage API"}),"\n",(0,l.jsx)(n.li,{children:"IndexedDB"}),"\n",(0,l.jsx)(n.li,{children:"Electron IPC e.g. remote.getGlobal"}),"\n"]}),"\n",(0,l.jsx)(n.h2,{id:"native-ui",children:"Native UI"}),"\n",(0,l.jsx)(n.h3,{id:"menu",children:"Menu"}),"\n",(0,l.jsx)(n.h4,{id:"application-menu",children:"Application Menu"}),"\n",(0,l.jsx)(n.h4,{id:"contextual-menu",children:"Contextual Menu"}),"\n",(0,l.jsx)(n.h3,{id:"dialog",children:"Dialog"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"openFile"}),"\n",(0,l.jsx)(n.li,{children:"openDirectory"}),"\n",(0,l.jsx)(n.li,{children:"multiSelections"}),"\n",(0,l.jsx)(n.li,{children:"createDirectory"}),"\n",(0,l.jsx)(n.li,{children:"showHiddenFiles"}),"\n",(0,l.jsx)(n.li,{children:"promptToCreate: windows only."}),"\n"]}),"\n",(0,l.jsx)(n.h2,{id:"security",children:"Security"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"only load secure content (HTTPS/WSS/FTPS)"}),"\n",(0,l.jsx)(n.li,{children:"verify integrity of scripts via CSP and SRI"}),"\n",(0,l.jsx)(n.li,{children:"don't trust external resources"}),"\n",(0,l.jsx)(n.li,{children:"disable nodejs in renderers that display remote content"}),"\n"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-ts",children:"let win\n\nfunction createBrowserWindow() {\n  win = new BrowserWindow({\n    width: 800,\n    height: 600,\n    title: 'Electron App',\n    webPreferences: {\n      nodeIntegration: false,\n      preload: path.join(__dirname, 'preload.js'),\n    },\n  })\n}\n"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-ts",children:"// preload.js\nconst fs = require('node:fs')\n\nglobalThis.desktop = {\n  files: () => fs.readdirSync(__dirname),\n}\n"})})]})}function h(e={}){let{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,l.jsx)(n,{...e,children:(0,l.jsx)(a,{...e})}):a(e)}},30416(e,n,r){r.d(n,{R:()=>s,x:()=>o});var t=r(59471);let l={},i=t.createContext(l);function s(e){let n=t.useContext(i);return t.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(l):e.components||l:s(e.components),t.createElement(i.Provider,{value:n},e.children)}}}]);