"use strict";(self.webpackChunknotes=self.webpackChunknotes||[]).push([["80242"],{45481(e,n,c){c.r(n),c.d(n,{metadata:()=>l,default:()=>j,frontMatter:()=>s,contentTitle:()=>r,toc:()=>h,assets:()=>o});var l=JSON.parse('{"id":"programming/make/make","title":"Makefile","description":"Macro","source":"@site/content/programming/make/make.md","sourceDirName":"programming/make","slug":"/programming/make/","permalink":"/notes/programming/make/","draft":false,"unlisted":false,"editUrl":"https://github.com/sabertazimi/notes/edit/main/content/programming/make/make.md","tags":[{"inline":true,"label":"Programming","permalink":"/notes/tags/programming"},{"inline":true,"label":"Make","permalink":"/notes/tags/make"}],"version":"current","lastUpdatedBy":"Sabertaz","lastUpdatedAt":1769518084000,"frontMatter":{"tags":["Programming","Make"]},"sidebar":"tutorialSidebar","previous":{"title":"Desktop","permalink":"/notes/programming/linux/desktop"},"next":{"title":"Vim","permalink":"/notes/programming/vim/"}}'),i=c(62615),d=c(30416);let s={tags:["Programming","Make"]},r="Makefile",o={},h=[{value:"Macro",id:"macro",level:2},{value:"Variable",id:"variable",level:2},{value:"Implicit Rules",id:"implicit-rules",level:2},{value:"C",id:"c",level:3},{value:"C++",id:"c-1",level:3},{value:"ASM",id:"asm",level:3},{value:"Object Linking",id:"object-linking",level:3},{value:"Function",id:"function",level:2},{value:"Best Practices",id:"best-practices",level:2}];function x(e){let n={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",ul:"ul",...(0,d.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.header,{children:(0,i.jsx)(n.h1,{id:"makefile",children:"Makefile"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"# -----------------------------------------------------------------------------\n# CMake project wrapper Makefile ----------------------------------------------\n# -----------------------------------------------------------------------------\n\nSHELL := /bin/bash\nRM    := rm -rf\nMKDIR := mkdir -p\n\nall: ./build/Makefile\n    @ $(MAKE) -C build\n\n./build/Makefile:\n    @  ($(MKDIR) build > /dev/null)\n    @  (cd build > /dev/null 2>&1 && cmake ..)\n\nclean:\n    @  ($(MKDIR) build > /dev/null)\n    @  (cd build > /dev/null 2>&1 && cmake .. > /dev/null 2>&1)\n    @- $(MAKE) --silent -C build clean || true\n    @- $(RM) ./build/Makefile\n    @- $(RM) ./build/src\n    @- $(RM) ./build/test\n    @- $(RM) ./build/CMake*\n    @- $(RM) ./build/cmake.*\n    @- $(RM) ./build/*.cmake\n    @- $(RM) ./build/*.txt\n\nifeq ($(findstring clean,$(MAKECMDGOALS)),)\n    $(MAKECMDGOALS): ./build/Makefile\n    @ $(MAKE) -C build $(MAKECMDGOALS)\nendif\n"})}),"\n",(0,i.jsx)(n.h2,{id:"macro",children:"Macro"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-makefile",children:"foo := a.o b.o c.o\nbar := $(foo:.o=.c)\nfirst_second = Hello\na = first\nb = second\nall = $($a_$b)\n"})}),"\n",(0,i.jsxs)(n.p,{children:["\u8FD9\u91CC\u7684 ",(0,i.jsx)(n.code,{children:"$a_$b"})," \u7EC4\u6210\u4E86 ",(0,i.jsx)(n.code,{children:"first_second"}),", \u4E8E\u662F ",(0,i.jsx)(n.code,{children:"$(all)"})," \u7684\u503C\u5C31\u662F ",(0,i.jsx)(n.code,{children:"Hello"}),"."]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["AR: \u51FD\u6570\u5E93\u6253\u5305\u7A0B\u5E8F. \u9ED8\u8BA4\u547D\u4EE4\u662F ",(0,i.jsx)(n.code,{children:"ar"}),"."]}),"\n",(0,i.jsxs)(n.li,{children:["AS: \u6C47\u7F16\u8BED\u8A00\u7F16\u8BD1\u7A0B\u5E8F. \u9ED8\u8BA4\u547D\u4EE4\u662F ",(0,i.jsx)(n.code,{children:"as"}),"."]}),"\n",(0,i.jsxs)(n.li,{children:["CC: C \u8BED\u8A00\u7F16\u8BD1\u7A0B\u5E8F. \u9ED8\u8BA4\u547D\u4EE4\u662F ",(0,i.jsx)(n.code,{children:"cc"}),"."]}),"\n",(0,i.jsxs)(n.li,{children:["CXX: C++\u8BED\u8A00\u7F16\u8BD1\u7A0B\u5E8F. \u9ED8\u8BA4\u547D\u4EE4\u662F ",(0,i.jsx)(n.code,{children:"g++"}),"."]}),"\n",(0,i.jsxs)(n.li,{children:["CO: \u4ECE RCS \u6587\u4EF6\u4E2D\u6269\u5C55\u6587\u4EF6\u7A0B\u5E8F. \u9ED8\u8BA4\u547D\u4EE4\u662F ",(0,i.jsx)(n.code,{children:"co"}),"."]}),"\n",(0,i.jsxs)(n.li,{children:["CPP: C \u7A0B\u5E8F\u7684\u9884\u5904\u7406\u5668\uFF08\u8F93\u51FA\u662F\u6807\u51C6\u8F93\u51FA\u8BBE\u5907\uFF09. \u9ED8\u8BA4\u547D\u4EE4\u662F ",(0,i.jsx)(n.code,{children:"$(CC) \u2013E"}),"."]}),"\n",(0,i.jsxs)(n.li,{children:["FC: Fortran \u548C RatFor \u7684\u7F16\u8BD1\u5668\u548C\u9884\u5904\u7406\u7A0B\u5E8F. \u9ED8\u8BA4\u547D\u4EE4\u662F ",(0,i.jsx)(n.code,{children:"f77"}),"."]}),"\n",(0,i.jsxs)(n.li,{children:["GET: \u4ECE SCCS \u6587\u4EF6\u4E2D\u6269\u5C55\u6587\u4EF6\u7684\u7A0B\u5E8F. \u9ED8\u8BA4\u547D\u4EE4\u662F ",(0,i.jsx)(n.code,{children:"get"}),"."]}),"\n",(0,i.jsxs)(n.li,{children:["LEX: Lex \u65B9\u6CD5\u5206\u6790\u5668\u7A0B\u5E8F\uFF08\u9488\u5BF9\u4E8E C \u6216 RatFor\uFF09. \u9ED8\u8BA4\u547D\u4EE4\u662F ",(0,i.jsx)(n.code,{children:"lex"}),"."]}),"\n",(0,i.jsxs)(n.li,{children:["PC: Pascal \u8BED\u8A00\u7F16\u8BD1\u7A0B\u5E8F. \u9ED8\u8BA4\u547D\u4EE4\u662F ",(0,i.jsx)(n.code,{children:"pc"}),"."]}),"\n",(0,i.jsxs)(n.li,{children:["YACC: Yacc \u6587\u6CD5\u5206\u6790\u5668\uFF08\u9488\u5BF9\u4E8E C \u7A0B\u5E8F\uFF09. \u9ED8\u8BA4\u547D\u4EE4\u662F ",(0,i.jsx)(n.code,{children:"yacc"}),"."]}),"\n",(0,i.jsxs)(n.li,{children:["YACCR: Yacc \u6587\u6CD5\u5206\u6790\u5668\uFF08\u9488\u5BF9\u4E8E RatFor \u7A0B\u5E8F\uFF09. \u9ED8\u8BA4\u547D\u4EE4\u662F ",(0,i.jsx)(n.code,{children:"yacc \u2013r"}),"."]}),"\n",(0,i.jsxs)(n.li,{children:["MAKEINFO: \u8F6C\u6362 TexInfo \u6E90\u6587\u4EF6\uFF08.texi\uFF09\u5230 Info \u6587\u4EF6\u7A0B\u5E8F. \u9ED8\u8BA4\u547D\u4EE4\u662F ",(0,i.jsx)(n.code,{children:"makeinfo"}),"."]}),"\n",(0,i.jsxs)(n.li,{children:["TEX: \u4ECE TeX \u6E90\u6587\u4EF6\u521B\u5EFA TeX DVI \u6587\u4EF6\u7684\u7A0B\u5E8F. \u9ED8\u8BA4\u547D\u4EE4\u662F ",(0,i.jsx)(n.code,{children:"tex"}),"."]}),"\n",(0,i.jsxs)(n.li,{children:["TEXI2DVI: \u4ECE TexInfo \u6E90\u6587\u4EF6\u521B\u5EFA\u519B TeX DVI \u6587\u4EF6\u7684\u7A0B\u5E8F. \u9ED8\u8BA4\u547D\u4EE4\u662F ",(0,i.jsx)(n.code,{children:"texi2dvi"}),"."]}),"\n",(0,i.jsxs)(n.li,{children:["WEAVE: \u8F6C\u6362 Web \u5230 TeX \u7684\u7A0B\u5E8F. \u9ED8\u8BA4\u547D\u4EE4\u662F ",(0,i.jsx)(n.code,{children:"weave"}),"."]}),"\n",(0,i.jsxs)(n.li,{children:["CWEAVE: \u8F6C\u6362 C Web \u5230 TeX \u7684\u7A0B\u5E8F. \u9ED8\u8BA4\u547D\u4EE4\u662F ",(0,i.jsx)(n.code,{children:"cweave"}),"."]}),"\n",(0,i.jsxs)(n.li,{children:["TANGLE: \u8F6C\u6362 Web \u5230 Pascal \u8BED\u8A00\u7684\u7A0B\u5E8F. \u9ED8\u8BA4\u547D\u4EE4\u662F ",(0,i.jsx)(n.code,{children:"tangle"}),"."]}),"\n",(0,i.jsxs)(n.li,{children:["CTANGLE: \u8F6C\u6362 C Web \u5230 C. \u9ED8\u8BA4\u547D\u4EE4\u662F ",(0,i.jsx)(n.code,{children:"ctangle"}),"."]}),"\n",(0,i.jsxs)(n.li,{children:["RM: \u5220\u9664\u6587\u4EF6\u547D\u4EE4. \u9ED8\u8BA4\u547D\u4EE4\u662F ",(0,i.jsx)(n.code,{children:"rm \u2013f"}),"."]}),"\n",(0,i.jsxs)(n.li,{children:["ARFLAGS: \u51FD\u6570\u5E93\u6253\u5305\u7A0B\u5E8F AR \u547D\u4EE4\u7684\u53C2\u6570. \u9ED8\u8BA4\u503C\u662F ",(0,i.jsx)(n.code,{children:"rv"}),"."]}),"\n",(0,i.jsxs)(n.li,{children:["ASFLAGS: \u6C47\u7F16\u8BED\u8A00\u7F16\u8BD1\u5668\u53C2\u6570. \uFF08\u5F53\u660E\u663E\u5730\u8C03\u7528 ",(0,i.jsx)(n.code,{children:".s"}),"\u6216 ",(0,i.jsx)(n.code,{children:".S"}),"\u6587\u4EF6\u65F6\uFF09."]}),"\n",(0,i.jsx)(n.li,{children:"CFLAGS: C \u8BED\u8A00\u7F16\u8BD1\u5668\u53C2\u6570."}),"\n",(0,i.jsx)(n.li,{children:"CXXFLAGS: C++\u8BED\u8A00\u7F16\u8BD1\u5668\u53C2\u6570."}),"\n",(0,i.jsx)(n.li,{children:"COFLAGS: RCS \u547D\u4EE4\u53C2\u6570."}),"\n",(0,i.jsx)(n.li,{children:"CPPFLAGS: C \u9884\u5904\u7406\u5668\u53C2\u6570. (C \u548C Fortran \u7F16\u8BD1\u5668\u4E5F\u4F1A\u7528\u5230\uFF09."}),"\n",(0,i.jsx)(n.li,{children:"FFLAGS: Fortran \u8BED\u8A00\u7F16\u8BD1\u5668\u53C2\u6570."}),"\n",(0,i.jsxs)(n.li,{children:["GFLAGS: SCCS ",(0,i.jsx)(n.code,{children:"get"})," \u7A0B\u5E8F\u53C2\u6570."]}),"\n",(0,i.jsxs)(n.li,{children:["LDFLAGS: \u94FE\u63A5\u5668\u53C2\u6570. (\u5982: ",(0,i.jsx)(n.code,{children:"ld"}),")."]}),"\n",(0,i.jsx)(n.li,{children:"LFLAGS: Lex \u6587\u6CD5\u5206\u6790\u5668\u53C2\u6570."}),"\n",(0,i.jsx)(n.li,{children:"PFLAGS: Pascal \u8BED\u8A00\u7F16\u8BD1\u5668\u53C2\u6570."}),"\n",(0,i.jsx)(n.li,{children:"RFLAGS: RatFor \u7A0B\u5E8F\u7684 Fortran \u7F16\u8BD1\u5668\u53C2\u6570."}),"\n",(0,i.jsx)(n.li,{children:"YFLAGS: Yacc \u6587\u6CD5\u5206\u6790\u5668\u53C2\u6570."}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"variable",children:"Variable"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"$@"}),': \u8868\u793A\u89C4\u5219\u4E2D\u7684\u76EE\u6807\u6587\u4EF6\u96C6. \u5728\u6A21\u5F0F\u89C4\u5219\u4E2D, \u5982\u679C\u6709\u591A\u4E2A\u76EE\u6807\uFF0C\u90A3\u4E48 "$@"\u5C31\u662F\u5339\u914D\u4E8E\u76EE\u6807\u4E2D\u6A21\u5F0F\u5B9A\u4E49\u7684\u96C6\u5408.']}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"$%"}),": \u4EC5\u5F53\u76EE\u6807\u662F\u51FD\u6570\u5E93\u6587\u4EF6\u4E2D\uFF0C\u8868\u793A\u89C4\u5219\u4E2D\u7684\u76EE\u6807\u6210\u5458\u540D.\n\u4F8B\u5982\uFF0C\u5982\u679C\u4E00\u4E2A\u76EE\u6807\u662F ",(0,i.jsx)(n.code,{children:"foo.a(bar.o)"}),"\uFF0C\u90A3\u4E48 ",(0,i.jsx)(n.code,{children:"$%"})," \u5C31\u662F ",(0,i.jsx)(n.code,{children:"bar.o"}),"\uFF0C",(0,i.jsx)(n.code,{children:"$@"})," \u5C31\u662F ",(0,i.jsx)(n.code,{children:"foo.a"}),".\n\u5982\u679C\u76EE\u6807\u4E0D\u662F\u51FD\u6570\u5E93\u6587\u4EF6 (Unix \u4E0B\u662F",(0,i.jsx)(n.code,{children:"[.a]"}),", Windows \u4E0B\u662F ",(0,i.jsx)(n.code,{children:"[.lib]"}),"), \u90A3\u4E48\u5176\u503C\u4E3A\u7A7A."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"$<"}),": \u4F9D\u8D56\u76EE\u6807\u4E2D\u7684\u7B2C\u4E00\u4E2A\u76EE\u6807\u540D\u5B57. \u5982\u679C\u4F9D\u8D56\u76EE\u6807\u662F\u4EE5\u6A21\u5F0F\uFF08\u5373 ",(0,i.jsx)(n.code,{children:"%"}),"\uFF09\u5B9A\u4E49\u7684,\n\u90A3\u4E48 ",(0,i.jsx)(n.code,{children:"$<"})," \u5C06\u662F\u7B26\u5408\u6A21\u5F0F\u7684\u4E00\u7CFB\u5217\u7684\u6587\u4EF6\u96C6. \u6CE8\u610F, \u5176\u662F\u4E00\u4E2A\u4E00\u4E2A\u53D6\u51FA\u6765\u7684."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"$?"}),": \u6240\u6709\u6BD4\u76EE\u6807\u65B0\u7684\u4F9D\u8D56\u76EE\u6807\u7684\u96C6\u5408. \u4EE5\u7A7A\u683C\u5206\u9694."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"$^"}),": \u6240\u6709\u7684\u4F9D\u8D56\u76EE\u6807\u7684\u96C6\u5408. \u4EE5\u7A7A\u683C\u5206\u9694. \u5982\u679C\u5728\u4F9D\u8D56\u76EE\u6807\u4E2D\u6709\u591A\u4E2A\u91CD\u590D\u7684\uFF0C\u90A3\u4E2A\u8FD9\u4E2A\u53D8\u91CF\u4F1A\u53BB\u9664\u91CD\u590D\u7684\u4F9D\u8D56\u76EE\u6807\uFF0C\u53EA\u4FDD\u7559\u4E00\u4EFD."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"$+"}),": \u8FD9\u4E2A\u53D8\u91CF\u5F88\u50CF ",(0,i.jsx)(n.code,{children:"$^"}),"\uFF0C\u4E5F\u662F\u6240\u6709\u4F9D\u8D56\u76EE\u6807\u7684\u96C6\u5408. \u53EA\u662F\u5B83\u4E0D\u53BB\u9664\u91CD\u590D\u7684\u4F9D\u8D56\u76EE\u6807."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"$(@D)"}),": \u8868\u793A ",(0,i.jsx)(n.code,{children:"$@"})," \u7684\u76EE\u5F55\u90E8\u5206 (\u4E0D\u4EE5\u659C\u6760\u4F5C\u4E3A\u7ED3\u5C3E),\n\u5982\u679C ",(0,i.jsx)(n.code,{children:"$@"})," \u503C\u662F ",(0,i.jsx)(n.code,{children:"dir/foo.o"}),"\uFF0C\u90A3\u4E48 ",(0,i.jsx)(n.code,{children:"$(@D)"})," \u5C31\u662F ",(0,i.jsx)(n.code,{children:"dir"}),"\uFF0C\n\u800C\u5982\u679C ",(0,i.jsx)(n.code,{children:"$@"})," \u4E2D\u6CA1\u6709\u5305\u542B\u659C\u6760\u7684\u8BDD\uFF0C\u5176\u503C\u5C31\u662F ",(0,i.jsx)(n.code,{children:"."})," (\u5F53\u524D\u76EE\u5F55)."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"$(@F)"}),": \u8868\u793A ",(0,i.jsx)(n.code,{children:"$@"})," \u7684\u6587\u4EF6\u90E8\u5206\uFF0C\u5982\u679C ",(0,i.jsx)(n.code,{children:"$@"})," \u503C\u662F ",(0,i.jsx)(n.code,{children:"dir/foo.o"}),", \u90A3\u4E48 ",(0,i.jsx)(n.code,{children:"$(@F)"})," \u5C31\u662F ",(0,i.jsx)(n.code,{children:"foo.o"}),",\n",(0,i.jsx)(n.code,{children:"$(@F)"})," \u76F8\u5F53\u4E8E\u51FD\u6570 ",(0,i.jsx)(n.code,{children:"$(notdir $@)"}),"."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"$(*D)"}),"/",(0,i.jsx)(n.code,{children:"$(*F)"}),": \u548C\u4E0A\u9762\u6240\u8FF0\u7684\u540C\u7406\uFF0C\u4E5F\u662F\u53D6\u6587\u4EF6\u7684\u76EE\u5F55\u90E8\u5206\u548C\u6587\u4EF6\u90E8\u5206.\n\u5BF9\u4E8E\u4E0A\u9762\u7684\u90A3\u4E2A\u4F8B\u5B50\uFF0C",(0,i.jsx)(n.code,{children:"$(*D)"})," \u8FD4\u56DE ",(0,i.jsx)(n.code,{children:"dir"}),"\uFF0C\u800C ",(0,i.jsx)(n.code,{children:"$(*F)"})," \u8FD4\u56DE ",(0,i.jsx)(n.code,{children:"foo"}),"."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"$(%D)"}),"/",(0,i.jsx)(n.code,{children:"$(%F)"}),": \u5206\u522B\u8868\u793A\u4E86\u51FD\u6570\u5305\u6587\u4EF6\u6210\u5458\u7684\u76EE\u5F55\u90E8\u5206\u548C\u6587\u4EF6\u90E8\u5206.\n\u8FD9\u5BF9\u4E8E\u5F62\u540C ",(0,i.jsx)(n.code,{children:"archive(member)"})," \u5F62\u5F0F\u7684\u76EE\u6807\u4E2D\u7684 ",(0,i.jsx)(n.code,{children:"member"})," \u4E2D\u5305\u542B\u4E86\u4E0D\u540C\u7684\u76EE\u5F55\u5F88\u6709\u7528."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"$(<D)"}),"/",(0,i.jsx)(n.code,{children:"$(<F)"}),": \u5206\u522B\u8868\u793A\u4F9D\u8D56\u6587\u4EF6\u7684\u76EE\u5F55\u90E8\u5206\u548C\u6587\u4EF6\u90E8\u5206."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"$(^D)"}),"/",(0,i.jsx)(n.code,{children:"$(^F)"}),": \u5206\u522B\u8868\u793A\u6240\u6709\u4F9D\u8D56\u6587\u4EF6\u7684\u76EE\u5F55\u90E8\u5206\u548C\u6587\u4EF6\u90E8\u5206 (\u65E0\u76F8\u540C\u7684)."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"$(+D)"}),"/",(0,i.jsx)(n.code,{children:"$(+F)"}),": \u5206\u522B\u8868\u793A\u6240\u6709\u4F9D\u8D56\u6587\u4EF6\u7684\u76EE\u5F55\u90E8\u5206\u548C\u6587\u4EF6\u90E8\u5206 (\u53EF\u4EE5\u6709\u76F8\u540C\u7684)."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"$(?D)"}),"/",(0,i.jsx)(n.code,{children:"$(?F)"}),": \u5206\u522B\u8868\u793A\u88AB\u66F4\u65B0\u7684\u4F9D\u8D56\u6587\u4EF6\u7684\u76EE\u5F55\u90E8\u5206\u548C\u6587\u4EF6\u90E8\u5206."]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"implicit-rules",children:"Implicit Rules"}),"\n",(0,i.jsx)(n.h3,{id:"c",children:"C"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"<n>.o"})," \u7684\u76EE\u6807\u7684\u4F9D\u8D56\u76EE\u6807\u4F1A\u81EA\u52A8\u63A8\u5BFC\u4E3A",(0,i.jsx)(n.code,{children:"<n>.c"}),",\n\u5E76\u4E14\u5176\u751F\u6210\u547D\u4EE4\u662F ",(0,i.jsx)(n.code,{children:"$(CC) \u2013c $(CPPFLAGS) $(CFLAGS)"}),"."]}),"\n",(0,i.jsx)(n.h3,{id:"c-1",children:"C++"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"<n>.o"})," \u7684\u76EE\u6807\u7684\u4F9D\u8D56\u76EE\u6807\u4F1A\u81EA\u52A8\u63A8\u5BFC\u4E3A ",(0,i.jsx)(n.code,{children:"<n>.cc"})," \u6216\u662F ",(0,i.jsx)(n.code,{children:"<n>.C"}),",\n\u5E76\u4E14\u5176\u751F\u6210\u547D\u4EE4\u662F ",(0,i.jsx)(n.code,{children:"$(CXX) \u2013c $(CPPFLAGS) $(CFLAGS)"}),"\n(\u5EFA\u8BAE\u4F7F\u7528 ",(0,i.jsx)(n.code,{children:".cc"})," \u4F5C\u4E3A C++\u6E90\u6587\u4EF6\u7684\u540E\u7F00, \u800C\u4E0D\u662F ",(0,i.jsx)(n.code,{children:".C"}),")."]}),"\n",(0,i.jsx)(n.h3,{id:"asm",children:"ASM"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"<n>.o"})," \u7684\u76EE\u6807\u7684\u4F9D\u8D56\u76EE\u6807\u4F1A\u81EA\u52A8\u63A8\u5BFC\u4E3A",(0,i.jsx)(n.code,{children:"<n>.s"}),"\uFF0C\u9ED8\u8BA4\u4F7F\u7528\u7F16\u8BD1\u54C1 ",(0,i.jsx)(n.code,{children:"as"}),"\uFF0C\u5E76\u4E14\u5176\u751F\u6210\u547D\u4EE4\u662F\uFF1A ",(0,i.jsx)(n.code,{children:"$(AS) $(ASFLAGS)"}),"\u3002\n",(0,i.jsx)(n.code,{children:"<n>.s"})," \u7684\u76EE\u6807\u7684\u4F9D\u8D56\u76EE\u6807\u4F1A\u81EA\u52A8\u63A8\u5BFC\u4E3A",(0,i.jsx)(n.code,{children:"<n>.S"}),"\uFF0C\u9ED8\u8BA4\u4F7F\u7528 C \u9884\u7F16\u8BD1\u5668 ",(0,i.jsx)(n.code,{children:"cpp"}),"\uFF0C\u5E76\u4E14\u5176\u751F\u6210\u547D\u4EE4\u662F\uFF1A ",(0,i.jsx)(n.code,{children:"$(AS) $(ASFLAGS)"}),"\u3002"]}),"\n",(0,i.jsx)(n.h3,{id:"object-linking",children:"Object Linking"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"<n>"}),"\u76EE\u6807\u4F9D\u8D56\u4E8E",(0,i.jsx)(n.code,{children:"<n>.o"}),"\uFF0C\u901A\u8FC7\u8FD0\u884C C \u7684\u7F16\u8BD1\u5668\u6765\u8FD0\u884C\u94FE\u63A5\u7A0B\u5E8F\u751F\u6210\uFF08\u4E00\u822C\u662F ",(0,i.jsx)(n.code,{children:"ld"}),"\uFF09\uFF0C\u5176\u751F\u6210\u547D\u4EE4\u662F\uFF1A\n",(0,i.jsx)(n.code,{children:"$(CC) $(LDFLAGS) <n>.o $(LOADLIBES) $(LDLIBS)"}),"\n\u8FD9\u4E2A\u89C4\u5219\u5BF9\u4E8E\u53EA\u6709\u4E00\u4E2A\u6E90\u6587\u4EF6\u7684\u5DE5\u7A0B\u6709\u6548\uFF0C\u540C\u65F6\u4E5F\u5BF9\u591A\u4E2A Object \u6587\u4EF6\uFF08\u7531\u4E0D\u540C\u7684\u6E90\u6587\u4EF6\u751F\u6210\uFF09\u7684\u4E5F\u6709\u6548\u3002\u4F8B\u5982\u5982\u4E0B\u89C4\u5219\uFF1A"]}),"\n",(0,i.jsx)(n.p,{children:"x : y.o z.o"}),"\n",(0,i.jsxs)(n.p,{children:["\u5E76\u4E14 ",(0,i.jsx)(n.code,{children:"x.c"}),"\u3001 ",(0,i.jsx)(n.code,{children:"y.c"}),"\u548C ",(0,i.jsx)(n.code,{children:"z.c"}),"\u90FD\u5B58\u5728\u65F6\uFF0C\u9690\u542B\u89C4\u5219\u5C06\u6267\u884C\u5982\u4E0B\u547D\u4EE4\uFF1A"]}),"\n",(0,i.jsx)(n.p,{children:"cc -c x.c -o x.o\ncc -c y.c -o y.o\ncc -c z.c -o z.o\ncc x.o y.o z.o -o x\nrm -f x.o\nrm -f y.o\nrm -f z.o"}),"\n",(0,i.jsx)(n.h2,{id:"function",children:"Function"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"filter"}),"\n",(0,i.jsx)(n.li,{children:"shell"}),"\n",(0,i.jsx)(n.li,{children:"subst"}),"\n",(0,i.jsx)(n.li,{children:"wildcard"}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"best-practices",children:"Best Practices"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-makefile",children:"$(filter %.o,$(files)): %.o: %.c\n$(filter %.elc,$(files)): %.elc: %.el\n"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-makefile",children:"$(CC) -c $(CFLAGS) $< -o $@\n"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-makefile",children:"(%.o) : %.c\n$(CC) $(CFLAGS) $(CPPFLAGS) -c $< -o $*.o\n$(AR) r $@ $*.o\n$(RM) $*.o\n"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-makefile",children:"%.d: %.c\n@set -e; rm -f $@; /\n$(CC) -M $(CPPFLAGS) $< > $@.$$$$; /\nsed 's,/($*/)/.o[ :]*,/1.o $@ : ,g' < $@.$$$$ > $@; /\n$(RM) -f $@.$$$$\n"})})]})}function j(e={}){let{wrapper:n}={...(0,d.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(x,{...e})}):x(e)}},30416(e,n,c){c.d(n,{R:()=>s,x:()=>r});var l=c(59471);let i={},d=l.createContext(i);function s(e){let n=l.useContext(d);return l.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function r(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:s(e.components),l.createElement(d.Provider,{value:n},e.children)}}}]);